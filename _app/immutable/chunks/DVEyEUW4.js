const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BXiomijB.js","./DD38FOU2.js","./Cqp8bxVM.js"])))=>i.map(i=>d[i]);
import"./CWj6FrbW.js";import"./L2DJem1u.js";import{C as se,D as ne,aj as pe,y as F,w as k,ak as _e,al as me,F as re,P as Z,O as he,G as B,L as Se,A as T,I as ie,av as Te,z as ge,ax as we,aT as ve,J as Ae,K as Ee}from"./Cqp8bxVM.js";import{h as be}from"./DOun34Xx.js";import{i as oe}from"./BITwWVFN.js";import{p as y,i as Ie}from"./B2332r9h.js";import{a as ye,s as Me}from"./Dp3UgM57.js";import{F as xe,N as Pe,V as P,a as Fe,b as Le,G as K,B as L,M as O,S as le,c as M,C as Ne,d as Ce,e as Re,f as ze,g as Ge,h as Oe,i as ke,u as De,T as He}from"./l7y9a9wp.js";import{b as Ue}from"./BKVNmyoH.js";import{_ as Xe}from"./Dp1pzeXC.js";const U={is_voll:1,is_streifen:0,is_punkt:0,f_eigen:8,h:.5,b:4,t:.05,g_a:2,n_gleis:2,is_vollbahn:1,is_regionalbahn:0,is_stadtbahn:0,is_strassenbahn:0,is_user_defined:0,q_v:156,n_streifen:3,b_streifen:.3,n_punkt:2,a_punkt:.1,s_punkt:1};function Be(){const{subscribe:s,set:t,update:e}=se(U),n={subscribe:s,set:a=>{t(a),X(a)},update:a=>{e(r=>{const l=a(r);return X(l),l})},reset:()=>{t(U),X(U)},updateField:(a,r)=>{n.update(l=>({...l,[a]:r}))}};return n}const V=Be();function X(s){Xe(()=>import("./BXiomijB.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>{t.calculate(s)})}var Ve=re("<!> <!>",1);function St(s,t){ne(t,!1);const[e,n]=Me(),a=()=>ye(V,"$massSpringParameterStore",e);let r=y(t,"field",8),l=y(t,"label",8),c=y(t,"helperText",8,""),g=y(t,"step",8,.1),u=y(t,"disabled",8,!1),i=y(t,"min",8,void 0),o=y(t,"max",8,void 0),d=k(),f=k(!1),p=k(""),h=null;function w(v){let x=v,I=!1,A="";i()!==void 0&&v<i()?(x=i(),I=!0,A=`Minimalwert: ${i()}${c()?" "+c():""}`):o()!==void 0&&v>o()&&(x=o(),I=!0,A=`Maximalwert: ${o()}${c()?" "+c():""}`),I&&(F(f,!0),F(p,A),h&&clearTimeout(h),h=setTimeout(()=>{F(f,!1),F(p,"")},3e3)),V.updateField(r(),x)}pe(()=>(a(),_e(r())),()=>{F(d,a()[r()])}),me(),oe();var _=Ve(),m=Z(_);xe(m,{children:(v,x)=>{var I=he(),A=Z(I);be(A,l),B(v,I)},$$slots:{default:!0}});var C=Se(m,2);Pe(C,{size:"sm",get step(){return g()},get helperText(){return c()},get disabled(){return u()},get min(){return i()},get max(){return o()},light:!0,get invalid(){return T(f)},get invalidText(){return T(p)},get value(){return T(d)},set value(v){F(d,v)},$$events:{change:()=>w(T(d))},$$legacy:!0}),B(s,_),ie(),n()}const Tt={F_EIGEN_MIN:.1,F_EIGEN_MAX:100,F_EIGEN_STEP:.5,H_MIN:.2,H_MAX:1.5,H_STEP:.05,B_MIN:2,B_MAX:8,B_STEP:.1,T_MIN:.01,T_MAX:.2,T_STEP:.01,G_A_MIN:0,G_A_MAX:100,G_A_STEP:.1,Q_V_MIN:0,Q_V_MAX:300,Q_V_STEP:1,B_STREIFEN_MIN:.1,B_STREIFEN_MAX:1,B_STREIFEN_STEP:.05,A_PUNKT_MIN:.02,A_PUNKT_MAX:.5,A_PUNKT_STEP:.01,S_PUNKT_MIN:.4,S_PUNKT_MAX:2,S_PUNKT_STEP:.1};function Ke(s,t,e){if(!s||!t)return;const n=new P;n.subVectors(t.target,s.position),n.normalize();const r=s.position.distanceTo(t.target)*(1-1/e),l=n.clone().multiplyScalar(r);s.position.add(l),t.update()}function qe(s){return()=>{}}function We(s,t,e){const n=a=>{a.preventDefault();const r=a.deltaY>0?.95:1.05;Ke(t,e,r)};return s.domElement.addEventListener("wheel",n,{passive:!1}),()=>{s.domElement.removeEventListener("wheel",n)}}function Qe(s){Fe(s,-10)}function Ze(s){return Le(s,{x:0,y:500,z:500})}const b=10,ce=.05,G=.6,Ye=.3,D=.05;function Y(s,t,e,n=!1){const a=je(s,t,e,n),r=Je(s,t,e,n);return{supportPlate:a,carryPlate:r}}function j(s,t){t&&($(s,t.supportPlate),$(s,t.carryPlate))}function je(s,t,e,n=!1){const a=new K,r=t.b*(1+ce),l=Ye,c=b,g=new L(r,l,c),u=new O({color:le,shininess:100,flatShading:!0,transparent:!1}),i=new M(g,u);i.castShadow=!0,i.receiveShadow=!0,i.position.set(e[0],e[1]-l/2,e[2]+c/2),a.add(i);const o=t.h+l+.1,d=l,f=c,p=c*(1-G),h=new L(d,o,f),w=new L(d,o,p),_=new M(w,u);_.castShadow=!0,_.receiveShadow=!0,_.position.set(e[0]+r/2+d/2,e[1]-l+o/2,e[2]+c*G+1/2*p),a.add(_);const m=new M(h,u);return m.castShadow=!0,m.receiveShadow=!0,m.position.set(e[0]-r/2-d/2,e[1]-l+o/2,e[2]+c/2),a.add(m),s.add(a),a}function $e(s){const t=document.createElement("canvas");t.width=64,t.height=64;const e=t.getContext("2d");e.fillStyle="red",e.beginPath(),e.arc(32,32,28,0,Math.PI*2),e.fill(),e.fillStyle="white",e.font="bold 36px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText(s,32,32);const n=new Ne(t),a=new Ce({map:n}),r=new Re(a);return r.scale.set(.08,.08,1),r}function Je(s,t,e,n=!1){const a=new K,r=t.b,l=t.h,c=b*(1-G),g=new L(r,l,c),u=new O({color:le,shininess:100,flatShading:!0,transparent:!1}),i=new M(g,u);return i.castShadow=!0,i.receiveShadow=!0,i.position.set(e[0],e[1]+D+l/2,e[2]+G*b+c/2),a.add(i),n&&[{pos:new P(e[0]-r/2,e[1]+.1,e[2]),label:"C0"},{pos:new P(e[0]+r/2,e[1]+.1,e[2]),label:"C1"},{pos:new P(e[0]+r/2,e[1]+.1,e[2]+c),label:"C2"},{pos:new P(e[0]-r/2,e[1]+.1,e[2]+c),label:"C3"}].forEach(({pos:d,label:f})=>{const p=$e(f);p.position.copy(d),a.add(p)}),s.add(a),a}function $(s,t){t&&(t.traverse(e=>{e instanceof M&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),s.remove(t))}const N=.05;function J(s,t,e,n=!1){const a=new K;return t.is_voll===1?et(s,a,t,e):t.is_streifen===1?tt(s,a,t,e):t.is_punkt===1&&st(s,a,t,e),s.add(a),{elastomer:a}}function ee(s,t){!t||!t.elastomer||(t.elastomer.traverse(e=>{e instanceof M&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),s.remove(t.elastomer))}function et(s,t,e,n,a){const r=e.b*(1+ce),l=D,c=b*(1-N),g=new L(r,l,c),u=new O({color:3355443,shininess:50,flatShading:!0,transparent:!1}),i=new M(g,u);i.castShadow=!0,i.receiveShadow=!0,i.position.set(n[0],n[1]+l/2,n[2]+N*b+c/2),t.add(i)}const te=.6;function fe(s,t,e,n){const a=e-1+2*te,r=t/a,l=s-t/2,c=r*(te+(n-1));return l+c}function tt(s,t,e,n,a){const r=e.n_streifen;if(r<1)return;const l=e.b_streifen,c=D,g=b*(1-N),u=e.b,i=new O({color:3355443,shininess:50,flatShading:!0,transparent:!1});for(let o=1;o<=r;o++){const d=fe(n[0],u,r,o),f=at(i,l,c,g,d,n);t.add(f)}}function at(s,t,e,n,a,r){const l=new L(t,e,n),c=new M(l,s);return c.castShadow=!0,c.receiveShadow=!0,c.position.set(a,r[1]+e/2,r[2]+N*b+n/2),c}function st(s,t,e,n,a){const r=e.n_punkt;if(r<1)return;const l=Math.sqrt(e.a_punkt),c=D,g=e.b,u=N*b,i=b*(1-N),o=e.s_punkt,d=new O({color:3355443,shininess:50,flatShading:!0,transparent:!1});for(let f=1;f<=r;f++){const p=fe(n[0],g,r,f);let h=0;for(;h+l/2<=i;){const w=n[2]+u+h+l/2,_=new L(l,c,l),m=new M(_,d);if(m.castShadow=!0,m.receiveShadow=!0,m.position.set(p,n[1]+c/2,w),t.add(m),h+=o,o<=0)break}}}function nt(){const{subscribe:s,set:t,update:e}=se(null);return{subscribe:s,set:t,update:e,saveState:(n,a)=>{t({position:n,target:a})},clear:()=>t(null)}}const ae=nt();var rt=re('<div class="scene-container svelte-7vnivq"><!></div>');function gt(s,t){ne(t,!1),y(t,"autoRotate",8,!1);let e=y(t,"showTooltip",8,!0),n;const a=[0,2,0],r=G*b/2,l=new P(a[0],a[1],a[2]+r),c=10,g=new P(a[0]+c,a[1]+c,a[2]-c);let u=k(),i,o,d,f,p,h,w,_,m,C,v,x,I=0;Te(async()=>{i=ze(),d=Ge(T(u)),Qe(i),h=Ze(i),o=Oe(35);const S=ge(ae);S?o.position.set(S.position.x,S.position.y,S.position.z):o.position.copy(g),x=V.subscribe(async E=>{n=E,i&&w!==void 0&&(w&&j(i,w),_&&ee(i,_),w=Y(i,n,a,!1),_=J(i,n,a,!1))});let H;S?H=[S.target.x,S.target.y,S.target.z]:H=[l.x,l.y,l.z],f=ke(o,d,H),m=We(d,o,f),C=qe(T(u)),w=Y(i,n,a,!1),_=J(i,n,a,!1);const q=1e3/30;let W=0;const Q=E=>{v=requestAnimationFrame(Q);const R=E-W;if(!(R<q)){if(W=E-R%q,De(f),E-I>=1e3&&(console.log("Camera position:",{x:parseFloat(o.position.x.toFixed(2)),y:parseFloat(o.position.y.toFixed(2)),z:parseFloat(o.position.z.toFixed(2))}),I=E),h&&o){const z=new P(0,500,500);z.applyQuaternion(o.quaternion),h.position.copy(o.position).add(z),f&&f.target&&(h.target.position.copy(f.target),h.target.updateMatrixWorld())}d.render(i,o)}};if(Q(0),await we(),T(u)&&T(u)instanceof Element){let E=!1;p=new ResizeObserver(()=>{T(u)&&d&&o&&!E&&(E=!0,requestAnimationFrame(()=>{if(T(u)&&d&&o){const R=T(u).clientWidth,z=T(u).clientHeight;o.aspect=R/z,o.updateProjectionMatrix(),d.setSize(R,z)}E=!1}))}),p.observe(T(u))}}),ve(()=>{o&&f&&f.target&&ae.saveState({x:o.position.x,y:o.position.y,z:o.position.z},{x:f.target.x,y:f.target.y,z:f.target.z}),v!==void 0&&cancelAnimationFrame(v),m&&m(),C&&C(),x&&x(),p&&p.disconnect(),f&&f.dispose(),d&&d.dispose(),w&&i&&j(i,w),_&&i&&ee(i,_)}),oe();var A=rt(),ue=Ae(A);{var de=S=>{He(S,{rightOffset:0})};Ie(ue,S=>{e()&&S(de)})}Ee(A),Ue(A,S=>F(u,S),()=>T(u)),B(s,A),ie()}export{Tt as I,gt as M,St as P,V as m,X as p};
