import{a4 as St,t as Le,h as Ue,u as vt,a_ as pt,d as Ze,a as xt,f as yt,b as Mt,c as bt,g as ce,aK as At,B as Tt,A as Lt,ay as Oe,q as J,ai as re,T as M,a0 as B,ak as ge,af as he,n as it,a7 as Pe,O as v,v as Q,N as Rt,aj as Nt,at as ct,ac as Gt,ae as It,aN as zt}from"./BKKamjXU.js";import{m as Bt,b as Ee,s as we}from"./BQQo2vOL.js";import{b as Ve,e as Ct,f as Se,t as lt,a as V,c as Ot}from"./7uABVGkd.js";import"./CJYkZmJn.js";import{i as j}from"./CgXxt2k1.js";import{p as G}from"./BUnJTkC2.js";import{y as De,N as Xe,G as $e,h as ve,i as Pt,B as H,c as qe,M as I,z as Dt,A as Xt,E as ft,V as p,e as $t,C as ut,W as Ft,f as kt,P as Ht,H as Yt,D as Ut,J as Zt,K as Vt,O as qt,Q as Kt,R as Wt,U as dt,X as Y,Y as Re,Z as Ne,_ as Ge,j as U,$ as Jt,l as Qt,m as jt,s as en,u as tn}from"./Dkui9F0T.js";import{b as nn}from"./DxNVJtZB.js";function an(t,e,n=!1,c=!1,s=!1){var o=t,r="";St(()=>{var i=vt;if(r===(r=e()??"")){Le&&Ue();return}if(i.nodes_start!==null&&(pt(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),r!==""){if(Le){Ze.data;for(var a=Ue(),f=a;a!==null&&(a.nodeType!==8||a.data!=="");)f=a,a=xt(a);if(a===null)throw yt(),Mt;Ve(Ze,f),o=bt(a);return}var l=r+"";n?l=`<svg>${l}</svg>`:c&&(l=`<math>${l}</math>`);var u=Ct(l);if((n||c)&&(u=ce(u)),Ve(ce(u),u.lastChild),n||c)for(;ce(u);)o.before(ce(u));else o.before(u)}})}function $n(t,e,n=e){var c=At();Bt(t,"input",s=>{var o=s?t.defaultValue:t.value;if(o=pe(t)?xe(o):o,n(o),c&&o!==(o=e())){var r=t.selectionStart,i=t.selectionEnd;t.value=o??"",i!==null&&(t.selectionStart=r,t.selectionEnd=Math.min(i,t.value.length))}}),(Le&&t.defaultValue!==t.value||Tt(e)==null&&t.value)&&n(pe(t)?xe(t.value):t.value),Lt(()=>{var s=e();pe(t)&&s===xe(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function pe(t){var e=t.type;return e==="number"||e==="range"}function xe(t){return t===""?null:+t}const F={s_65:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=6.25?4.03*t**1.16:33.9,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},s_70:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=5?6.99*t:34.95,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},esz_100:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<2.33?5.3805*t-.6536:t>=2.33&&t<=2.5?10.635*t-12.89:t>2.5&&t<=5?8.4004*t-7.3293:34.7,rot_b_rule:(t,e)=>Math.min(450*t/e,48),rot_res_rule:48,"Nachweis erfolgreich t":[]},conti_60:{check:!0,manufacturer:"ContiTech",thicknesses:[10,20,30],sigma_rd_rule:t=>t<=5?.315*t**2+4.035*t:28.05,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},leschu_n15:{check:!0,manufacturer:"Leschu",thicknesses:[10,15,20],sigma_rd_rule:t=>t<1.88?3.29*t+1.46:t>=1.88&&t<2.5?2.58*t+2.79:t>=2.5&&t<3.5?3.34*t+.88:t>=3.5&&t<3.75?12.21*t-30.17:t>=3.75&&t<5?3.15*t+3.81:t>=5&&t<=10?1.66*t+11.29:t>10?27.89:0,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},matteco_elr08:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.17?.422*Math.E**(.698*t):7.75,rot_b_rule:(t,e)=>Math.min(200*t/e,16),rot_res_rule:16,"Nachweis erfolgreich t":[]},matteco_elr18:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.5?1.28*t**1.25:8.4,rot_b_rule:(t,e)=>Math.min(200*t/e,20),rot_res_rule:20,"Nachweis erfolgreich t":[]}};function rn(t){const{is_ortbeton:e,a:n,b:c,is_dorn:s,is_wirksamgeschlossen:o,d_b:r,n_b:i,ff_zd:a,v_x:f,alpha_y:l,alpha_a:u,c_nom:m,is_streifen:_}=t,d=JSON.parse(JSON.stringify(F)),g={rules:[(b,C)=>b>=70||C>=100&&b>=50,(b,C)=>C>=70]},h={rules:[(b,C)=>b>=70,(b,C)=>C>=70]};g.rules.every(b=>b(n,c))||(d.s_65.check=!1,d.s_70.check=!1,d.esz_100.check=!1,d.leschu_n15.check=!1,d.matteco_elr08.check=!1,d.matteco_elr18.check=!1),h.rules.every(b=>b(n,c))||(d.conti_60.check=!1);const E=n*c;let w;s===0?w=E:w=Math.round(E-i*Math.PI*(r/2)**2);const T=Math.round(1e3*a/w*10)/10,S=10;let y=Math.round(.625/n*1e3*10)/10;e===0&&(y=y*.5);const x=y+S,L=l+x,O=n+(m+10)+25;let X;_===0&&(X=c+2*(m+10));const $=[];for(const[b,C]of Object.entries(d))if(C.check){const se=typeof F[b].thicknesses=="function"?F[b].thicknesses(n):F[b].thicknesses;for(const z of se){let R;!s||o?R=Math.round(E/(2*z*(n+c))*1e3)/1e3:R=Math.round((E-.25*Math.PI*i*z**2)/(2*z*(n+c)+z*Math.PI*i*r)*1e3)/1e3;const P=F[b].sigma_rd_rule(R),N=F[b].rot_b_rule(z,n),oe=F[b].rot_res_rule,ie=.6*(z-2),ke=T/P,He=f/ie,Ye=L/N,gt=Math.round(1.5*T*c*z/1e3*10)/10,Et=Math.round(1.5*T*n*z/1e3*10)/10,wt=ke<=1&&He<=1&&Ye<=1;$.push({lagerType:b,manufacturer:F[b].manufacturer,thickness:z,s:R,sigma_rd:P,alpha_y_max:N,alpha_y_ges:L,alpha_res_max:oe,v_x_max:ie,sigma_nachw:ke,v_x_nachw:He,rot_b_nachw:Ye,querzug_x:gt,querzug_y:Et,passed:wt,l_xmin:O,l_ymin:X})}}return $}const sn=Oe([]),on=Oe(null),ye={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,is_wirksamgeschlossen:0,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function cn(){const{subscribe:t,set:e,update:n}=Oe(ye),c={subscribe:t,set:s=>{e(s),Me(s)},update:s=>{n(o=>{const r=s(o);return Me(r),r})},reset:()=>{e(ye),Me(ye)},updateField:(s,o)=>{c.update(r=>({...r,[s]:o}))}};return c}const D=cn();function Me(t){on.set(null);const e=rn(t);sn.set(e)}const A={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:50,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:0,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var ln=Se("<!> <!>",1);function Fn(t,e){J(e,!1);const[n,c]=we(),s=()=>Ee(D,"$shearDeformationParameterStore",n);let o=G(e,"step",8,5),r=B(),i=B(!1),a=B(""),f=null;function l(d){let g=d,h=!1,E="";d<A.LAGERBREITE_MIN?(g=A.LAGERBREITE_MIN,h=!0,E=`Minimalwert: ${A.LAGERBREITE_MIN} mm`):d>A.LAGERBREITE_MAX&&(g=A.LAGERBREITE_MAX,h=!0,E=`Maximalwert: ${A.LAGERBREITE_MAX} mm`);const w=s().b+100;g>w&&(g=w,h=!0,E="a > b+100 nicht erlaubt"),h&&(M(i,!0),M(a,E),f&&clearTimeout(f),f=setTimeout(()=>{M(i,!1),M(a,"")},3e3)),D.updateField("a",g)}re(()=>s(),()=>{M(r,s().a)}),ge(),j();var u=ln(),m=he(u);De(m,{children:(d,g)=>{it();var h=lt("Lagertiefe a");V(d,h)},$$slots:{default:!0}});var _=Pe(m,2);Xe(_,{size:"sm",get step(){return o()},helperText:"mm",get min(){return A.LAGERBREITE_MIN},get max(){return A.LAGERBREITE_MAX},light:!0,get invalid(){return v(i)},get invalidText(){return v(a)},get value(){return v(r)},set value(d){M(r,d)},$$events:{change:()=>l(v(r))},$$legacy:!0}),V(t,u),Q(),c()}var fn=Se("<!> <!>",1);function kn(t,e){J(e,!1);const[n,c]=we(),s=()=>Ee(D,"$shearDeformationParameterStore",n);let o=G(e,"disabled",8,!1),r=G(e,"step",8,5),i=B(),a=B(!1),f=B(""),l=null;function u(h){let E=h,w=!1,T="";h<A.LAGERLAENGE_MIN?(E=A.LAGERLAENGE_MIN,w=!0,T=`Minimalwert: ${A.LAGERLAENGE_MIN} mm`):h>A.LAGERLAENGE_MAX&&(E=A.LAGERLAENGE_MAX,w=!0,T=`Maximalwert: ${A.LAGERLAENGE_MAX} mm`),w&&(M(a,!0),M(f,T),l&&clearTimeout(l),l=setTimeout(()=>{M(a,!1),M(f,"")},3e3)),D.updateField("b",E)}re(()=>s(),()=>{M(i,s().b)}),ge(),j();var m=fn(),_=he(m);De(_,{children:(h,E)=>{it();var w=lt("Lagerbreite b");V(h,w)},$$slots:{default:!0}});var d=Pe(_,2);const g=Rt(()=>o()||s().is_streifen===1);Xe(d,{size:"sm",get step(){return r()},helperText:"mm",get disabled(){return v(g)},get min(){return A.LAGERLAENGE_MIN},get max(){return A.LAGERLAENGE_MAX},light:!0,get invalid(){return v(a)},get invalidText(){return v(f)},get value(){return v(i)},set value(h){M(i,h)},$$events:{change:()=>u(v(i))},$$legacy:!0}),V(t,m),Q(),c()}var un=Se("<!> <!>",1);function mt(t,e){J(e,!1);const[n,c]=we(),s=()=>Ee(D,"$shearDeformationParameterStore",n);let o=G(e,"field",8),r=G(e,"label",8),i=G(e,"helperText",8,""),a=G(e,"step",8,1),f=G(e,"disabled",8,!1),l=G(e,"min",8,void 0),u=G(e,"max",8,void 0),m=B(),_=B(!1),d=B(""),g=null;function h(S){let y=S,x=!1,L="";l()!==void 0&&S<l()?(y=l(),x=!0,L=`Minimalwert: ${l()}${i()?" "+i():""}`):u()!==void 0&&S>u()&&(y=u(),x=!0,L=`Maximalwert: ${u()}${i()?" "+i():""}`),x&&(M(_,!0),M(d,L),g&&clearTimeout(g),g=setTimeout(()=>{M(_,!1),M(d,"")},3e3)),D.updateField(o(),y)}re(()=>(s(),Nt(o())),()=>{M(m,s()[o()])}),ge(),j();var E=un(),w=he(E);De(w,{children:(S,y)=>{var x=Ot(),L=he(x);an(L,r),V(S,x)},$$slots:{default:!0}});var T=Pe(w,2);Xe(T,{size:"sm",get step(){return a()},get helperText(){return i()},get disabled(){return f()},get min(){return l()},get max(){return u()},light:!0,get invalid(){return v(_)},get invalidText(){return v(d)},get value(){return v(m)},set value(S){M(m,S)},$$events:{change:()=>h(v(m))},$$legacy:!0}),V(t,E),Q(),c()}function Hn(t,e){J(e,!1);let n=G(e,"step",8,5);j(),mt(t,{field:"c_nom",label:"Betondeckung Konsole c<sub>nom</sub>",get step(){return n()},helperText:"mm",get min(){return A.BETONDECKUNG_MIN},get max(){return A.BETONDECKUNG_MAX}}),Q()}function Yn(t,e){J(e,!1);const[n,c]=we(),s=()=>Ee(D,"$shearDeformationParameterStore",n),o=B(),r=B();let i=G(e,"step",8,1);re(()=>s(),()=>{M(o,s())}),re(()=>v(o),()=>{M(r,v(o).is_streifen?"kN/m":"kN")}),ge(),j(),mt(t,{field:"ff_zd",label:"Bemessungslast F<sub>z,d</sub>",get step(){return i()},get helperText(){return v(r)},get min(){return A.BEMESSUNGSLAST_MIN},get max(){return A.BEMESSUNGSLAST_MAX}}),Q(),c()}const ee=0,Z=-.8,te=-.8,Ke=(Z+te)/2,le=.2,fe=Z,ue=2,de=.25,_t=.08,dn=[[Z,1,-0],[te,1,-0],[te,1,ee],[Z,1,ee],[Ke,.3,ee],[Z,.3,ee],[te,.6,ee],[te,.6,-0],[Ke,.3,-0],[Z,.3,-0],[fe,0,de],[fe,ue,de],[fe,ue,-.25],[fe,0,-.25],[le,ue,-.25],[le,0,-.25],[le,ue,de],[le,0,de]],mn=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],_n=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function Fe(t,e,n=0,c=25){const s=dn.map(a=>[a[0],a[1],a[2]]),o=c/1e3+.01,r=t/1e3;let i=e/2/1e3;return n||(i+=o),[1,2,6,7].forEach(a=>{s[a][0]-=r+_t+o}),[4,8].forEach(a=>{s[a][0]-=-.1}),[0,1,7,8,9].forEach(a=>{s[a][2]-=i}),[2,3,4,5,6].forEach(a=>{s[a][2]+=i}),n?([12,13,14,15].forEach(a=>{s[a][2]=-e/2/1e3}),[10,11,16,17].forEach(a=>{s[a][2]=e/2/1e3})):([12,13,14,15].forEach(a=>{s[a][2]-=i}),[10,11,16,17].forEach(a=>{s[a][2]+=i})),s}function hn(t){const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");n.fillStyle="red",n.beginPath(),n.arc(32,32,28,0,Math.PI*2),n.fill(),n.fillStyle="white",n.font="bold 36px Arial",n.textAlign="center",n.textBaseline="middle",n.fillText(t,32,32);const c=new Dt(e),s=new Xt({map:c}),o=new ft(s);return o.scale.set(.08,.08,1),o}function We(t,e,n=!1){const c=new $e,s=e.a,o=e.b,r=e.is_streifen,i=e.c_nom,a=new ve({color:Pt,shininess:100,flatShading:!0,transparent:!1}),f=Fe(s,o,r,i),l=new Float32Array(f.flat()),u=new H;u.setAttribute("position",new qe(l,3)),u.setIndex(mn),u.computeVertexNormals();const m=new I(u,a);m.castShadow=!0,m.receiveShadow=!0,c.add(m);const _=new H;_.setAttribute("position",new qe(l,3)),_.setIndex(_n),_.computeVertexNormals();const d=new I(_,a);return d.castShadow=!0,d.receiveShadow=!0,c.add(d),n&&f.forEach((g,h)=>{const E=hn(h.toString());E.position.set(g[0],g[1],g[2]),c.add(E)}),t.add(c),c}function W(){const t=ct(D),e=Fe(t.a,t.b,t.is_streifen,t.c_nom),n=[e[0],e[1],e[2],e[3]];return{centerX:-t.a/2/1e3-_t+Z,centerY:n[0][1],centerZ:(n[0][2]+n[1][2]+n[2][2]+n[3][2])/4}}function Je(t,e){e&&(e.traverse(n=>{n instanceof I&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(c=>c.dispose()):n.material.dispose())}),t.remove(e))}let Ie=!0,be=0,ne=0,_e=null,ae=null;const gn=.01,Ae=[new p(-2.1247554456236646,1.8348909616249438,-.9418251993957858),new p(-2.298436211128349,2.1141465425086055,.0593750739688058),new p(-1.8215114290760264,1.8160993918937776,1.1472099754138583)];function En(){const t=W();return new p(t.centerX,t.centerY,t.centerZ)}function wn(t,e,n){if(!Ie||!e)return;ne===0&&(ne=t,_e=e.position.clone(),ae=n.target.clone());const c=t-ne,s=_e||Ae[be],o=(be+1)%Ae.length,r=Ae[o],a=s.distanceTo(r)/gn*1e3,f=En();if(c<a){const l=c/a;e.position.lerpVectors(s,r,l),n&&ae&&(n.target.lerpVectors(ae,f,l),n.update())}else be=o,ne=t,_e=null,ae=f.clone()}function Sn(t){const e=()=>{Ie=!1},n=()=>{Ie=!0,ne=0,_e=null,ae=null};return t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",n),()=>{t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",n)}}function vn(){const t=new $t;return t.background=new ut(16777215),t}function pn(t){const e=new Ft({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,e.shadowMap.type=kt,t.appendChild(e.domElement),e}function xn(t){const e=new I(new Ht(200,200),new ve({color:13355979,specular:4671303}));e.rotation.x=-Math.PI/2,e.position.y=-10,e.receiveShadow=!0}function yn(t){return t.add(new Yt(9272444,4802918,3)),Mn(t,0,500,500,16777215,2)}function Mn(t,e,n,c,s,o){const r=new Ut(s,o);r.position.set(e,n,c),r.castShadow=!0;const i=1e3;return r.shadow.camera.left=-1e3,r.shadow.camera.right=i,r.shadow.camera.top=i,r.shadow.camera.bottom=-1e3,r.shadow.camera.near=1,r.shadow.camera.far=2e3,r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.radius=1,r.shadow.bias=-5e-4,t.add(r),t.add(r.target),r}const bn=400,An=400,Tn=10,Ln=.4,Rn=.4,Nn=.01;function Qe(t,e){const n=new $e,c=new ve({color:Zt,shininess:100,specular:2236962}),s=(e.a-bn)/1e3,o=(e.b-An)/1e3,r=(e.t-Tn)*2/1e3,i=Ln+s,a=Rn+o,f=Nn+r,l=new I(new Vt(i,f,a),c),u=W();l.position.set(u.centerX,u.centerY+f/2,u.centerZ),l.castShadow=!0,l.receiveShadow=!0,n.add(l),t.add(n),l.geometry.computeBoundingBox();const m=new qt;m.setFromObject(l);const _=u.centerY;return{group:n,boundingBox:m,height:_,lengthDiffX:s,lengthDiffZ:o}}function je(t,e){e&&(e.traverse(n=>{n instanceof I&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(c=>c.dispose()):n.material.dispose())}),t.remove(e))}function et(t,e){const n=new $e;if(!e.is_dorn)return t.add(n),n;const c=new ve({color:Kt,flatShading:!1}),s=(50+e.b*.2)/1e3,o=e.d_b/2/1e3,r=W(),i=e.n_b;for(let a=0;a<i;a++){const f=new I(new Wt(o,o,s,16),c);let l=0;if(i===2){const u=e.b/1e3;l=a===0?u/5:-u/5}f.position.set(r.centerX,r.centerY+s/2,r.centerZ+l),f.castShadow=!0,f.receiveShadow=!0,n.add(f)}return t.add(n),n}function tt(t,e){e&&(e.traverse(n=>{n instanceof I&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(c=>c.dispose()):n.material.dispose())}),t.remove(e))}let q=[],k=[],Te=null,K=null;const me=11765,ze=.012,Be=2e-4;async function ht(){return Te||K||(K=new Promise((t,e)=>{new Jt().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",c=>{Te=c,K=null,t(c)},void 0,c=>{K=null,e(c)})}),K)}async function nt(t,e,n,c,s,o=0,r=0){try{const i=await ht(),a=new Ne(s,{font:i,size:ze,depth:Be,curveSegments:12,bevelEnabled:!0,bevelThickness:3e-4,bevelSize:2e-4,bevelOffset:0,bevelSegments:3});a.computeBoundingBox();const f=a.boundingBox;if(f){const h=-(f.max.x-f.min.x)/2,E=-(f.max.y-f.min.y)/2;a.translate(h,E,0)}const l=new Ge({color:16711680,metalness:.3,roughness:.4}),u=new I(a,l),m=new p(n[0]-e[0],0,n[2]-e[2]).normalize(),_=new p(-m.z,0,m.x),d=(e[0]+n[0])/2+o+_.x*c,g=(e[2]+n[2])/2+r+_.z*c;u.position.set(d,e[1]+.001,g),u.rotation.x=-Math.PI/2,u.rotation.z=Math.atan2(m.z,m.x)+Math.PI,t.add(u),q.push(u)}catch(i){console.error("Failed to load font for 3D text:",i)}}function at(t,e,n,c,s,o=.05){const r=new p(-c.z,0,c.x).normalize(),i=new H().setFromPoints([new p(e.x-r.x*o/2,e.y,e.z-r.z*o/2),new p(e.x+r.x*o/2,e.y,e.z+r.z*o/2)]),a=new Y(i,s);t.add(a),q.push(a);const f=new H().setFromPoints([new p(n.x-r.x*o/2,n.y,n.z-r.z*o/2),new p(n.x+r.x*o/2,n.y,n.z+r.z*o/2)]),l=new Y(f,s);t.add(l),q.push(l)}function Ce(t){q.forEach(e=>{t.remove(e),e instanceof I&&(e.geometry&&e.geometry.dispose(),e.material instanceof U&&e.material.dispose()),e instanceof Y&&(e.geometry&&e.geometry.dispose(),e.material instanceof U&&e.material.dispose()),e instanceof ft&&e.material instanceof U&&e.material.dispose()}),q=[]}function rt(t){k.forEach(e=>{t.remove(e),e instanceof I&&(e.geometry&&e.geometry.dispose(),e.material instanceof U&&e.material.dispose()),e instanceof Y&&(e.geometry&&e.geometry.dispose(),e.material instanceof U&&e.material.dispose()),e instanceof Re&&(e.line&&e.line.geometry&&e.line.geometry.dispose(),e.line&&e.line.material instanceof U&&e.line.material.dispose(),e.cone&&e.cone.geometry&&e.cone.geometry.dispose(),e.cone&&e.cone.material instanceof U&&e.cone.material.dispose())}),k=[]}async function st(t,e=new p(0,0,0)){const s=new dt({color:new ut(me)}),o=me;e.z=e.z-.035;const r=new p(e.x-.06,e.y,e.z),i=new H().setFromPoints([e,r]),a=new Y(i,s);t.add(a),k.push(a);const f=new p(-1,0,0),l=new Re(f,r,.03,o,.03*.5,.03*.3);t.add(l),k.push(l);const u=new p(e.x,e.y,e.z-.06),m=new H().setFromPoints([e,u]),_=new Y(m,s);t.add(_),k.push(_);const d=new p(0,0,-1),g=new Re(d,u,.03,o,.03*.5,.03*.3);t.add(g),k.push(g);try{const h=await ht(),E=new Ne("x (Bauwerkshauptachse)",{font:h,size:ze,depth:Be,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});E.computeBoundingBox();const w=E.boundingBox;if(w){const X=-(w.max.x-w.min.x)/2,$=-(w.max.y-w.min.y)/2;E.translate(X,$,0)}const T=new Ge({color:me,metalness:.3,roughness:.4}),S=new I(E,T);S.position.set(e.x-.06*1-.05,e.y+.001,e.z-.02),S.rotation.x=-Math.PI/2,S.rotation.z=0,t.add(S),k.push(S);const y=new Ne("y",{font:h,size:ze,depth:Be,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});y.computeBoundingBox();const x=y.boundingBox;if(x){const X=-(x.max.x-x.min.x)/2,$=-(x.max.y-x.min.y)/2;y.translate(X,$,0)}const L=new Ge({color:me,metalness:.3,roughness:.4}),O=new I(y,L);O.position.set(e.x-.02,e.y+.001,e.z-.06*1.1),O.rotation.x=-Math.PI/2,O.rotation.z=0,t.add(O),k.push(O)}catch(h){console.error("Failed to create 3D text for coordinate system:",h)}}async function ot(t){Ce(t);const e=ct(D),n=Fe(e.a,e.b,e.is_streifen,e.c_nom),c=W(),s=new dt({color:16711680});let o=e.c_nom/1e3;e.is_streifen===1&&(o=0);const r=.05,i=e.b/1e3,a=e.a/1e3;if(e.is_streifen===0){const E=(n[1][0]+n[2][0])/2,w=n[1][1],T=(n[1][2]+n[2][2])/2,S=new p(E-r-o,w,T-i/2),y=new p(E-r-o,w,T+i/2),x=new H().setFromPoints([S,y]),L=new Y(x,s);t.add(L),q.push(L);const O=new p().subVectors(y,S).normalize();at(t,S,y,O,s),await nt(t,[S.x,S.y,S.z],[y.x,y.y,y.z],.02,`b = ${e.b} mm`,0,0)}const f=c.centerX,l=n[0][1],u=(n[0][2]+n[1][2])/2,m=new p(f-a/2,l,u-r-o),_=new p(f+a/2,l,u-r-o),d=new H().setFromPoints([m,_]),g=new Y(d,s);t.add(g),q.push(g);const h=new p().subVectors(_,m).normalize();at(t,m,_,h,s),await nt(t,[m.x,m.y,m.z],[_.x,_.y,_.z],-.02,`a = ${e.a} mm`,0,0)}var Gn=Se('<div class="scene-container svelte-5boshl"></div>');function Un(t,e){J(e,!1),G(e,"autoRotate",8,!1);let n;const c=.05,s=.001,o=.04,r=new p(-3.6366326492655574,2.6403115127435544,-1.3328222766488578);let i=B(),a,f,l,u,m,_,d,g,h,E,w,T,S;Gt(async()=>{a=vn(),l=pn(v(i)),xn(),h=yn(a),f=Qt(35),f.position.copy(r),S=D.subscribe(async R=>{if(n=R,a&&d!==void 0){_&&Je(a,_),d&&je(a,d),g&&tt(a,g),Ce(a),rt(a),_=We(a,n,!1),d=Qe(a,n).group,g=et(a,n),await ot(a);const N=W();let oe=Math.max(n.c_nom/1e3,.03);n.is_streifen===1&&(oe=.1);const ie=new p(N.centerX+c+n.a/2e3,N.centerY+s,N.centerZ+o+n.b/2e3+oe);await st(a,ie)}});const x=W(),L=[x.centerX,x.centerY,x.centerZ];u=jt(f,l,L),E=en(l,f,u),w=Sn(v(i)),_=We(a,n,!1),d=Qe(a,n).group,g=et(a,n),await ot(a);let X=n.c_nom/1e3;n.is_streifen===1&&(X=.1);const $=new p(x.centerX+c+n.a/2e3,x.centerY+s+.001,x.centerZ+o+n.b/2e3+X);await st(a,$);const C=1e3/30;let se=0;const z=R=>{T=requestAnimationFrame(z);const P=R-se;if(!(P<C)){if(se=R-P%C,wn(R,f,u),tn(u),h&&f){const N=new p(0,500,500);N.applyQuaternion(f.quaternion),h.position.copy(f.position).add(N),u&&u.target&&(h.target.position.copy(u.target),h.target.updateMatrixWorld())}l.render(a,f)}};if(z(0),await It(),v(i)&&v(i)instanceof Element){let R=!1;m=new ResizeObserver(()=>{v(i)&&l&&f&&!R&&(R=!0,requestAnimationFrame(()=>{if(v(i)&&l&&f){const P=v(i).clientWidth,N=v(i).clientHeight;console.log(`Resizing renderer to ${P}x${N}`),f.aspect=P/N,f.updateProjectionMatrix(),l.setSize(P,N)}R=!1}))}),m.observe(v(i))}console.log("ShearDeformationScene initialized")}),zt(()=>{T!==void 0&&cancelAnimationFrame(T),E&&E(),w&&w(),S&&S(),m&&m.disconnect(),u&&u.dispose(),l&&l.dispose(),_&&a&&Je(a,_),d&&a&&je(a,d),g&&a&&tt(a,g),a&&Ce(a),a&&rt(a),console.log("ShearDeformationScene destroyed")}),j();var y=Gn();nn(y,x=>M(i,x),()=>v(i)),V(t,y),Q()}export{Yn as B,A as I,Fn as L,mt as P,Un as S,kn as a,$n as b,Hn as c,on as d,sn as e,F as l,Me as p,D as s};
