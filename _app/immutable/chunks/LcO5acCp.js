import"./CWj6FrbW.js";import"./CmW2T9GA.js";import{o as ee,k as te}from"./CFNkm3ec.js";import{ai as J,p as ne,e as g,m as oe,ad as re,f as ae,c as se,a as ie,k as ce}from"./BQWep9Y8.js";import{b as de}from"./J3JO2zj9.js";import{i as _e}from"./CcYpNgU6.js";import{p as fe}from"./C8cjOIuW.js";import{S as ue,a as le,W as he,B as we,M as l,P as be,b as G,H as ge,D as Se,G as Z,c as $,d as me,e as ve,f as Me,V as k,g as Re,h as pe,i as Te,j as ye,k as Ee,u as Ae}from"./fPhYkEl_.js";const X={nachw_vert:0,nachw_rotb:0,nachw_schub:0,querz_x:0,querz_y:0};function He(){const{subscribe:e,set:n,update:t}=J(X);return{subscribe:e,set:n,update:t,reset:()=>n(X)}}const Ie=He();function Ge(e){const n=e.a*e.b;let t,s;e.n_b===0||e.is_wirksamgeschlossen===1?(t=n,s=Math.round(n/(2*e.t*(e.a+e.b))*1e3)/1e3):(t=Math.round(n-e.n_b*Math.PI*Math.pow(e.d_b/2,2)),s=Math.round((n-.25*Math.PI*e.n_b*Math.pow(e.t,2))/(2*e.t*(e.a+e.b)+e.t*Math.PI*e.n_b*e.d_b)*1e3)/1e3);const a=e.is_ortbeton===0?10:10/2,o=Math.round(.625/e.a*1e3*10)/10+a,i=e.alpha_a,c=e.alpha_b+o,_=Math.sqrt(Math.pow(i,2)+Math.pow(c,2)),d=Math.min(450*e.t/e.a,48),f=48,h=Math.round(c/d*1e3)/1e3,S=Math.round(_/f*1e3)/1e3,m=Math.round(1e3*e.ff_zd/t*10)/10;let w;s<2.33?w=Math.round((5.3805*s-.6536)*10)/10:w=Math.round((10.635*s-12.89)*10)/10;const R=Math.round(m/w*1e3)/1e3,v=Math.round((e.v_a/e.t+e.ff_x*1e3/(e.gg*t))*100)/100,p=Math.round((e.v_b/e.t+e.ff_y*1e3/(e.gg*t))*100)/100,u=Math.sqrt(Math.pow(v,2)+Math.pow(p,2)),O=Math.round(u/(.6*(e.t-2)/e.t)*1e3)/1e3,A=5,N=5,H=e.c_nom+10;return{aa:n,a_eff:t,s,alpha_b_zus:o,alpha_b_ges:c,alpha_a_ges:i,alpha_ges:_,alpha_bmax:d,alpha_resmax:f,nachw_rotb:h,nachw_rotres:S,sigma_ed:m,sigma_rd:w,nachw_vert:R,tan_gamx:v,tan_gamy:p,tan_gamxy:u,nachw_schub:O,querz_x:A,querz_y:N,c_rand:H}}function xe(e){const n={is_streifen:e.is_streifen,a:e.a,b:e.b,t:e.t,c_nom:e.c_nom,is_dorn:e.is_dorn,d_b:e.d_b,d_d:e.d_d,n_b:e.n_b,ff_zd:e.ff_zd,v_a:e.v_a,v_b:e.v_b,alpha_a:e.alpha_a,alpha_b:e.alpha_b,gg:e.gg,ff_x:e.ff_x,ff_y:e.ff_y,is_ortbeton:e.is_ortbeton,is_wirksamgeschlossen:e.is_wirksamgeschlossen},t=Ge(n);Ie.set({nachw_vert:t.nachw_vert,nachw_rotb:t.nachw_rotb,nachw_schub:t.nachw_schub,querz_x:t.querz_x,querz_y:t.querz_y})}const P={is_streifen:0,a:200,b:200,t:10,c_nom:25,is_dorn:1,d_b:50,d_d:20,n_b:1,ff_zd:800,v_a:0,alpha_b:2,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0,is_wirksamgeschlossen:0};function Oe(){const{subscribe:e,set:n,update:t}=J(P),s={subscribe:e,set:a=>{n(a),z(a)},update:a=>{t(r=>{const o=a(r);return z(o),o})},reset:()=>{n(P),z(P)},updateField:(a,r)=>{s.update(o=>({...o,[a]:r}))}};return s}const Pe=Oe();function z(e){xe(e)}function ze(){const e=new ue;return e.background=new le(16777215),e}function De(e){const n=new he({antialias:!0});return n.setPixelRatio(window.devicePixelRatio),n.shadowMap.enabled=!0,n.shadowMap.type=we,e.appendChild(n.domElement),n}function Ze(e){const n=new l(new be(200,200),new G({color:13355979,specular:4671303}));n.rotation.x=-Math.PI/2,n.position.y=-10,n.receiveShadow=!0}function Ce(e){return e.add(new ge(9272444,4802918,3)),Ne(e,0,500,500,16777215,2)}function Ne(e,n,t,s,a,r){const o=new Se(a,r);o.position.set(n,t,s),o.castShadow=!0;const i=1e3;return o.shadow.camera.left=-1e3,o.shadow.camera.right=i,o.shadow.camera.top=i,o.shadow.camera.bottom=-1e3,o.shadow.camera.near=1,o.shadow.camera.far=2e3,o.shadow.mapSize.width=4096,o.shadow.mapSize.height=4096,o.shadow.radius=1,o.shadow.bias=-5e-4,e.add(o),e.add(o.target),o}const x=-.8,F=1,Le=1,D=2,T=x,j=.55,y=x-j,Be=.5,qe=Be/2,ke=-.5/2,E=D/2,Y=.6,I=.3,V=x-j*.45;function Xe(e){const n=new Z,t=new G({color:12895428,shininess:100,flatShading:!0}),s=x+F/2,a=D/2,r=0,o=new l(new $(F,D,Le),t);o.position.set(s,a,r),o.castShadow=!0,o.receiveShadow=!0,n.add(o);const i=new Float32Array([T,E,-.25,y,E,-.25,y,E,.25,T,E,.25,V,I,.25,T,I,.25,y,Y,.25,y,Y,-.25,V,I,-.25,T,I,-.25]),c=[0,1,2,0,2,3,7,6,2,7,2,1,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,4,5,3,0,3,5,0,5,9,1,7,6,1,6,2,5,4,8,5,8,9,4,6,7,4,7,8],_=new me;_.setAttribute("position",new ve(i,3)),_.setIndex(c),_.computeVertexNormals();const d=new l(_,t);return d.castShadow=!0,d.receiveShadow=!0,n.add(d),e.add(n),n}function C(){return{centerX:(T+y)/2,centerY:E,centerZ:(qe+ke)/2}}function Fe(e,n){n&&(n.traverse(t=>{t instanceof l&&(t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(s=>s.dispose()):t.material.dispose())}),e.remove(n))}const Ye=400,Ve=400,We=10,Ke=.4,Ue=.4,Qe=.02;function W(e,n){const t=new Z,s=new G({color:12895428,shininess:100,specular:2236962}),a=(n.a-Ye)/1e3,r=(n.b-Ve)/1e3,o=(n.t-We)*2/1e3,i=Ke+a,c=Ue+r,_=Qe+o,d=new l(new $(i,_,c),s),f=C();return d.position.set(f.centerX,f.centerY,f.centerZ),d.castShadow=!0,d.receiveShadow=!0,t.add(d),e.add(t),t}function K(e,n){n&&(n.traverse(t=>{t instanceof l&&(t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(s=>s.dispose()):t.material.dispose())}),e.remove(n))}function U(e,n){const t=new Z;if(!n.is_dorn)return e.add(t),t;const s=new G({color:12895428,flatShading:!1}),a=.2,r=n.d_d/2/1e3,o=new l(new Me(r,r,a,16),s),i=C();return o.position.set(i.centerX,i.centerY+a/2,i.centerZ),o.castShadow=!0,o.receiveShadow=!0,t.add(o),e.add(t),t}function Q(e,n){n&&(n.traverse(t=>{t instanceof l&&(t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(s=>s.dispose()):t.material.dispose())}),e.remove(n))}var Je=ae('<div class="scene-container svelte-5boshl"></div>');function st(e,n){ne(n,!1),fe(n,"autoRotate",8,!1);let t;const s=new k(-3.6366326492655574,2.6403115127435544,-1.3328222766488578);let a=oe(),r,o,i,c,_,d,f,h,S,m=!1,w,R,v;ee(async()=>{r=ze(),i=De(g(a)),Ze(),S=Ce(r),o=Re(35),o.position.copy(s);const u=C(),O=[u.centerX,u.centerY,u.centerZ];c=pe(o,i,O),w=Te(i,o,c),d=Xe(r),v=Pe.subscribe(b=>{t=b,r&&f!==void 0&&(f&&K(r,f),h&&Q(r,h),f=W(r,t),h=U(r,t))}),f=W(r,t),h=U(r,t);const A=new l(new ye(.01,16,16),new Ee({color:16711680}));A.position.set(u.centerX,u.centerY,u.centerZ),r.add(A);const H=1e3/30;let L=0;const B=b=>{R=requestAnimationFrame(B);const M=b-L;if(!(M<H)){if(L=b-M%H,Ae(c),S&&o){const q=new k(0,500,500);q.applyQuaternion(o.quaternion),S.position.copy(o.position).add(q),c&&c.target&&(S.target.position.copy(c.target),S.target.updateMatrixWorld())}i.render(r,o)}};B(0),await re(),g(a)&&g(a)instanceof Element&&(_=new ResizeObserver(()=>{if(g(a)&&i&&o){if(m==!0){m=!1;return}const b=g(a).clientWidth,M=g(a).clientHeight;console.log(`Resizing renderer to ${b}x${M}`),o.aspect=b/M,o.updateProjectionMatrix(),i.setSize(b,M),m=!0}}),_.observe(g(a))),console.log("ShearDeformationScene initialized")}),te(()=>{R!==void 0&&cancelAnimationFrame(R),w&&w(),v&&v(),_&&_.disconnect(),c&&c.dispose(),i&&i.dispose(),d&&r&&Fe(r,d),f&&r&&K(r,f),h&&r&&Q(r,h),console.log("ShearDeformationScene destroyed")}),_e();var p=Je();de(p,u=>se(a,u),()=>g(a)),ie(e,p),ce()}export{st as S,Ie as a,z as p,Pe as s};
