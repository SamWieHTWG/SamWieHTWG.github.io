const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DIEg5PVq.js","./DD38FOU2.js","./Cqp8bxVM.js"])))=>i.map(i=>d[i]);
import"./CWj6FrbW.js";import"./L2DJem1u.js";import{C as Se,D as Te,aj as Me,y as P,w as X,ak as Le,al as Re,F as we,P as ee,O as Ne,G as Y,L as Ce,A,I as Ae,av as xe,z as Fe,ax as Pe,aT as Ge,J as Oe,K as He}from"./Cqp8bxVM.js";import{h as ze}from"./DOun34Xx.js";import{i as Ee}from"./BITwWVFN.js";import{p as R,i as De}from"./B2332r9h.js";import{a as ke,s as Be}from"./Dp3UgM57.js";import{F as Ue,N as We,V as x,a as Xe,b as Ke,G as k,B as F,M as G,S as Ie,c as E,C as Ve,d as Ze,e as qe,E as Ye,f as Qe,g as je,h as $e,i as Je,j as et,k as tt,u as at,T as st}from"./D_vzx0tC.js";import{b as nt}from"./BKVNmyoH.js";import{_ as rt}from"./Dp1pzeXC.js";const V={is_voll:1,is_streifen:0,is_punkt:0,f_eigen:8,h:.5,b:4,t:.05,g_a:2,n_gleis:2,is_vollbahn:1,is_regionalbahn:0,is_stadtbahn:0,is_strassenbahn:0,is_user_defined:0,q_v:156,n_streifen:3,b_streifen:.3,n_punkt:2,a_punkt:.1,s_punkt:1};function it(){const{subscribe:a,set:t,update:e}=Se(V),n={subscribe:a,set:s=>{t(s),Z(s)},update:s=>{e(i=>{const o=s(i);return Z(o),o})},reset:()=>{t(V),Z(V)},updateField:(s,i)=>{n.update(o=>({...o,[s]:i}))}};return n}const Q=it();function Z(a){rt(()=>import("./DIEg5PVq.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>{t.calculate(a)})}var ot=we("<!> <!>",1);function Dt(a,t){Te(t,!1);const[e,n]=Be(),s=()=>ke(Q,"$massSpringParameterStore",e);let i=R(t,"field",8),o=R(t,"label",8),l=R(t,"helperText",8,""),_=R(t,"step",8,.1),u=R(t,"disabled",8,!1),r=R(t,"min",8,void 0),c=R(t,"max",8,void 0),d=X(),f=X(!1),p=X(""),h=null;function S(I){let L=I,b=!1,y="";r()!==void 0&&I<r()?(L=r(),b=!0,y=`Minimalwert: ${r()}${l()?" "+l():""}`):c()!==void 0&&I>c()&&(L=c(),b=!0,y=`Maximalwert: ${c()}${l()?" "+l():""}`),b&&(P(f,!0),P(p,y),h&&clearTimeout(h),h=setTimeout(()=>{P(f,!1),P(p,"")},3e3)),Q.updateField(i(),L)}Me(()=>(s(),Le(i())),()=>{P(d,s()[i()])}),Re(),Ee();var T=ot(),m=ee(T);Ue(m,{children:(I,L)=>{var b=Ne(),y=ee(b);ze(y,o),Y(I,b)},$$slots:{default:!0}});var v=Ce(m,2);We(v,{size:"sm",get step(){return _()},get helperText(){return l()},get disabled(){return u()},get min(){return r()},get max(){return c()},light:!0,get invalid(){return A(f)},get invalidText(){return A(p)},get value(){return A(d)},set value(I){P(d,I)},$$events:{change:()=>S(A(d))},$$legacy:!0}),Y(a,T),Ae(),n()}const kt={F_EIGEN_MIN:.1,F_EIGEN_MAX:100,F_EIGEN_STEP:.5,H_MIN:.2,H_MAX:1.5,H_STEP:.05,B_MIN:2,B_MAX:8,B_STEP:.1,T_MIN:.01,T_MAX:.2,T_STEP:.01,G_A_MIN:0,G_A_MAX:100,G_A_STEP:.1,Q_V_MIN:0,Q_V_MAX:300,Q_V_STEP:1,B_STREIFEN_MIN:.1,B_STREIFEN_MAX:1,B_STREIFEN_STEP:.05,A_PUNKT_MIN:.02,A_PUNKT_MAX:.5,A_PUNKT_STEP:.01,S_PUNKT_MIN:.4,S_PUNKT_MAX:2,S_PUNKT_STEP:.1};function lt(a,t,e){if(!a||!t)return;const n=new x;n.subVectors(t.target,a.position),n.normalize();const i=a.position.distanceTo(t.target)*(1-1/e),o=n.clone().multiplyScalar(i);a.position.add(o),t.update()}function ct(a){return()=>{}}function ft(a,t,e){const n=s=>{s.preventDefault();const i=s.deltaY>0?.95:1.05;lt(t,e,i)};return a.domElement.addEventListener("wheel",n,{passive:!1}),()=>{a.domElement.removeEventListener("wheel",n)}}function dt(a){Xe(a,-10)}function ut(a){return Ke(a,{x:0,y:500,z:500})}const M=10,ge=.05,O=.6,_t=.3;function te(a,t,e,n=!1){const s=pt(a,t,e,n),i=ht(a,t,e,n);return{supportPlate:s,carryPlate:i}}function ae(a,t){t&&(se(a,t.supportPlate),se(a,t.carryPlate))}function pt(a,t,e,n=!1){const s=new k,i=t.b*(1+ge),o=_t,l=M,_=new F(i,o,l),u=new G({color:Ie,shininess:100,flatShading:!0,transparent:!1}),r=new E(_,u);r.castShadow=!0,r.receiveShadow=!0,r.position.set(e[0],e[1]-o/2,e[2]+l/2),s.add(r);const c=t.h+o+.1,d=o,f=l,p=l*(1-O),h=new F(d,c,f),S=new F(d,c,p),T=new E(S,u);T.castShadow=!0,T.receiveShadow=!0,T.position.set(e[0]+i/2+d/2,e[1]-o+c/2,e[2]+l*O+1/2*p),s.add(T);const m=new E(h,u);return m.castShadow=!0,m.receiveShadow=!0,m.position.set(e[0]-i/2-d/2,e[1]-o+c/2,e[2]+l/2),s.add(m),a.add(s),s}function mt(a){const t=document.createElement("canvas");t.width=64,t.height=64;const e=t.getContext("2d");e.fillStyle="red",e.beginPath(),e.arc(32,32,28,0,Math.PI*2),e.fill(),e.fillStyle="white",e.font="bold 36px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText(a,32,32);const n=new Ve(t),s=new Ze({map:n}),i=new qe(s);return i.scale.set(.08,.08,1),i}function ht(a,t,e,n=!1){const s=new k,i=t.b,o=t.h,l=M*(1-O),_=new F(i,o,l),u=new G({color:Ie,shininess:100,flatShading:!0,transparent:!1}),r=new E(_,u);return r.castShadow=!0,r.receiveShadow=!0,r.position.set(e[0],e[1]+t.t/100+o/2,e[2]+O*M+l/2),s.add(r),n&&[{pos:new x(e[0]-i/2,e[1]+.1,e[2]),label:"C0"},{pos:new x(e[0]+i/2,e[1]+.1,e[2]),label:"C1"},{pos:new x(e[0]+i/2,e[1]+.1,e[2]+l),label:"C2"},{pos:new x(e[0]-i/2,e[1]+.1,e[2]+l),label:"C3"}].forEach(({pos:d,label:f})=>{const p=mt(f);p.position.copy(d),s.add(p)}),a.add(s),s}function se(a,t){t&&(t.traverse(e=>{e instanceof E&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),a.remove(t))}const H=.05;function ne(a,t,e,n=!1){const s=new k;return t.is_voll===1?St(a,s,t,e):t.is_streifen===1?Tt(a,s,t,e):t.is_punkt===1&&At(a,s,t,e),a.add(s),{elastomer:s}}function re(a,t){!t||!t.elastomer||(t.elastomer.traverse(e=>{e instanceof E&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),a.remove(t.elastomer))}function St(a,t,e,n,s){const i=e.b*(1+ge);let o=e.t/100;o=Math.max(o,.002);const l=M*(1-H),_=new F(i,o,l),u=new G({color:3355443,shininess:50,flatShading:!0,transparent:!1}),r=new E(_,u);r.castShadow=!0,r.receiveShadow=!0,r.position.set(n[0],n[1]+o/2,n[2]+H*M+l/2),t.add(r)}const ie=.6;function ve(a,t,e,n){const s=e-1+2*ie,i=t/s,o=a-t/2,l=i*(ie+(n-1));return o+l}function Tt(a,t,e,n,s){const i=e.n_streifen;if(i<1)return;const o=e.b_streifen,l=e.t/100,_=M*(1-H),u=e.b,r=new G({color:3355443,shininess:50,flatShading:!0,transparent:!1});for(let c=1;c<=i;c++){const d=ve(n[0],u,i,c),f=wt(r,o,l,_,d,n);t.add(f)}}function wt(a,t,e,n,s,i){const o=new F(t,e,n),l=new E(o,a);return l.castShadow=!0,l.receiveShadow=!0,l.position.set(s,i[1]+e/2,i[2]+H*M+n/2),l}function At(a,t,e,n,s){const i=e.n_punkt;if(i<1)return;const o=Math.sqrt(e.a_punkt),l=e.t/100,_=e.b,u=H*M,r=M*(1-H),c=e.s_punkt,d=new G({color:3355443,shininess:50,flatShading:!0,transparent:!1});for(let f=1;f<=i;f++){const p=ve(n[0],_,i,f);let h=0;for(;h+o/2<=r;){const S=n[2]+u+h+o/2,T=new F(o,l,o),m=new E(T,d);if(m.castShadow=!0,m.receiveShadow=!0,m.position.set(p,n[1]+l/2,S),t.add(m),h+=c,c<=0)break}}}const g=.5,oe=g*.14,le=g*.28,ce=g*.04,C=g*.35,fe=g*.04,de=g*.08,B=g*.08,Et=1.5,It=g*.12,q=g*.02,gt=g*.08,ue=g*.025,_e=g*.06,vt=1,U=g*.18;function bt(){const a=new Qe;return a.moveTo(-.14/2,0),a.lineTo(le/2,0),a.lineTo(le/2,fe),a.lineTo(ce/2,de),a.lineTo(ce/2,C-B),a.lineTo(oe/2,C-B),a.lineTo(oe/2,C),a.lineTo(-.07/2,C),a.lineTo(-.07/2,C-B),a.lineTo(-.02/2,C-B),a.lineTo(-.02/2,de),a.lineTo(-.14/2,fe),a}function W(a,t,e,n){const s=new k,i=new F(It,q,gt),o=new E(i,n);o.position.y=q/2,o.castShadow=!0,o.receiveShadow=!0,s.add(o);const l=new je(ue,ue,_e,6),_=new E(l,n);return _.position.y=q+_e/2,_.castShadow=!0,_.receiveShadow=!0,s.add(_),s.position.set(a,t,e),s}function pe(a,t,e,n=!1){const s=new k,i=M*(1-O),o=bt(),l={steps:1,depth:i,bevelEnabled:!1},_=new Ye(o,l);_.center();const u=new G({color:3355443,shininess:80,specular:4473924}),r=Et/2,c=e[1]+t.t/100+t.h+C/2,d=e[2]+O*M+i/2,f=new E(_,u);f.position.set(e[0]-r,c,d),f.castShadow=!0,f.receiveShadow=!0,s.add(f);const p=new E(_,u);p.position.set(e[0]+r,c,d),p.castShadow=!0,p.receiveShadow=!0,s.add(p);const h=new G({color:5592405,shininess:60,specular:3355443}),S=c-C/2,T=d-i/2+.5,m=d+i/2-.5;for(let v=T;v<=m;v+=vt){const I=W(e[0]-r-U,S,v,h);s.add(I);const L=W(e[0]-r+U,S,v,h);s.add(L);const b=W(e[0]+r-U,S,v,h);s.add(b);const y=W(e[0]+r+U,S,v,h);s.add(y)}return a.add(s),{rails:s}}function me(a,t){!t||!t.rails||(t.rails.traverse(e=>{e instanceof E&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),a.remove(t.rails))}function yt(){const{subscribe:a,set:t,update:e}=Se(null);return{subscribe:a,set:t,update:e,saveState:(n,s)=>{t({position:n,target:s})},clear:()=>t(null)}}const he=yt();var Mt=we('<div class="scene-container svelte-7vnivq"><!></div>');function Bt(a,t){Te(t,!1),R(t,"autoRotate",8,!1);let e=R(t,"showTooltip",8,!0),n;const s=[0,2,0],i=O*M/2,o=new x(s[0],s[1],s[2]+i),l=10,_=new x(s[0]+l,s[1]+l,s[2]-l);let u=X(),r,c,d,f,p,h,S,T,m,v,I,L,b;xe(async()=>{r=$e(),d=Je(A(u)),dt(r),h=ut(r),c=et(35);const w=Fe(he);w?c.position.set(w.position.x,w.position.y,w.position.z):c.position.copy(_),b=Q.subscribe(async N=>{n=N,r&&S!==void 0&&(S&&ae(r,S),T&&re(r,T),m&&me(r,m),S=te(r,n,s,!1),T=ne(r,n,s,!1),m=pe(r,n,s,!1))});let K;w?K=[w.target.x,w.target.y,w.target.z]:K=[o.x,o.y,o.z],f=tt(c,d,K),v=ft(d,c,f),I=ct(A(u)),S=te(r,n,s,!1),T=ne(r,n,s,!1),m=pe(r,n,s,!1);const j=1e3/30;let $=0;const J=N=>{L=requestAnimationFrame(J);const z=N-$;if(!(z<j)){if($=N-z%j,at(f),h&&c){const D=new x(0,500,500);D.applyQuaternion(c.quaternion),h.position.copy(c.position).add(D),f&&f.target&&(h.target.position.copy(f.target),h.target.updateMatrixWorld())}d.render(r,c)}};if(J(0),await Pe(),A(u)&&A(u)instanceof Element){let N=!1;p=new ResizeObserver(()=>{A(u)&&d&&c&&!N&&(N=!0,requestAnimationFrame(()=>{if(A(u)&&d&&c){const z=A(u).clientWidth,D=A(u).clientHeight;c.aspect=z/D,c.updateProjectionMatrix(),d.setSize(z,D)}N=!1}))}),p.observe(A(u))}}),Ge(()=>{c&&f&&f.target&&he.saveState({x:c.position.x,y:c.position.y,z:c.position.z},{x:f.target.x,y:f.target.y,z:f.target.z}),L!==void 0&&cancelAnimationFrame(L),v&&v(),I&&I(),b&&b(),p&&p.disconnect(),f&&f.dispose(),d&&d.dispose(),S&&r&&ae(r,S),T&&r&&re(r,T),m&&r&&me(r,m)}),Ee();var y=Mt(),be=Oe(y);{var ye=w=>{st(w,{rightOffset:0})};De(be,w=>{e()&&w(ye)})}He(y),nt(y,w=>P(u,w),()=>A(u)),Y(a,y),Ae()}export{kt as I,Bt as M,Dt as P,Q as m,Z as p};
