import"./CWj6FrbW.js";import{k as z,o as O,t as W,y as e,aI as g,x as I,w as E,m as N,ai as oe,a2 as ue,v as Q,af as M,ah as L,ag as k,ae as pe,K as me,ac as ge,an as fe,z as ve,ap as he,B as $e}from"./Cl0ug4r9.js";import{a as Z,s as K,p as J,i as be}from"./Cxv2QNzF.js";import{p as B,r as _e,g as Se,a as Te,b as xe,T as ye,I as Be,c as we,d as Ee,e as ie,f as Ce,h as Re,i as Pe,j as Ie,s as Fe,k as Ae,l as Ge,C as Le,m as Me,u as ke,n as De,o as Oe,q as Ve,t as te,v as ze}from"./C9JtWcFq.js";import{t as b}from"./CIK7bzKS.js";import"./C8BMgICZ.js";import"./MyNhdvZg.js";import"./CMaaihqG.js";import{S as X,a as D,b as We}from"./D5cFTiN_.js";import{e as le,i as ce}from"./B91Js1gk.js";import{onMount as Ne,onDestroy as je}from"./Jl7__Md-.js";import{b as qe}from"./C8OeErWx.js";import{i as He}from"./DRnR6aa5.js";import{G as de,T as Ue,k as re,l as Ye,m as Ze,n as Ke,o as Xe,M as Y,h as Je,p as Qe,c as et}from"./C5QbS7GW.js";import{B as tt}from"./CdjK7HTG.js";var rt=O("<!> <!>",1);function Et(m,f){z(f,!0);const[_,$]=Z();let o=g(()=>K(B,"$parameterStore",_));function s(r){var c;const p=(r.detail||((c=r.target)==null?void 0:c.value))==="rund";B.updateField("isRound",p)}const u=g(()=>b("bridgeBearing.bearingShape")),l=g(()=>e(o).isRound?"rund":"rechteckig");X(m,{get labelText(){return e(u)},get selected(){return e(l)},light:!0,$$events:{change:s},children:(r,t)=>{var p=rt(),c=W(p);const n=g(()=>b("bridgeBearing.rectangular"));D(c,{value:"rechteckig",get text(){return e(n)}});var a=I(c,2);const d=g(()=>b("bridgeBearing.round"));D(a,{value:"rund",get text(){return e(d)}}),E(r,p)},$$slots:{default:!0}}),N(),$()}function Ct(m,f){z(f,!0);const[_,$]=Z();let o=g(()=>K(B,"$parameterStore",_)),s=g(Se),u=g(()=>_e.map(n=>n.diameter)),l=g(()=>e(o).isRound?e(u).findIndex(n=>n===e(o).d):e(s).findIndex(n=>n.length===e(o).a&&n.width===e(o).b)),r=g(()=>e(o).isRound?e(u).map((n,a)=>({value:a,label:`${n} mm`})):e(s).map((n,a)=>({value:a,label:`${n.length} mm x ${n.width} mm`})));function t(n){var d;const a=parseInt(((d=n.target)==null?void 0:d.value)||n.detail);if(e(o).isRound){const i=e(u)[a];i&&B.updateField("d",i)}else{const i=e(s)[a];i&&(B.updateField("a",i.length),B.updateField("b",i.width))}}const p=g(()=>e(o).isRound?b("bridgeBearing.dimensionsDiameter"):b("bridgeBearing.dimensionsLengthWidth")),c=g(()=>e(l).toString());X(m,{get labelText(){return e(p)},get selected(){return e(c)},light:!0,$$events:{change:t},children:(n,a)=>{var d=oe(),i=W(d);le(i,17,()=>e(r),ce,(h,T)=>{const x=g(()=>e(T).value.toString());D(h,{get value(){return e(x)},get text(){return e(T).label}})}),E(n,d)},$$slots:{default:!0}}),N(),$()}function Rt(m,f){z(f,!0);const[_,$]=Z();let o=g(()=>K(B,"$parameterStore",_)),s=g(()=>e(o).isRound?Te(e(o).d).map(t=>({value:`${t.n}-${t.t_1}`,label:`${b("bridgeBearing.layerCount")} ${t.n}, ${b("bridgeBearing.layerHeight")} ${t.t_1}mm`,n:t.n,t_1:t.t_1})):xe(e(o).a,e(o).b).map(t=>({value:`${t.n}-${t.t_1}`,label:`${b("bridgeBearing.layerCount")} ${t.n}, ${b("bridgeBearing.layerHeight")} ${t.t_1}mm`,n:t.n,t_1:t.t_1})));ue(()=>{const t=`${e(o).n}-${e(o).t_1}`;if(!e(s).some(c=>c.value===t)&&e(s).length>0){const c=e(s)[0];B.update(n=>({...n,n:c.n,t_1:c.t_1}))}});function u(t){var i;const p=((i=t.target)==null?void 0:i.value)||t.detail,[c,n]=p.split("-"),a=parseInt(c),d=parseFloat(n);B.update(h=>({...h,n:a,t_1:d}))}const l=g(()=>b("bridgeBearing.elastomerLayers")),r=g(()=>`${e(o).n}-${e(o).t_1}`);X(m,{get labelText(){return e(l)},get selected(){return e(r)},light:!0,$$events:{change:u},children:(t,p)=>{var c=oe(),n=W(c);le(n,17,()=>e(s),ce,(a,d)=>{const i=g(()=>e(d).value.toString());D(a,{get value(){return e(i)},get text(){return e(d).label}})}),E(t,c)},$$slots:{default:!0}}),N(),$()}var at=O('<span slot="tooltipText"> <br/> <br/> <br/> <br/> <br/> <br/> </span>'),nt=O("<!> <!>",1),st=O('<div class="select-with-tooltip svelte-17kum7t"><div class="label-container svelte-17kum7t"><span class="label-text svelte-17kum7t"> </span> <!></div> <div style="margin-top: calc(-1 * var(--cds-spacing-03));"></div> <!></div>');function Pt(m,f){z(f,!0);const[_,$]=Z();let o=g(()=>K(B,"$parameterStore",_));function s(a){var h;const i=(a.detail||((h=a.target)==null?void 0:h.value))==="Typ C"?"C":"B";B.updateField("l_typ",i)}var u=st(),l=M(u),r=M(l),t=M(r,!0);k(r);var p=I(r,2);ye(p,{get icon(){return Be},$$slots:{tooltipText:(a,d)=>{var i=at(),h=M(i,!0),T=I(h,4),x=I(T,4),F=I(x,4);k(i),Q((G,C,R,j)=>{L(h,G),L(T,` ${C??""}`),L(x,` ${R??""}`),L(F,` ${j??""}`)},[()=>b("bridgeBearing.typeBTooltip"),()=>b("bridgeBearing.typeCTooltip"),()=>b("bridgeBearing.typeCRequired"),()=>b("bridgeBearing.typeB_DBRestriction")]),E(a,i)}}}),k(l);var c=I(l,4);const n=g(()=>e(o).l_typ==="C"?"Typ C":"Typ B");X(c,{labelText:"",get selected(){return e(n)},light:!0,$$events:{change:s},children:(a,d)=>{var i=nt(),h=W(i);const T=g(()=>b("bridgeBearing.typeB"));D(h,{value:"Typ B",get text(){return e(T)}});var x=I(h,2);const F=g(()=>b("bridgeBearing.typeC"));D(x,{value:"Typ C",get text(){return e(F)}}),E(a,i)},$$slots:{default:!0}}),k(u),Q(a=>L(t,a),[()=>b("bridgeBearing.bearingType")]),E(m,u),N(),$()}function ot(m,f=14211288){const _=new de,S=new Ue().load("/texture/concrete1.jpg");S.wrapS=re,S.wrapT=re,S.repeat.set(1,1),S.colorSpace=Ye;const o=new Ze({map:S,color:f,metalness:.1,roughness:.8}),l=(m.isRound?m.diameter||400:m.breiteElastomer)/1e3*2+.5,r=l,t=2,p=l,c=.05,n=16,a=new Ke;a.moveTo(0,0),a.lineTo(r,0),a.lineTo(r,t),a.lineTo(c*2,t),a.absarc(c,t,c,0,Math.PI,!0),a.lineTo(0,0);const d={depth:p,bevelEnabled:!1,curveSegments:n},i=new Xe(a,d),h=new Y(i,o);h.position.set(.3-r/2,-.4-t/2,-p/2),_.add(h);const T=.3,x=2.5,F=p,G=new Je(T,x,F),C=new Y(G,o),R=.3-r/2-T/2;return C.position.set(R,-.15,0),_.add(C),_}function it(m){we(m,-20)}function lt(m){Ee(m,{x:0,y:500,z:0})}let ae=[];function ne(m){ae.forEach(f=>{m.remove(f),f.geometry.dispose(),f.material instanceof Qe&&f.material.dispose()}),ae=[]}function ct(){const{subscribe:m,set:f,update:_}=pe({renderer:null,camera:null,controls:null,scene:null,reloadTrigger:0});return{subscribe:m,setScene:$=>{_(S=>({...S,...$}))},reset:()=>{_($=>({renderer:null,camera:null,controls:null,scene:null,reloadTrigger:$.reloadTrigger}))},reload:()=>{_($=>({...$,reloadTrigger:$.reloadTrigger+1}))},captureScreenshot:async($=!1)=>new Promise((S,o)=>{const s={renderer:null,camera:null,controls:null,scene:null,reloadTrigger:0};if(m(r=>{s.renderer=r.renderer,s.camera=r.camera,s.controls=r.controls,s.scene=r.scene,s.reloadTrigger=r.reloadTrigger})(),!s.renderer||!s.camera||!s.scene){o(new Error("Scene not initialized"));return}const l=()=>{if(!s.renderer||!s.camera||!s.scene){o(new Error("Scene not initialized"));return}s.renderer.render(s.scene,s.camera);const r=s.renderer.domElement.toDataURL("image/png");S(r)};$?(ie(),setTimeout(l,1200)):l()})}}const se=ct();var dt=O('<!> <div class="top-view-button-container svelte-51mmbc"><!></div>',1),ut=O('<div id="container" class="svelte-51mmbc"><!></div>');function It(m,f){z(f,!1);let _=J(f,"parameters",8,void 0),$=J(f,"autoRotate",8,!1),S=J(f,"showTooltip",8,!0);const o=[.3,.6,0],s=new et(3.033053660420776,2.3737696385820284,-.9540866817375618);let u=me(),l,r,t,p,c,n,a,d,i,h,T,x;function F(){return Oe(Ve)}function G(v){d&&(l.remove(d),d.traverse(y=>{y instanceof Y&&(y.geometry.dispose(),Array.isArray(y.material)?y.material.forEach(A=>A.dispose()):y.material.dispose())}),d=void 0),d=ot({breiteElastomer:v.breiteElastomer,isRound:v.isRound,diameter:v.diameter}),l.add(d)}function C(v){if(!c||!n){console.warn("CreateElastomer or elastomerGroup not initialized");return}n.clear(),c.updateElastomer(v,o).forEach(A=>{n.add(A)}),ne(l),G(v)}Ne(async()=>{l=Ce(),t=Re(e(u)),it(l),lt(l),r=Pe(35),r.position.copy(s),p=Ie(r,t,o),se.setScene({renderer:t,camera:r,controls:p,scene:l}),i=Fe(t,r,p),h=Ae(e(u),p,$()),T=Ge(e(u)),c=new Le(l,r),n=new de,l.add(n);const v=_()||F();c.createElastomer(v,o).forEach(w=>{n.add(w)}),G(v);const V=1e3/30;let q=0;const H=w=>{x=requestAnimationFrame(H);const P=w-q;P<V||(q=w-P%V,Me(w,r,p),ke(p),t.render(l,r))};if(H(0),te(C),await ge(),e(u)&&e(u)instanceof Element){let w=!1;a=new ResizeObserver(()=>{e(u)&&t&&r&&!w&&(w=!0,requestAnimationFrame(()=>{if(e(u)&&t&&r){const P=e(u).clientWidth,U=e(u).clientHeight;t.setSize(P,U),r.aspect=P/U,r.updateProjectionMatrix()}w=!1}))}),a.observe(e(u))}}),je(()=>{se.reset(),x!==void 0&&cancelAnimationFrame(x),t&&De(t),i==null||i(),h==null||h(),T==null||T(),ne(l),d&&(l.remove(d),d.traverse(v=>{v instanceof Y&&(v.geometry.dispose(),Array.isArray(v.material)?v.material.forEach(y=>y.dispose()):v.material.dispose())}),d=void 0),t==null||t.dispose(),te(()=>{}),a==null||a.disconnect()}),He();var R=ut(),j=M(R);{var ee=v=>{var y=dt(),A=W(y);ze(A,{});var V=I(A,2),q=M(V);tt(q,{size:"small",kind:"secondary",$$events:{click:()=>ie()},children:(H,w)=>{ve();var P=he();Q(U=>L(P,U),[()=>b("bridgeBearing.scene.topView")],$e),E(H,P)},$$slots:{default:!0}}),k(V),E(v,y)};be(j,v=>{S()&&v(ee)})}return k(R),qe(R,v=>fe(u,v),()=>e(u)),E(m,R),We(f,"updateElastomer",C),N({updateElastomer:C})}export{Et as B,It as T,Ct as a,Rt as b,Pt as c,se as s};
