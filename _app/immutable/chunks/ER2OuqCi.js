import{i as yt,u as Lt,r as Nt,h as It,j as fe,av as ce,aw as ve,m as F,o as Y,w as W,t as Ae,v as O,x as w,K as D,a7 as M,l as me,A as ue,y as de,at as Gt,a2 as et,a3 as tt,au as Rt}from"./DWVv_u9a.js";import{q as Dt,w as Te,g as xe,s as ye,o as zt,b as Pt}from"./CkwD3qvB.js";import"./CWj6FrbW.js";import"./Q70rhWr8.js";import{t as z,i as _e}from"./BiNRdLX7.js";import{p as re,a as Le,s as Ne,i as $t}from"./y3Aq9u9Y.js";import"./BI35jmbT.js";import"./DLKPkES9.js";import{E as Ct,P as pe,J as St,K as He,O as Bt,L as Ve,M as Ze,G as kt,Q as Ot,H as Xt,R as Ft,U as Ut,z as Ie,F as Ge,N as Re,c as Ht,V as Vt,W as Zt,f as Yt,h as Wt,i as Kt,j as jt,u as qt,v as Jt,B as Qt}from"./4jF0Svuz.js";import{f as De}from"./DR8CTt4r.js";import{b as er}from"./B8wEYcMW.js";import{G as je,T as tr,k as rt,l as rr,m as nr,B as te,z as nt,M as X,F as or,r as ar,s as sr,t as ir,c as v,g as bt,i as le,a as lr,A as ot,P as cr,D as ur,I as fr,f as wt,J as mr,K as dr,X as _r,q as hr,n as gr,Y as pr,o as Er,h as Sr}from"./C5QbS7GW.js";function _n(e,t,r=t){var o=yt();Dt(e,"input",n=>{var i=n?e.defaultValue:e.value;if(i=Pe(e)?$e(i):i,r(i),o&&i!==(i=t())){var l=e.selectionStart,c=e.selectionEnd;e.value=i??"",c!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(c,e.value.length))}}),(It&&e.defaultValue!==e.value||Lt(t)==null&&e.value)&&r(Pe(e)?$e(e.value):e.value),Nt(()=>{var n=t();Pe(e)&&n===$e(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Pe(e){var t=e.type;return t==="number"||t==="range"}function $e(e){return e===""?null:+e}const Ce=(e,t,r)=>{if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];const o=t.findIndex(n=>n>=e)-1;return r[o]+(r[o+1]-r[o])*((e-t[o])/(t[o+1]-t[o]))},br={s_65:{hersteller_name:"Calenberg Ingenieure",product_name:"Compactlager S 65",check:(e,t)=>(e>=70||t>=100&&e>=50)&&t>=70,thicknesses:e=>[10,15,20,25,30].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=6.25?4.03*Math.pow(e,1.16):33.9,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},s_70:{hersteller_name:"Calenberg Ingenieure",product_name:"Compactlager S 70",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=5?6.99*e:34.95,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},esz_100:{hersteller_name:"ESZ Wilfried Becker",product_name:"Typ 200",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20,25,30].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<2.33?5.3805*e-.6536:e<=2.5?10.635*e-12.89:e<=5?8.4004*e-7.3293:34.7,rot_b_rule:(e,t)=>Math.min(450*e/t,48),rot_res_rule:48,bohr_rule:!0,"Nachweis erfolgreich t":[]},esz_100_comp:{hersteller_name:"ESZ Wilfried Becker",product_name:"Typ 200 Composite",check:(e,t)=>e>=90&&e<=600&&t>=90&&t<=600,thicknesses:[15,30,35,40,45,50,55,60,65],sigma_rd_rule:e=>e<=3.75?17.17*e-11.32:e<=4?35.94*e-81.67:e<=4.5?1.17*e+57.39:62.6,rot_b_rule:(e,t)=>Math.min(300*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},flaechenloch_typ_z:{hersteller_name:"Calenberg Ingenieure",product_name:"Fl채chenlochlager Typ Z",check:(e,t)=>e>=120&&e<=600&&t>=120&&t<=600,thicknesses:[15,24,33,42,51],sigma_rd_rule:e=>35,rot_b_rule:(e,t)=>e===15?Math.min(200*e/t,40):Math.min(350*e/t,43),rot_res_rule:e=>e===15?40:43,bohr_rule:!0,"Nachweis erfolgreich t":[]},conti_60:{hersteller_name:"Continental (ContiTech)",product_name:"Contitan 60",check:(e,t)=>e>=70&&t>=70,thicknesses:[10,20,30],sigma_rd_rule:e=>e<=5?.315*Math.pow(e,2)+4.035*e:28.05,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},leschu_n15:{hersteller_name:"Leschuplast GLT",product_name:"Typ N15",check:(e,t)=>e>=70&&t>=70,thicknesses:[10,15,20],sigma_rd_rule:e=>e<1.88?3.29*e+1.46:e<2.5?2.58*e+2.79:e<3.5?3.34*e+.88:e<3.75?12.21*e-30.17:e<5?3.15*e+3.81:e<=10?1.66*e+11.29:27.89,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_3000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 3000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Ce(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[2.4,2.4,4.4,5.74,6.88,7.58,8.01,8.29,8.47,8.59,8.68,8.75,8.8]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_6000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 6000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Ce(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[5,5,9.16,11.82,14.23,15.72,16.64,17.23,17.62,17.89,18.09,18.23,18.33]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_12000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 12000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Ce(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[5.76,5.76,12.72,20.9,30.28,40.88,52.68,52.68,52.68,52.68,52.68,52.68,52.68]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},isoldyn_3000:{hersteller_name:"HBT-ISOL",product_name:"ISOLDYN 3000",check:(e,t)=>(e>=70||e>=50)&&t>=100,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>e<=6?3.96*Math.pow(e,.36):7.55,rot_b_rule:(e,t)=>Math.min(300*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},matteco_elr08:{hersteller_name:"matteco",product_name:"ELR 8",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=4.17?.422*Math.exp(.698*e):7.75,rot_b_rule:(e,t)=>Math.min(200*e/t,16),rot_res_rule:16,bohr_rule:!0,"Nachweis erfolgreich t":[]},matteco_elr18:{hersteller_name:"matteco",product_name:"ELR 18",check:(e,t)=>e>=70&&t>=70,thicknesses:[10],sigma_rd_rule:e=>e<=4.5?1.28*Math.pow(e,1.25):8.4,rot_b_rule:(e,t)=>Math.min(200*e/t,20),rot_res_rule:20,bohr_rule:!0,"Nachweis erfolgreich t":[]}};function wr(e){const{is_ortbeton:t,a:r,b:o,is_dorn:n,is_wirksamgeschlossen:i,d_b:l,n_b:c,ff_zd:s,v_x:a,alpha_y:m,c_nom:f,is_streifen:u}=e,g=r*o;let p;if(n===0)p=g;else{p=Math.round(g-c*Math.PI*(l/2)**2);const P=Math.round((1-p/g)*100)/100;P>.1&&console.warn(`Bohrungsfl채che 체berschreitet 10% der Lagerfl채che! ratio_bohr=${P}`)}const h=Math.round(1e3*s/p*10)/10,_=10;let d=Math.round(.625/r*1e3*10)/10;t===0&&(d*=.5);const E=d+_,S=m+E,x=r+(f+10)+25;let I;u===0&&(I=o+2*(f+10));const A=[];for(const[P,N]of Object.entries(br))if(N.check(r,o)){const K=typeof N.thicknesses=="function"?N.thicknesses(r):N.thicknesses;for(const L of K){let $;!n||i?$=Math.round(g/(2*L*(r+o))*1e3)/1e3:$=Math.round((g-.25*Math.PI*c*L**2)/(2*L*(r+o)+L*Math.PI*c*l)*1e3)/1e3;const U=N.sigma_rd_rule($),B=N.rot_b_rule(L,r),k=N.rot_res_rule,H=.6*(L-2),j=h/U,G=a/H,V=S/B,R=Math.round(1.5*h*o*L/1e3*1e3)/1e3,he=Math.round(1.5*h*r*L/1e3*1e3)/1e3,ge=n?N.bohr_rule:!0,xt=j<=1&&G<=1&&V<=1&&ge;A.push({lagerType:P,manufacturer:N.hersteller_name,productName:N.product_name,thickness:L,s:$,sigma_rd:U,alpha_y_max:B,alpha_y_ges:S,alpha_res_max:k,v_x_max:H,sigma_nachw:j,v_x_nachw:G,rot_b_nachw:V,querzug_x:R,querzug_y:he,passed:xt,bohr_nachw:ge,l_xmin:x,l_ymin:I,bohr_rule:N.bohr_rule})}}return A}const Mr=Te([]),vr=Te(null),ae=0,ee=-.8,se=-.8,at=(ee+se)/2,Ee=.2,Se=ee,be=2,we=.25,Mt=.08,Ar=[[ee,1,-0],[se,1,-0],[se,1,ae],[ee,1,ae],[at,.3,ae],[ee,.3,ae],[se,.6,ae],[se,.6,-0],[at,.3,-0],[ee,.3,-0],[Se,0,we],[Se,be,we],[Se,be,-.25],[Se,0,-.25],[Ee,be,-.25],[Ee,0,-.25],[Ee,be,we],[Ee,0,we]],Tr=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],xr=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function qe(e,t,r=0,o=25){const n=Ar.map(s=>[s[0],s[1],s[2]]),i=o/1e3+.01,l=e/1e3;let c=t/2/1e3;return r||(c+=i),[1,2,6,7].forEach(s=>{n[s][0]-=l+Mt+i}),[4,8].forEach(s=>{n[s][0]-=-.1}),[0,1,7,8,9].forEach(s=>{n[s][2]-=c}),[2,3,4,5,6].forEach(s=>{n[s][2]+=c}),r?([12,13,14,15].forEach(s=>{n[s][2]=-t/2/1e3}),[10,11,16,17].forEach(s=>{n[s][2]=t/2/1e3})):([12,13,14,15].forEach(s=>{n[s][2]-=c}),[10,11,16,17].forEach(s=>{n[s][2]+=c})),n}function st(e,t=1){e.computeVertexNormals();const r=e.attributes.position,o=e.attributes.normal,n=[],i=r.count;for(let l=0;l<i;l++){const c=r.getX(l),s=r.getY(l),a=r.getZ(l),m=Math.abs(o.getX(l)),f=Math.abs(o.getY(l)),u=Math.abs(o.getZ(l));m>=f&&m>=u?n.push(a*t,s*t):f>=m&&f>=u?n.push(c*t,a*t):n.push(c*t,s*t)}e.setAttribute("uv",new or(n,2))}function yr(e){const t=document.createElement("canvas");t.width=64,t.height=64;const r=t.getContext("2d");r.fillStyle="red",r.beginPath(),r.arc(32,32,28,0,Math.PI*2),r.fill(),r.fillStyle="white",r.font="bold 36px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(e,32,32);const o=new ar(t),n=new sr({map:o}),i=new ir(n);return i.scale.set(.08,.08,1),i}function it(e,t,r=!1){const o=new je,n=t.a,i=t.b,l=t.is_streifen,c=t.c_nom,a=new tr().load("/texture/concrete1.jpg");a.wrapS=rt,a.wrapT=rt,a.repeat.set(1,1),a.colorSpace=rr;const m=new nr({map:a,color:Ct,roughness:.9,metalness:0,flatShading:!1}),f=qe(n,i,l,c),u=new Float32Array(f.flat());let g=new te;g.setAttribute("position",new nt(u,3)),g.setIndex(Tr),g=g.toNonIndexed(),st(g,1);const p=new X(g,m);p.castShadow=!0,p.receiveShadow=!0,o.add(p);let h=new te;h.setAttribute("position",new nt(u,3)),h.setIndex(xr),h=h.toNonIndexed(),st(h,1);const _=new X(h,m);return _.castShadow=!0,_.receiveShadow=!0,o.add(_),r&&f.forEach((d,E)=>{const S=yr(E.toString());S.position.set(d[0],d[1],d[2]),o.add(S)}),e.add(o),o}function oe(e){const t=e||xe(C);console.log("getHorizontalSurfaceInfo - using params:",{a:t.a,b:t.b,is_streifen:t.is_streifen,source:e?"provided":"store"});const r=qe(t.a,t.b,t.is_streifen,t.c_nom),o=[r[0],r[1],r[2],r[3]],i={centerX:-t.a/2/1e3-Mt+ee,centerY:o[0][1],centerZ:(o[0][2]+o[1][2]+o[2][2]+o[3][2])/4};return console.log("getHorizontalSurfaceInfo - calculated center:",i),i}function lt(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(o=>o.dispose()):r.material.dispose())}),e.remove(t))}let J=[],Z=[];function Lr(){return[...J,...Z]}let Me=null,Je=0;const Ye=Bt;async function Be(e,t,r,o,n,i=0,l=0,c=!1){try{const s=await St(),a=He(n,s,Ye);Ve(a);const m=Ze(16711680),f=new X(a,m),u=new v(r[0]-t[0],0,r[2]-t[2]).normalize(),g=new v(-u.z,0,u.x),p=(t[0]+r[0])/2+i+g.x*o,h=(t[2]+r[2])/2+l+g.z*o;f.position.set(p,t[1]+.001,h),f.rotation.x=-Math.PI/2;const _=Math.atan2(u.z,u.x)+Math.PI;f.rotation.z=_,c&&(Me=f,Je=_),e.add(f),J.push(f)}catch(s){console.error("Failed to load font for 3D text:",s)}}function We(e){if(Me){const t=e?Math.PI:0;Me.rotation.z=Je+t}}function ke(e,t,r,o,n,i=.05){Xt(e,t,r,o,n,i,J)}function Ke(e){J=kt(e,J),Me=null,Je=0}function ct(e){Z=Ot(e,Z)}async function ut(e,t=new v(0,0,0)){const n=new bt({color:new lr(pe)}),i=pe;t.z=t.z-.035;const l=new v(t.x-.06,t.y,t.z),c=new te().setFromPoints([t,l]),s=new le(c,n);e.add(s),Z.push(s);const a=new v(-1,0,0),m=new ot(a,l,.03,i,.03*.5,.03*.3);e.add(m),Z.push(m);const f=new v(t.x,t.y,t.z-.06),u=new te().setFromPoints([t,f]),g=new le(u,n);e.add(g),Z.push(g);const p=new v(0,0,-1),h=new ot(p,f,.03,i,.03*.5,.03*.3);e.add(h),Z.push(h);try{const _=await St(),d=He(z("shearDeformation.scene.axisLabel.x"),_,Ye);Ve(d);const E=Ze(pe),S=new X(d,E);S.position.set(t.x-.06*1-.05,t.y+.001,t.z-.02),S.rotation.x=-Math.PI/2,S.rotation.z=0,e.add(S),Z.push(S);const x=He("y",_,Ye);Ve(x);const I=Ze(pe),A=new X(x,I);A.position.set(t.x-.02,t.y+.001,t.z-.06*1.1),A.rotation.x=-Math.PI/2,A.rotation.z=0,e.add(A),Z.push(A)}catch(_){console.error("Failed to create 3D text for coordinate system:",_)}}async function ft(e){Ke(e);const t=xe(C),r=qe(t.a,t.b,t.is_streifen,t.c_nom),o=oe(),n=new bt({color:16711680});let i=t.c_nom/1e3+.01;t.is_streifen===1&&(i=0);const l=.01,c=t.b/1e3,s=t.a/1e3;if(t.is_streifen===0){const L=(r[1][0]+r[2][0])/2,$=r[1][1],U=(r[1][2]+r[2][2])/2,B=new v(L-l-i,$,U-c/2),k=new v(L-l-i,$,U+c/2),H=new te().setFromPoints([B,k]),j=new le(H,n);e.add(j),J.push(j);const G=new v().subVectors(k,B).normalize();ke(e,B,k,G,n),await Be(e,[B.x,B.y,B.z],[k.x,k.y,k.z],.02,`b = ${t.b} mm`,0,0)}const a=o.centerX,m=r[0][1],f=(r[0][2]+r[1][2])/2,u=new v(a-s/2,m,f-l-i),g=new v(a+s/2,m,f-l-i),p=new te().setFromPoints([u,g]),h=new le(p,n);e.add(h),J.push(h);const _=new v().subVectors(g,u).normalize();ke(e,u,g,_,n),await Be(e,[u.x,u.y,u.z],[g.x,g.y,g.z],-.02,`a = ${t.a} mm`,0,0,!0);const d=.04,E=o.centerX-t.a/2e3,S=o.centerY,x=o.centerZ+t.b/2e3+d+i,I=t.c_nom/1e3+.01,A=new v(E,S,x),P=new v(E-I,S,x),N=new te().setFromPoints([A,P]),y=new le(N,n);e.add(y),J.push(y);const K=new v().subVectors(P,A).normalize();ke(e,A,P,K,n),await Be(e,[A.x,A.y,A.z],[P.x,P.y,P.z],-.05,"cnom + 100 mm",0,0)}let Oe=null,Xe=null,T=null;function Nr(e,t,r){if(!e||!t)return;const o=new v;o.subVectors(t.target,e.position),o.normalize();const i=e.position.distanceTo(t.target)*(1-r),l=o.clone().multiplyScalar(i);e.position.add(l),t.update()}function vt(e){const t=e||xe(C),r=(t.b+300)/1e3;return console.log("Camera radius calculation - params.b:",t.b,"scaleFactor:",r),r}function Qe(){const e=ze(),t=vt();console.log("Initializing automatic camera - radius:",t);const r={radius:t,polarAngle:Math.PI/3,azimuthStart:0,azimuthEnd:-Math.PI,focusPoint:e};T=new Ft(r)}function ze(e){const t=oe(e),r=new v(t.centerX,t.centerY,t.centerZ);return console.log("getTargetCenter called - surfaceInfo:",t),r}let q=null,Q=!1,ne=null,ie=0;const mt=1e3;function Ir(e){console.log("regenerateCameraWaypoints called with params:",e),q=null,Q=!1,ne=null;const t=ze(e);if(console.log("Focus point (center):",t.x,t.y,t.z),T||(console.log("Automatic camera not initialized, initializing now"),Qe()),T){const r=vt(e);console.log("Updating camera config - radius:",r,"final radius (x2):",r*2,"focusPoint:",t),T.updateConfig({radius:r*2,focusPoint:t})}}function Gr(){const e=ze(),t=xe(C),r=Lr();if(r.length===0){const a=Math.max(t.a,t.b)/1e3*3;return new v(e.x,e.y+a,e.z)}let n=Math.max(t.a,t.b)/1e3*2;const i=20;let l=0;const c=new cr(35,1,.01,1e3);for(;l<i;){c.position.set(e.x,e.y+n,e.z),c.lookAt(e),c.updateMatrixWorld(),c.updateProjectionMatrix();const s=new ur,a=new fr;a.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),s.setFromProjectionMatrix(a);let m=!0;for(const f of r){f.updateMatrixWorld(!0);const u=new wt().setFromObject(f);if(!s.intersectsBox(u)){m=!1;break}}if(m){n*=1.1;break}n*=1.2,l++}return new v(e.x,e.y+n,e.z)}function dt(e,t){if(!q)return!1;const r=e.position,o=.01;return Math.abs(r.x-q.x)<o&&Math.abs(r.z-q.z)<o}function At(){Q=!0,ie=0,ne=null,T==null||T.start(),We(!0)}function Rr(e,t,r){if(t){if(q||(q=ze()),Q){if(ie===0&&(ie=e,ne=Gr(),Oe=t.position.clone(),Xe=r.target.clone()),!Oe||!ne||!Xe){console.error("Top view positions not initialized properly"),Q=!1;return}const o=e-ie;let n=Math.min(o/mt,1);n=n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,t.position.lerpVectors(Oe,ne,n),r.target.lerpVectors(Xe,q,n),t.lookAt(r.target),r.update(),o>=mt&&(t.position.copy(ne),r.target.copy(q),t.lookAt(r.target),r.update(),Q=!1,ie=0,T==null||T.stop());return}if(!Q&&dt(t)?We(!0):Q||We(!1),T||Qe(),!!(T!=null&&T.isActive())){if(dt(t)){T==null||T.stop();return}T&&T.animate(e,t,r)}}}function Dr(e,t,r){const o=n=>{n.preventDefault();let i=1;switch(n.deltaMode){case 2:i=1+n.deltaY*.025;break;case 1:i=1+n.deltaY*.01;break;default:i=1+n.deltaY*25e-5;break}Nr(t,r,i)};return e.domElement.addEventListener("wheel",o,{passive:!1}),()=>{e.domElement.removeEventListener("wheel",o)}}function zr(e){return T||Qe(),T?Ut(e,T):()=>{}}const Fe={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,is_wirksamgeschlossen:0,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function Pr(){const{subscribe:e,set:t,update:r}=Te(Fe),o={subscribe:e,set:n=>{t(n),Ue(n)},update:n=>{r(i=>{const l=n(i);return Ue(l),l})},reset:()=>{t(Fe),Ue(Fe)},updateField:(n,i)=>{o.update(l=>({...l,[n]:i}))}};return o}const C=Pr();function Ue(e){console.log("Parameter changed callback - a:",e.a,"b:",e.b,"is_streifen:",e.is_streifen),vr.set(null);const t=wr(e);Mr.set(t),Ir(e)}const b={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:70,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:12,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var $r=F(" <!>",1),Cr=F("<!> <!>",1);function hn(e,t){fe(t,!1);const[r,o]=Le(),n=()=>Ne(C,"$shearDeformationParameterStore",r);let i=re(t,"step",8,5),l=D(),c=D(!1),s=D(""),a=null;function m(p){let h=p,_=!1,d="";p<b.LAGERBREITE_MIN?(h=b.LAGERBREITE_MIN,_=!0,d=`${z("shearDeformation.parameters.minValue")}: ${b.LAGERBREITE_MIN} mm`):p>b.LAGERBREITE_MAX&&(h=b.LAGERBREITE_MAX,_=!0,d=`${z("shearDeformation.parameters.maxValue")}: ${b.LAGERBREITE_MAX} mm`);const E=n().b+100;h>E&&(h=E,_=!0,d=z("shearDeformation.parameters.constraintAB")),_&&(M(c,!0),M(s,d),a&&clearTimeout(a),a=setTimeout(()=>{M(c,!1),M(s,"")},3e3)),C.updateField("a",h)}ce(()=>n(),()=>{M(l,n().a)}),ve(),_e();var f=Cr(),u=Y(f);Ie(u,{children:(p,h)=>{de();var _=$r(),d=Y(_),E=W(d);Ge(E,{get formula(){return De.a}}),Ae(S=>ye(d,`${S??""} `),[()=>z("shearDeformation.parameters.bearingDepth")],ue),O(p,_)},$$slots:{default:!0}});var g=W(u,2);Re(g,{size:"sm",get step(){return i()},helperText:"mm",get min(){return b.LAGERBREITE_MIN},get max(){return b.LAGERBREITE_MAX},light:!0,get invalid(){return w(c)},get invalidText(){return w(s)},get value(){return w(l)},set value(p){M(l,p)},$$events:{change:()=>m(w(l))},$$legacy:!0}),O(e,f),me(),o()}var Br=F(" <!>",1),kr=F("<!> <!>",1);function gn(e,t){fe(t,!1);const[r,o]=Le(),n=()=>Ne(C,"$shearDeformationParameterStore",r);let i=re(t,"disabled",8,!1),l=re(t,"step",8,5),c=D(),s=D(!1),a=D(""),m=null;function f(_){let d=_,E=!1,S="";_<b.LAGERLAENGE_MIN?(d=b.LAGERLAENGE_MIN,E=!0,S=`${z("shearDeformation.parameters.minValue")}: ${b.LAGERLAENGE_MIN} mm`):_>b.LAGERLAENGE_MAX&&(d=b.LAGERLAENGE_MAX,E=!0,S=`${z("shearDeformation.parameters.maxValue")}: ${b.LAGERLAENGE_MAX} mm`),E&&(M(s,!0),M(a,S),m&&clearTimeout(m),m=setTimeout(()=>{M(s,!1),M(a,"")},3e3)),C.updateField("b",d)}ce(()=>n(),()=>{M(c,n().b)}),ve(),_e();var u=kr(),g=Y(u);Ie(g,{children:(_,d)=>{de();var E=Br(),S=Y(E),x=W(S);Ge(x,{get formula(){return De.b}}),Ae(I=>ye(S,`${I??""} `),[()=>z("shearDeformation.parameters.bearingLength")],ue),O(_,E)},$$slots:{default:!0}});var p=W(g,2);const h=ue(()=>i()||n().is_streifen===1);Re(p,{size:"sm",get step(){return l()},helperText:"mm",get disabled(){return w(h)},get min(){return b.LAGERLAENGE_MIN},get max(){return b.LAGERLAENGE_MAX},light:!0,get invalid(){return w(s)},get invalidText(){return w(a)},get value(){return w(c)},set value(_){M(c,_)},$$events:{change:()=>f(w(c))},$$legacy:!0}),O(e,u),me(),o()}var Or=F(" <!>",1),Xr=F("<!> <!>",1);function pn(e,t){fe(t,!1);const[r,o]=Le(),n=()=>Ne(C,"$shearDeformationParameterStore",r);let i=re(t,"step",8,5),l=D(),c=D(!1),s=D(""),a=null;function m(p){let h=p,_=!1,d="";p<b.BETONDECKUNG_MIN?(h=b.BETONDECKUNG_MIN,_=!0,d=`${z("shearDeformation.parameters.minValue")}: ${b.BETONDECKUNG_MIN} mm`):p>b.BETONDECKUNG_MAX&&(h=b.BETONDECKUNG_MAX,_=!0,d=`${z("shearDeformation.parameters.maxValue")}: ${b.BETONDECKUNG_MAX} mm`),_&&(M(c,!0),M(s,d),a&&clearTimeout(a),a=setTimeout(()=>{M(c,!1),M(s,"")},3e3)),C.updateField("c_nom",h)}ce(()=>n(),()=>{M(l,n().c_nom)}),ve(),_e();var f=Xr(),u=Y(f);Ie(u,{children:(p,h)=>{de();var _=Or(),d=Y(_),E=W(d);Ge(E,{get formula(){return De.c_nom}}),Ae(S=>ye(d,`${S??""} `),[()=>z("shearDeformation.parameters.concreteCovernominal")],ue),O(p,_)},$$slots:{default:!0}});var g=W(u,2);Re(g,{size:"sm",get step(){return i()},helperText:"mm",get min(){return b.BETONDECKUNG_MIN},get max(){return b.BETONDECKUNG_MAX},light:!0,get invalid(){return w(c)},get invalidText(){return w(s)},get value(){return w(l)},set value(p){M(l,p)},$$events:{change:()=>m(w(l))},$$legacy:!0}),O(e,f),me(),o()}var Fr=F(" <!>",1),Ur=F("<!> <!>",1);function En(e,t){fe(t,!1);const[r,o]=Le(),n=()=>Ne(C,"$shearDeformationParameterStore",r),i=D();let l=re(t,"step",8,1),c=D(),s=D(!1),a=D(""),m=null;function f(h){let _=h,d=!1,E="";h<b.BEMESSUNGSLAST_MIN?(_=b.BEMESSUNGSLAST_MIN,d=!0,E=`${z("shearDeformation.parameters.minValue")}: ${b.BEMESSUNGSLAST_MIN} ${w(i)}`):h>b.BEMESSUNGSLAST_MAX&&(_=b.BEMESSUNGSLAST_MAX,d=!0,E=`${z("shearDeformation.parameters.maxValue")}: ${b.BEMESSUNGSLAST_MAX} ${w(i)}`),d&&(M(s,!0),M(a,E),m&&clearTimeout(m),m=setTimeout(()=>{M(s,!1),M(a,"")},3e3)),C.updateField("ff_zd",_)}ce(()=>n(),()=>{M(c,n().ff_zd)}),ce(()=>n(),()=>{M(i,n().is_streifen?"kN/m":"kN")}),ve(),_e();var u=Ur(),g=Y(u);Ie(g,{children:(h,_)=>{de();var d=Fr(),E=Y(d),S=W(E);Ge(S,{get formula(){return De.ff_zd}}),Ae(x=>ye(E,`${x??""} `),[()=>z("shearDeformation.parameters.designLoad")],ue),O(h,d)},$$slots:{default:!0}});var p=W(g,2);Re(p,{size:"sm",get step(){return l()},get helperText(){return w(i)},get min(){return b.BEMESSUNGSLAST_MIN},get max(){return b.BEMESSUNGSLAST_MAX},light:!0,get invalid(){return w(s)},get invalidText(){return w(a)},get value(){return w(c)},set value(h){M(c,h)},$$events:{change:()=>f(w(c))},$$legacy:!0}),O(e,u),me(),o()}function Hr(e){Ht(e,-10)}function Vr(e){return e.add(new mr(9272444,4802918,6)),Vt(e,0,500,500,16777215,2)}function Tt(e){const t=[],r=e.n_b;for(let o=0;o<r;o++){let n=0;if(r===2){const i=e.b/1e3;n=o===0?i/5:-i/5}t.push(n)}return t}function _t(e,t){const r=new je;if(!t.is_dorn)return e.add(r),r;const o=new dr({color:16777215,metalness:.85,roughness:.2}),n=(50+t.b*.2)/1e3,i=t.d_b/2/1e3*.8,l=oe();return Tt(t).forEach(s=>{const a=new X(new _r(i,i,n,16),o);a.position.set(l.centerX,l.centerY+n/2,l.centerZ+s),a.castShadow=!0,a.receiveShadow=!0,r.add(a)}),e.add(r),r}function ht(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(o=>o.dispose()):r.material.dispose())}),e.remove(t))}const Zr=400,Yr=400,Wr=10,Kr=.4,jr=.4,qr=.01;function gt(e,t){const r=new je,o=new hr({color:Zt,shininess:100,specular:2236962}),n=(t.a-Zr)/1e3,i=(t.b-Yr)/1e3,l=(t.t-Wr)*2/1e3,c=Kr+n,s=jr+i,a=qr+l;let m;if(t.is_dorn){const d=new gr;d.moveTo(-c/2,-s/2),d.lineTo(c/2,-s/2),d.lineTo(c/2,s/2),d.lineTo(-c/2,s/2),d.lineTo(-c/2,-s/2);const E=Tt(t),S=t.d_b/2/1e3;E.forEach(I=>{const A=new pr;A.absarc(0,I,S,0,Math.PI*2,!1),d.holes.push(A)});const x={depth:a,bevelEnabled:!1};m=new Er(d,x),m.translate(0,0,-a/2),m.rotateX(-Math.PI/2)}else m=new Sr(c,a,s);const f=new X(m,o),u=oe();f.position.set(u.centerX,u.centerY+a/2,u.centerZ),f.castShadow=!0,f.receiveShadow=!0,r.add(f),e.add(r),f.geometry.computeBoundingBox();const g=new wt;g.setFromObject(f);const p=u.centerY;return{group:r,boundingBox:g,height:p,lengthDiffX:n,lengthDiffZ:i}}function pt(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(o=>o.dispose()):r.material.dispose())}),e.remove(t))}function Jr(){const{subscribe:e,set:t,update:r}=Te({renderer:null,camera:null,controls:null,scene:null});return{subscribe:e,setScene:o=>{r(n=>({...n,...o}))},reset:()=>{t({renderer:null,camera:null,controls:null,scene:null})},captureScreenshot:async(o=!1)=>new Promise((n,i)=>{const l={renderer:null,camera:null,controls:null,scene:null};if(e(a=>{l.renderer=a.renderer,l.camera=a.camera,l.controls=a.controls,l.scene=a.scene})(),!l.renderer||!l.camera||!l.scene){i(new Error("Scene not initialized"));return}const s=()=>{if(!l.renderer||!l.camera||!l.scene){i(new Error("Scene not initialized"));return}l.renderer.render(l.scene,l.camera);const a=l.renderer.domElement.toDataURL("image/png");n(a)};o?(At(),setTimeout(s,1200)):s()})}}const Et=Jr();var Qr=F('<!> <div class="top-view-button-container svelte-1mle02r"><!></div>',1),en=F('<div class="scene-container svelte-1mle02r"><!></div>');function Sn(e,t){fe(t,!1),re(t,"autoRotate",8,!1);let r=re(t,"showTooltip",8,!0),o;const n=.05,i=.001,l=.04,c=new v(-1.67,1.4,.02);let s=D(),a,m,f,u,g,p,h,_,d,E,S,x,I;zt(async()=>{a=Yt(),f=Wt(w(s)),Hr(a),d=Vr(a),m=Kt(35),m.position.copy(c),I=C.subscribe(async G=>{if(o=G,a&&h!==void 0){p&&lt(a,p),h&&pt(a,h),_&&ht(a,_),Ke(a),ct(a),p=it(a,o,!1),h=gt(a,o).group,_=_t(a,o),await ft(a);const R=oe();let he=Math.max(o.c_nom/1e3,.03);o.is_streifen===1&&(he=.1);const ge=new v(R.centerX+n+o.a/2e3,R.centerY+i,R.centerZ+l+o.b/2e3+he);await ut(a,ge),u&&(u.target.set(R.centerX,R.centerY,R.centerZ),u.update())}});const y=oe(),K=[y.centerX,y.centerY,y.centerZ];u=jt(m,f,K),Et.setScene({renderer:f,camera:m,controls:u,scene:a}),E=Dr(f,m,u),S=zr(w(s)),p=it(a,o,!1),h=gt(a,o).group,_=_t(a,o),await ft(a);let $=o.c_nom/1e3;o.is_streifen===1&&($=.1);const U=new v(y.centerX+n+o.a/2e3,y.centerY+i+.001,y.centerZ+l+o.b/2e3+$);await ut(a,U);const k=1e3/30;let H=0;const j=G=>{x=requestAnimationFrame(j);const V=G-H;if(!(V<k)){if(H=G-V%k,Rr(G,m,u),qt(u),d&&m){const R=new v(0,500,500);R.applyQuaternion(m.quaternion),d.position.copy(m.position).add(R),u&&u.target&&(d.target.position.copy(u.target),d.target.updateMatrixWorld())}f.render(a,m)}};if(j(0),await Gt(),w(s)&&w(s)instanceof Element){let G=!1;g=new ResizeObserver(()=>{w(s)&&f&&m&&!G&&(G=!0,requestAnimationFrame(()=>{if(w(s)&&f&&m){const V=w(s).clientWidth,R=w(s).clientHeight;m.aspect=V/R,m.updateProjectionMatrix(),f.setSize(V,R)}G=!1}))}),g.observe(w(s))}}),Pt(()=>{Et.reset(),x!==void 0&&cancelAnimationFrame(x),E&&E(),S&&S(),I&&I(),g&&g.disconnect(),u&&u.dispose(),f&&f.dispose(),p&&a&&lt(a,p),h&&a&&pt(a,h),_&&a&&ht(a,_),a&&Ke(a),a&&ct(a)}),_e();var A=en(),P=et(A);{var N=y=>{var K=Qr(),L=Y(K);Jt(L,{});var $=W(L,2),U=et($);Qt(U,{size:"small",kind:"secondary",$$events:{click:()=>At()},children:(B,k)=>{de();var H=Rt("Draufsicht");O(B,H)},$$slots:{default:!0}}),tt($),O(y,K)};$t(P,y=>{r()&&y(N)})}tt(A),er(A,y=>M(s,y),()=>w(s)),O(e,A),me()}export{En as B,b as I,hn as L,Sn as S,gn as a,_n as b,pn as c,Et as d,vr as e,Mr as f,br as l,Ue as p,C as s};
