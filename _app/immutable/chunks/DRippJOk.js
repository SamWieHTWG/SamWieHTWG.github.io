import{a7 as nt,q as We,h as ut,u as Ot,aO as $t,d as dt,a as Ft,f as Xt,b as kt,c as Yt,g as Se,aK as Ht,F as Vt,D as Ut,ay as at,at as Ie,r as le,ai as we,X as M,Y as O,ak as Ne,af as Le,n as ot,Q as Ee,y as Ge,T as S,v as fe,aj as Zt,ac as Wt,ae as qt,aN as Kt,x as mt,z as _t}from"./BvKSVf51.js";import{m as Jt,b as De,s as Ce}from"./QHAL4GFR.js";import{b as ht,d as Qt,f as Pe,t as st,a as Q,c as jt}from"./DXz0Kw33.js";import"./nQlYGMop.js";import{s as zt}from"./n_GZXeQT.js";import{i as ue}from"./BalNe5Rk.js";import{p as G,i as en}from"./DdfLy4nw.js";import{t as V,B as tn}from"./COkdQsEl.js";import{G as rt,i as Be,j as nn,B as U,c as gt,M as C,A as an,E as on,J as Rt,V as E,K as It,N as Z,C as Nt,O as qe,Q as Ke,R as Je,k as ne,U as sn,X as rn,Y as cn,Z as ln,_ as Gt,$ as it,a0 as ct,e as fn,f as un,W as dn,h as mn,P as _n,H as hn,D as gn,a1 as pn,a2 as wn,a3 as En,a4 as vn,m as Sn,n as xn,v as yn,y as bn}from"./B2aZwDIm.js";import{b as Mn}from"./BsNALBF4.js";function An(t,e,n=!1,a=!1,o=!1){var s=t,i="";nt(()=>{var f=Ot;if(i===(i=e()??"")){We&&ut();return}if(f.nodes_start!==null&&($t(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),i!==""){if(We){dt.data;for(var r=ut(),c=r;r!==null&&(r.nodeType!==8||r.data!=="");)c=r,r=Ft(r);if(r===null)throw Xt(),kt;ht(dt,c),s=Yt(r);return}var l=i+"";n?l=`<svg>${l}</svg>`:a&&(l=`<math>${l}</math>`);var u=Qt(l);if((n||a)&&(u=Se(u)),ht(Se(u),u.lastChild),n||a)for(;Se(u);)s.before(Se(u));else s.before(u)}})}function pa(t,e,n=e){var a=Ht();Jt(t,"input",o=>{var s=o?t.defaultValue:t.value;if(s=$e(t)?Fe(s):s,n(s),a&&s!==(s=e())){var i=t.selectionStart,f=t.selectionEnd;t.value=s??"",f!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(f,t.value.length))}}),(We&&t.defaultValue!==t.value||Vt(e)==null&&t.value)&&n($e(t)?Fe(t.value):t.value),Ut(()=>{var o=e();$e(t)&&o===Fe(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function $e(t){var e=t.type;return e==="number"||e==="range"}function Fe(t){return t===""?null:+t}const K={s_65:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=6.25?4.03*t**1.16:33.9,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},s_70:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=5?6.99*t:34.95,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},esz_100:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<2.33?5.3805*t-.6536:t>=2.33&&t<=2.5?10.635*t-12.89:t>2.5&&t<=5?8.4004*t-7.3293:34.7,rot_b_rule:(t,e)=>Math.min(450*t/e,48),rot_res_rule:48,"Nachweis erfolgreich t":[]},conti_60:{check:!0,manufacturer:"ContiTech",thicknesses:[10,20,30],sigma_rd_rule:t=>t<=5?.315*t**2+4.035*t:28.05,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},leschu_n15:{check:!0,manufacturer:"Leschu",thicknesses:[10,15,20],sigma_rd_rule:t=>t<1.88?3.29*t+1.46:t>=1.88&&t<2.5?2.58*t+2.79:t>=2.5&&t<3.5?3.34*t+.88:t>=3.5&&t<3.75?12.21*t-30.17:t>=3.75&&t<5?3.15*t+3.81:t>=5&&t<=10?1.66*t+11.29:t>10?27.89:0,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},matteco_elr08:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.17?.422*Math.E**(.698*t):7.75,rot_b_rule:(t,e)=>Math.min(200*t/e,16),rot_res_rule:16,"Nachweis erfolgreich t":[]},matteco_elr18:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.5?1.28*t**1.25:8.4,rot_b_rule:(t,e)=>Math.min(200*t/e,20),rot_res_rule:20,"Nachweis erfolgreich t":[]}};function Tn(t){const{is_ortbeton:e,a:n,b:a,is_dorn:o,is_wirksamgeschlossen:s,d_b:i,n_b:f,ff_zd:r,v_x:c,alpha_y:l,alpha_a:u,c_nom:d,is_streifen:h}=t,m=JSON.parse(JSON.stringify(K)),w={rules:[(p,I)=>p>=70||I>=100&&p>=50,(p,I)=>I>=70]},g={rules:[(p,I)=>p>=70,(p,I)=>I>=70]};w.rules.every(p=>p(n,a))||(m.s_65.check=!1,m.s_70.check=!1,m.esz_100.check=!1,m.leschu_n15.check=!1,m.matteco_elr08.check=!1,m.matteco_elr18.check=!1),g.rules.every(p=>p(n,a))||(m.conti_60.check=!1);const _=n*a;let v;o===0?v=_:v=Math.round(_-f*Math.PI*(i/2)**2);const y=Math.round(1e3*r/v*10)/10,b=10;let L=Math.round(.625/n*1e3*10)/10;e===0&&(L=L*.5);const x=L+b,A=l+x,F=n+(d+10)+25;let P;h===0&&(P=a+2*(d+10));const X=[];for(const[p,I]of Object.entries(m))if(I.check){const j=typeof K[p].thicknesses=="function"?K[p].thicknesses(n):K[p].thicknesses;for(const z of j){let D;!o||s?D=Math.round(_/(2*z*(n+a))*1e3)/1e3:D=Math.round((_-.25*Math.PI*f*z**2)/(2*z*(n+a)+z*Math.PI*f*i)*1e3)/1e3;const de=K[p].sigma_rd_rule(D),q=K[p].rot_b_rule(z,n),oe=K[p].rot_res_rule,me=.6*(z-2),B=y/de,k=c/me,R=A/q,ve=Math.round(1.5*y*a*z/1e3*10)/10,Oe=Math.round(1.5*y*n*z/1e3*10)/10,Bt=B<=1&&k<=1&&R<=1;X.push({lagerType:p,manufacturer:K[p].manufacturer,thickness:z,s:D,sigma_rd:de,alpha_y_max:q,alpha_y_ges:A,alpha_res_max:oe,v_x_max:me,sigma_nachw:B,v_x_nachw:k,rot_b_nachw:R,querzug_x:ve,querzug_y:Oe,passed:Bt,l_xmin:F,l_ymin:P})}}return X}const Ln=at([]),zn=at(null),_e=0,ae=-.8,he=-.8,pt=(ae+he)/2,xe=.2,ye=ae,be=2,Me=.25,Dt=.08,Rn=[[ae,1,-0],[he,1,-0],[he,1,_e],[ae,1,_e],[pt,.3,_e],[ae,.3,_e],[he,.6,_e],[he,.6,-0],[pt,.3,-0],[ae,.3,-0],[ye,0,Me],[ye,be,Me],[ye,be,-.25],[ye,0,-.25],[xe,be,-.25],[xe,0,-.25],[xe,be,Me],[xe,0,Me]],In=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],Nn=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function lt(t,e,n=0,a=25){const o=Rn.map(r=>[r[0],r[1],r[2]]),s=a/1e3+.01,i=t/1e3;let f=e/2/1e3;return n||(f+=s),[1,2,6,7].forEach(r=>{o[r][0]-=i+Dt+s}),[4,8].forEach(r=>{o[r][0]-=-.1}),[0,1,7,8,9].forEach(r=>{o[r][2]-=f}),[2,3,4,5,6].forEach(r=>{o[r][2]+=f}),n?([12,13,14,15].forEach(r=>{o[r][2]=-e/2/1e3}),[10,11,16,17].forEach(r=>{o[r][2]=e/2/1e3})):([12,13,14,15].forEach(r=>{o[r][2]-=f}),[10,11,16,17].forEach(r=>{o[r][2]+=f})),o}function Gn(t){const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");n.fillStyle="red",n.beginPath(),n.arc(32,32,28,0,Math.PI*2),n.fill(),n.fillStyle="white",n.font="bold 36px Arial",n.textAlign="center",n.textBaseline="middle",n.fillText(t,32,32);const a=new an(e),o=new on({map:a}),s=new Rt(o);return s.scale.set(.08,.08,1),s}function wt(t,e,n=!1){const a=new rt,o=e.a,s=e.b,i=e.is_streifen,f=e.c_nom,r=new Be({color:nn,shininess:100,flatShading:!0,transparent:!1}),c=lt(o,s,i,f),l=new Float32Array(c.flat()),u=new U;u.setAttribute("position",new gt(l,3)),u.setIndex(In),u.computeVertexNormals();const d=new C(u,r);d.castShadow=!0,d.receiveShadow=!0,a.add(d);const h=new U;h.setAttribute("position",new gt(l,3)),h.setIndex(Nn),h.computeVertexNormals();const m=new C(h,r);return m.castShadow=!0,m.receiveShadow=!0,a.add(m),n&&c.forEach((w,g)=>{const _=Gn(g.toString());_.position.set(w[0],w[1],w[2]),a.add(_)}),t.add(a),a}function ce(){const t=Ie($),e=lt(t.a,t.b,t.is_streifen,t.c_nom),n=[e[0],e[1],e[2],e[3]];return{centerX:-t.a/2/1e3-Dt+ae,centerY:n[0][1],centerZ:(n[0][2]+n[1][2]+n[2][2]+n[3][2])/4}}function Et(t,e){e&&(e.traverse(n=>{n instanceof C&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),t.remove(e))}let W=[],H=[];function Dn(){return[...W,...H]}let ze=null,ft=0,Xe=null,se=null;const Ae=11765,Qe=.012,je=2e-4;async function Ct(){return Xe||se||(se=new Promise((t,e)=>{new sn().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",a=>{Xe=a,se=null,t(a)},void 0,a=>{se=null,e(a)})}),se)}async function ke(t,e,n,a,o,s=0,i=0,f=!1){try{const r=await Ct(),c=new Ke(o,{font:r,size:Qe,depth:je,curveSegments:12,bevelEnabled:!0,bevelThickness:3e-4,bevelSize:2e-4,bevelOffset:0,bevelSegments:3});c.computeBoundingBox();const l=c.boundingBox;if(l){const v=-(l.max.x-l.min.x)/2,y=-(l.max.y-l.min.y)/2;c.translate(v,y,0)}const u=new Je({color:16711680,metalness:.3,roughness:.4}),d=new C(c,u),h=new E(n[0]-e[0],0,n[2]-e[2]).normalize(),m=new E(-h.z,0,h.x),w=(e[0]+n[0])/2+s+m.x*a,g=(e[2]+n[2])/2+i+m.z*a;d.position.set(w,e[1]+.001,g),d.rotation.x=-Math.PI/2;const _=Math.atan2(h.z,h.x)+Math.PI;d.rotation.z=_,f&&(ze=d,ft=_),t.add(d),W.push(d)}catch(r){console.error("Failed to load font for 3D text:",r)}}function et(t){if(ze){const e=t?Math.PI:0;ze.rotation.z=ft+e}}function Ye(t,e,n,a,o,s=.05){const i=new E(-a.z,0,a.x).normalize(),f=new U().setFromPoints([new E(e.x-i.x*s/2,e.y,e.z-i.z*s/2),new E(e.x+i.x*s/2,e.y,e.z+i.z*s/2)]),r=new Z(f,o);t.add(r),W.push(r);const c=new U().setFromPoints([new E(n.x-i.x*s/2,n.y,n.z-i.z*s/2),new E(n.x+i.x*s/2,n.y,n.z+i.z*s/2)]),l=new Z(c,o);t.add(l),W.push(l)}function tt(t){W.forEach(e=>{t.remove(e),e instanceof C&&(e.geometry&&e.geometry.dispose(),e.material instanceof ne&&e.material.dispose()),e instanceof Z&&(e.geometry&&e.geometry.dispose(),e.material instanceof ne&&e.material.dispose()),e instanceof Rt&&e.material instanceof ne&&e.material.dispose()}),W=[],ze=null,ft=0}function vt(t){H.forEach(e=>{t.remove(e),e instanceof C&&(e.geometry&&e.geometry.dispose(),e.material instanceof ne&&e.material.dispose()),e instanceof Z&&(e.geometry&&e.geometry.dispose(),e.material instanceof ne&&e.material.dispose()),e instanceof qe&&(e.line&&e.line.geometry&&e.line.geometry.dispose(),e.line&&e.line.material instanceof ne&&e.line.material.dispose(),e.cone&&e.cone.geometry&&e.cone.geometry.dispose(),e.cone&&e.cone.material instanceof ne&&e.cone.material.dispose())}),H=[]}async function St(t,e=new E(0,0,0)){const o=new It({color:new Nt(Ae)}),s=Ae;e.z=e.z-.035;const i=new E(e.x-.06,e.y,e.z),f=new U().setFromPoints([e,i]),r=new Z(f,o);t.add(r),H.push(r);const c=new E(-1,0,0),l=new qe(c,i,.03,s,.03*.5,.03*.3);t.add(l),H.push(l);const u=new E(e.x,e.y,e.z-.06),d=new U().setFromPoints([e,u]),h=new Z(d,o);t.add(h),H.push(h);const m=new E(0,0,-1),w=new qe(m,u,.03,s,.03*.5,.03*.3);t.add(w),H.push(w);try{const g=await Ct(),_=new Ke("x (Bauteilhauptachse)",{font:g,size:Qe,depth:je,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});_.computeBoundingBox();const v=_.boundingBox;if(v){const P=-(v.max.x-v.min.x)/2,X=-(v.max.y-v.min.y)/2;_.translate(P,X,0)}const y=new Je({color:Ae,metalness:.3,roughness:.4}),b=new C(_,y);b.position.set(e.x-.06*1-.05,e.y+.001,e.z-.02),b.rotation.x=-Math.PI/2,b.rotation.z=0,t.add(b),H.push(b);const L=new Ke("y",{font:g,size:Qe,depth:je,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});L.computeBoundingBox();const x=L.boundingBox;if(x){const P=-(x.max.x-x.min.x)/2,X=-(x.max.y-x.min.y)/2;L.translate(P,X,0)}const A=new Je({color:Ae,metalness:.3,roughness:.4}),F=new C(L,A);F.position.set(e.x-.02,e.y+.001,e.z-.06*1.1),F.rotation.x=-Math.PI/2,F.rotation.z=0,t.add(F),H.push(F)}catch(g){console.error("Failed to create 3D text for coordinate system:",g)}}async function xt(t){tt(t);const e=Ie($),n=lt(e.a,e.b,e.is_streifen,e.c_nom),a=ce(),o=new It({color:16711680});let s=e.c_nom/1e3+.01;e.is_streifen===1&&(s=0);const i=.01,f=e.b/1e3,r=e.a/1e3;if(e.is_streifen===0){const p=(n[1][0]+n[2][0])/2,I=n[1][1],j=(n[1][2]+n[2][2])/2,z=new E(p-i-s,I,j-f/2),D=new E(p-i-s,I,j+f/2),de=new U().setFromPoints([z,D]),q=new Z(de,o);t.add(q),W.push(q);const oe=new E().subVectors(D,z).normalize();Ye(t,z,D,oe,o),await ke(t,[z.x,z.y,z.z],[D.x,D.y,D.z],.02,`b = ${e.b} mm`,0,0)}const c=a.centerX,l=n[0][1],u=(n[0][2]+n[1][2])/2,d=new E(c-r/2,l,u-i-s),h=new E(c+r/2,l,u-i-s),m=new U().setFromPoints([d,h]),w=new Z(m,o);t.add(w),W.push(w);const g=new E().subVectors(h,d).normalize();Ye(t,d,h,g,o),await ke(t,[d.x,d.y,d.z],[h.x,h.y,h.z],-.02,`a = ${e.a} mm`,0,0,!0);const _=.04,v=a.centerX-e.a/2e3,y=a.centerY,b=a.centerZ+e.b/2e3+_+s,L=e.c_nom/1e3+.01,x=new E(v,y,b),A=new E(v-L,y,b),F=new U().setFromPoints([x,A]),P=new Z(F,o);t.add(P),W.push(P);const X=new E().subVectors(A,x).normalize();Ye(t,x,A,X,o),await ke(t,[x.x,x.y,x.z],[A.x,A.y,A.z],-.05,"cnom + 100 mm",0,0)}let ie=!0,He=0,ge=0,J=null,Y=null;function Cn(t,e,n){if(!t||!e)return;const a=new E;a.subVectors(e.target,t.position),a.normalize();const s=t.position.distanceTo(e.target)*(1-n),i=a.clone().multiplyScalar(s);t.position.add(i),e.update()}const Pn=.05,Te=1.4,Ve=[new E(-2.1247554456236646,Te,-.9418251993957858),new E(-2.298436211128349,Te,.0593750739688058),new E(-1.8215114290760264,Te,1.1472099754138583)];function Bn(){const t=Ie($),a=(t.a+t.b)/1500;return console.log(a),a}function On(){const t=Re(),e=Bn(),n=[];console.log("Scale Factor:",e),console.log("Base Waypoint Offsets:",Ve);for(let a=0;a<Ve.length;a++){const o=Ve[a],s=new E(t.x+o.x*e,Te,t.z+o.z*e);console.log(`Waypoint ${a}:`,s),console.log("  - Base offset:",o),console.log("  - Scaled X offset:",o.x*e),console.log("  - Scaled Z offset:",o.z*e),n.push(s)}return n}let re=[];function Re(){const t=ce(),e=new E(t.centerX,t.centerY,t.centerZ);return console.log("Focus Point (Target Center):",e),e}let N=null,ee=!1,te=null,pe=0;const yt=1e3;function $n(){console.log("Regenerating camera waypoints due to parameter change"),re=[],N=null,ee=!1,te=null}function Fn(){const t=Re(),e=Ie($),n=Dn();if(n.length===0){const c=Math.max(e.a,e.b)/1e3*3;return new E(t.x,t.y+c,t.z)}let o=Math.max(e.a,e.b)/1e3*2;const s=20;let i=0;const f=new rn(35,1,.01,1e3);for(;i<s;){f.position.set(t.x,t.y+o,t.z),f.lookAt(t),f.updateMatrixWorld(),f.updateProjectionMatrix();const r=new cn,c=new ln;c.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),r.setFromProjectionMatrix(c);let l=!0;for(const u of n){u.updateMatrixWorld(!0);const d=new Gt().setFromObject(u);if(!r.intersectsBox(d)){l=!1;break}}if(l){o*=1.1;break}o*=1.2,i++}return console.log(`Top view camera height calculated: ${o.toFixed(3)}m after ${i} iterations`),new E(t.x,t.y+o,t.z)}function bt(t,e){if(!N)return!1;const n=t.position,a=.01;return Math.abs(n.x-N.x)<a&&Math.abs(n.z-N.z)<a}function Xn(){ee=!0,pe=0,te=null,ie=!0,et(!0),console.log("Enabling top view")}function kn(t,e,n){if(!e)return;if(N||(N=Re()),ee){if(pe===0&&(pe=t,te=Fn(),J=e.position.clone(),Y=n.target.clone(),console.log("Top view transition initialized:",{startPosition:J,topViewTargetPosition:te,startTarget:Y,cachedTargetCenter:N})),!J||!te||!Y){console.error("Top view positions not initialized properly"),ee=!1;return}const c=t-pe;let l=Math.min(c/yt,1);l=l<.5?4*l*l*l:1-Math.pow(-2*l+2,3)/2,e.position.lerpVectors(J,te,l),n.target.lerpVectors(Y,N,l),e.lookAt(n.target),n.update(),c>=yt&&(e.position.copy(te),n.target.copy(N),e.lookAt(n.target),n.update(),ee=!1,pe=0,ie=!1,console.log("Top view reached, transition complete"));return}if(!ee&&bt(e)?et(!0):ee||et(!1),!ie)return;if(re.length===0&&(re=On(),N=null,N||(N=Re())),bt(e)){ie=!1;return}ge===0&&(ge=t,J=e.position.clone(),Y=n.target.clone());const a=t-ge,o=J||re[He],s=(He+1)%re.length,i=re[s],r=o.distanceTo(i)/Pn*1e3;if(a<r){const c=a/r;e.position.lerpVectors(o,i,c),n&&Y&&(n.target.lerpVectors(Y,N,c),n.update())}else He=s,ge=t,J=null,Y=N.clone()}function Yn(t,e,n){const a=o=>{o.preventDefault();let s=1;switch(o.deltaMode){case 2:s=1+o.deltaY*.025;break;case 1:s=1+o.deltaY*.01;break;default:s=1+o.deltaY*25e-5;break}Cn(e,n,s)};return t.domElement.addEventListener("wheel",a,{passive:!1}),()=>{t.domElement.removeEventListener("wheel",a)}}function Hn(t){const e=()=>{ie=!1},n=()=>{ie=!0,ge=0,J=null,Y=null};return t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",n),()=>{t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",n)}}const Ue={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,is_wirksamgeschlossen:0,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function Vn(){const{subscribe:t,set:e,update:n}=at(Ue),a={subscribe:t,set:o=>{e(o),Ze(o)},update:o=>{n(s=>{const i=o(s);return Ze(i),i})},reset:()=>{e(Ue),Ze(Ue)},updateField:(o,s)=>{a.update(i=>({...i,[o]:s}))}};return a}const $=Vn();function Ze(t){zn.set(null);const e=Tn(t);Ln.set(e),$n()}const T={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:50,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:0,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var Un=Pe("<!> <!>",1);function wa(t,e){le(e,!1);const[n,a]=Ce(),o=()=>De($,"$shearDeformationParameterStore",n);let s=G(e,"step",8,5),i=O(),f=O(!1),r=O(""),c=null;function l(m){let w=m,g=!1,_="";m<T.LAGERBREITE_MIN?(w=T.LAGERBREITE_MIN,g=!0,_=`${V("shearDeformation.parameters.minValue")}: ${T.LAGERBREITE_MIN} mm`):m>T.LAGERBREITE_MAX&&(w=T.LAGERBREITE_MAX,g=!0,_=`${V("shearDeformation.parameters.maxValue")}: ${T.LAGERBREITE_MAX} mm`);const v=o().b+100;w>v&&(w=v,g=!0,_=V("shearDeformation.parameters.constraintAB")),g&&(M(f,!0),M(r,_),c&&clearTimeout(c),c=setTimeout(()=>{M(f,!1),M(r,"")},3e3)),$.updateField("a",w)}we(()=>o(),()=>{M(i,o().a)}),Ne(),ue();var u=Un(),d=Le(u);it(d,{children:(m,w)=>{ot();var g=st();nt(_=>zt(g,_),[()=>V("shearDeformation.parameters.bearingDepth")],Ee),Q(m,g)},$$slots:{default:!0}});var h=Ge(d,2);ct(h,{size:"sm",get step(){return s()},helperText:"mm",get min(){return T.LAGERBREITE_MIN},get max(){return T.LAGERBREITE_MAX},light:!0,get invalid(){return S(f)},get invalidText(){return S(r)},get value(){return S(i)},set value(m){M(i,m)},$$events:{change:()=>l(S(i))},$$legacy:!0}),Q(t,u),fe(),a()}var Zn=Pe("<!> <!>",1);function Ea(t,e){le(e,!1);const[n,a]=Ce(),o=()=>De($,"$shearDeformationParameterStore",n);let s=G(e,"disabled",8,!1),i=G(e,"step",8,5),f=O(),r=O(!1),c=O(""),l=null;function u(g){let _=g,v=!1,y="";g<T.LAGERLAENGE_MIN?(_=T.LAGERLAENGE_MIN,v=!0,y=`${V("shearDeformation.parameters.minValue")}: ${T.LAGERLAENGE_MIN} mm`):g>T.LAGERLAENGE_MAX&&(_=T.LAGERLAENGE_MAX,v=!0,y=`${V("shearDeformation.parameters.maxValue")}: ${T.LAGERLAENGE_MAX} mm`),v&&(M(r,!0),M(c,y),l&&clearTimeout(l),l=setTimeout(()=>{M(r,!1),M(c,"")},3e3)),$.updateField("b",_)}we(()=>o(),()=>{M(f,o().b)}),Ne(),ue();var d=Zn(),h=Le(d);it(h,{children:(g,_)=>{ot();var v=st();nt(y=>zt(v,y),[()=>V("shearDeformation.parameters.bearingLength")],Ee),Q(g,v)},$$slots:{default:!0}});var m=Ge(h,2);const w=Ee(()=>s()||o().is_streifen===1);ct(m,{size:"sm",get step(){return i()},helperText:"mm",get disabled(){return S(w)},get min(){return T.LAGERLAENGE_MIN},get max(){return T.LAGERLAENGE_MAX},light:!0,get invalid(){return S(r)},get invalidText(){return S(c)},get value(){return S(f)},set value(g){M(f,g)},$$events:{change:()=>u(S(f))},$$legacy:!0}),Q(t,d),fe(),a()}var Wn=Pe("<!> <!>",1);function Pt(t,e){le(e,!1);const[n,a]=Ce(),o=()=>De($,"$shearDeformationParameterStore",n);let s=G(e,"field",8),i=G(e,"label",8),f=G(e,"helperText",8,""),r=G(e,"step",8,1),c=G(e,"disabled",8,!1),l=G(e,"min",8,void 0),u=G(e,"max",8,void 0),d=O(),h=O(!1),m=O(""),w=null;function g(b){let L=b,x=!1,A="";l()!==void 0&&b<l()?(L=l(),x=!0,A=`Minimalwert: ${l()}${f()?" "+f():""}`):u()!==void 0&&b>u()&&(L=u(),x=!0,A=`Maximalwert: ${u()}${f()?" "+f():""}`),x&&(M(h,!0),M(m,A),w&&clearTimeout(w),w=setTimeout(()=>{M(h,!1),M(m,"")},3e3)),$.updateField(s(),L)}we(()=>(o(),Zt(s())),()=>{M(d,o()[s()])}),Ne(),ue();var _=Wn(),v=Le(_);it(v,{children:(b,L)=>{var x=jt(),A=Le(x);An(A,i),Q(b,x)},$$slots:{default:!0}});var y=Ge(v,2);ct(y,{size:"sm",get step(){return r()},get helperText(){return f()},get disabled(){return c()},get min(){return l()},get max(){return u()},light:!0,get invalid(){return S(h)},get invalidText(){return S(m)},get value(){return S(d)},set value(b){M(d,b)},$$events:{change:()=>g(S(d))},$$legacy:!0}),Q(t,_),fe(),a()}function va(t,e){le(e,!1);let n=G(e,"step",8,5);ue();const a=Ee(()=>V("shearDeformation.parameters.concreteCovernominal"));Pt(t,{field:"c_nom",get label(){return S(a)},get step(){return n()},helperText:"mm",get min(){return T.BETONDECKUNG_MIN},get max(){return T.BETONDECKUNG_MAX}}),fe()}function Sa(t,e){le(e,!1);const[n,a]=Ce(),o=()=>De($,"$shearDeformationParameterStore",n),s=O(),i=O();let f=G(e,"step",8,1);we(()=>o(),()=>{M(s,o())}),we(()=>S(s),()=>{M(i,S(s).is_streifen?"kN/m":"kN")}),Ne(),ue();const r=Ee(()=>V("shearDeformation.parameters.designLoad"));Pt(t,{field:"ff_zd",get label(){return S(r)},get step(){return f()},get helperText(){return S(i)},get min(){return T.BEMESSUNGSLAST_MIN},get max(){return T.BEMESSUNGSLAST_MAX}}),fe(),a()}function qn(){const t=new fn;return t.background=new Nt(10526880),t.fog=new un(10526880,10,500),t}function Kn(t){const e=new dn({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,e.shadowMap.type=mn,t.appendChild(e.domElement),e}function Jn(t){const e=new C(new _n(1e3,1e3),new Be({color:13355979,depthWrite:!1}));e.rotation.x=-Math.PI/2,e.position.y=-10,e.receiveShadow=!0,t.add(e)}function Qn(t){return t.add(new hn(9272444,4802918,3)),jn(t,0,500,500,16777215,2)}function jn(t,e,n,a,o,s){const i=new gn(o,s);i.position.set(e,n,a),i.castShadow=!0;const f=1e3;return i.shadow.camera.left=-1e3,i.shadow.camera.right=f,i.shadow.camera.top=f,i.shadow.camera.bottom=-1e3,i.shadow.camera.near=1,i.shadow.camera.far=2e3,i.shadow.mapSize.width=4096,i.shadow.mapSize.height=4096,i.shadow.radius=1,i.shadow.bias=-5e-4,t.add(i),t.add(i.target),i}const ea=400,ta=400,na=10,aa=.4,oa=.4,sa=.01;function Mt(t,e){const n=new rt,a=new Be({color:pn,shininess:100,specular:2236962}),o=(e.a-ea)/1e3,s=(e.b-ta)/1e3,i=(e.t-na)*2/1e3,f=aa+o,r=oa+s,c=sa+i,l=new C(new wn(f,c,r),a),u=ce();l.position.set(u.centerX,u.centerY+c/2,u.centerZ),l.castShadow=!0,l.receiveShadow=!0,n.add(l),t.add(n),l.geometry.computeBoundingBox();const d=new Gt;d.setFromObject(l);const h=u.centerY;return{group:n,boundingBox:d,height:h,lengthDiffX:o,lengthDiffZ:s}}function At(t,e){e&&(e.traverse(n=>{n instanceof C&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),t.remove(e))}function Tt(t,e){const n=new rt;if(!e.is_dorn)return t.add(n),n;const a=new Be({color:En,flatShading:!1}),o=(50+e.b*.2)/1e3,s=e.d_b/2/1e3,i=ce(),f=e.n_b;for(let r=0;r<f;r++){const c=new C(new vn(s,s,o,16),a);let l=0;if(f===2){const u=e.b/1e3;l=r===0?u/5:-u/5}c.position.set(i.centerX,i.centerY+o/2,i.centerZ+l),c.castShadow=!0,c.receiveShadow=!0,n.add(c)}return t.add(n),n}function Lt(t,e){e&&(e.traverse(n=>{n instanceof C&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),t.remove(e))}var ra=Pe('<div class="scene-container svelte-1pck9b"><!> <div class="top-view-button-container svelte-1pck9b"><!></div></div>');function xa(t,e){le(e,!1),G(e,"autoRotate",8,!1);let n=G(e,"showTooltip",8,!0),a;const o=.05,s=.001,i=.04,f=new E(-1.67,1.4,.02);let r=O(),c,l,u,d,h,m,w,g,_,v,y,b,L;Wt(async()=>{c=qn(),u=Kn(S(r)),Jn(c),_=Qn(c),l=Sn(35),l.position.copy(f),L=$.subscribe(async B=>{if(a=B,c&&w!==void 0){m&&Et(c,m),w&&At(c,w),g&&Lt(c,g),tt(c),vt(c),m=wt(c,a,!1),w=Mt(c,a).group,g=Tt(c,a),await xt(c);const R=ce();let ve=Math.max(a.c_nom/1e3,.03);a.is_streifen===1&&(ve=.1);const Oe=new E(R.centerX+o+a.a/2e3,R.centerY+s,R.centerZ+i+a.b/2e3+ve);await St(c,Oe),d&&(d.target.set(R.centerX,R.centerY,R.centerZ),d.update())}});const p=ce(),I=[p.centerX,p.centerY,p.centerZ];d=xn(l,u,I),v=Yn(u,l,d),y=Hn(S(r)),m=wt(c,a,!1),w=Mt(c,a).group,g=Tt(c,a),await xt(c);let z=a.c_nom/1e3;a.is_streifen===1&&(z=.1);const D=new E(p.centerX+o+a.a/2e3,p.centerY+s+.001,p.centerZ+i+a.b/2e3+z);await St(c,D);const q=1e3/30;let oe=0;const me=B=>{b=requestAnimationFrame(me);const k=B-oe;if(!(k<q)){if(oe=B-k%q,kn(B,l,d),yn(d),_&&l){const R=new E(0,500,500);R.applyQuaternion(l.quaternion),_.position.copy(l.position).add(R),d&&d.target&&(_.target.position.copy(d.target),_.target.updateMatrixWorld())}u.render(c,l)}};if(me(0),await qt(),S(r)&&S(r)instanceof Element){let B=!1;h=new ResizeObserver(()=>{S(r)&&u&&l&&!B&&(B=!0,requestAnimationFrame(()=>{if(S(r)&&u&&l){const k=S(r).clientWidth,R=S(r).clientHeight;console.log(`Resizing renderer to ${k}x${R}`),l.aspect=k/R,l.updateProjectionMatrix(),u.setSize(k,R)}B=!1}))}),h.observe(S(r))}console.log("ShearDeformationScene initialized")}),Kt(()=>{b!==void 0&&cancelAnimationFrame(b),v&&v(),y&&y(),L&&L(),h&&h.disconnect(),d&&d.dispose(),u&&u.dispose(),m&&c&&Et(c,m),w&&c&&At(c,w),g&&c&&Lt(c,g),c&&tt(c),c&&vt(c),console.log("ShearDeformationScene destroyed")}),ue();var x=ra(),A=mt(x);{var F=p=>{bn(p)};en(A,p=>{n()&&p(F)})}var P=Ge(A,2),X=mt(P);tn(X,{size:"small",kind:"secondary",$$events:{click:()=>Xn()},children:(p,I)=>{ot();var j=st("Draufsicht");Q(p,j)},$$slots:{default:!0}}),_t(P),_t(x),Mn(x,p=>M(r,p),()=>S(r)),Q(t,x),fe()}export{Sa as B,T as I,wa as L,Pt as P,xa as S,Ea as a,pa as b,va as c,zn as d,Ln as e,K as l,Ze as p,$ as s};
