import{a4 as Ye,t as Ce,h as Ke,u as yt,aO as bt,d as Je,a as At,f as Mt,b as Tt,c as Lt,g as me,aK as Rt,B as zt,A as Nt,ay as He,q as ne,ai as fe,T as A,V as P,ak as Se,af as ve,n as ft,N as ue,a7 as Ue,O as v,v as ae,aj as Gt,at as ut,ac as It,ae as Dt,aN as Ct,a5 as Bt,a6 as Pt}from"./B_J1m_EM.js";import{m as Ot,b as xe,s as ye}from"./rTFhHhec.js";import{b as Qe,d as Xt,f as be,t as dt,a as Q,c as $t}from"./b0vKRyRU.js";import"./CYP6ejXN.js";import{s as mt}from"./touYG125.js";import{i as re}from"./D-GPOFrA.js";import{p as D,i as Ft}from"./CnYdXSJI.js";import{t as k}from"./BxD2pjPe.js";import{A as Ze,N as Ve,G as We,i as Ae,j as kt,B as Y,c as je,M as B,E as Yt,J as Ht,K as _t,V as w,e as Ut,C as ht,f as Zt,W as Vt,h as Wt,P as qt,H as Kt,D as Jt,O as Qt,Q as jt,R as en,U as tn,X as nn,Y as gt,Z as H,_ as Be,$ as Pe,a0 as Oe,k as K,a1 as an,m as rn,n as sn,v as on,y as cn}from"./CYkXO2Ke.js";import{b as ln}from"./Dag8BmdE.js";function fn(t,e,n=!1,a=!1,r=!1){var o=t,i="";Ye(()=>{var f=yt;if(i===(i=e()??"")){Ce&&Ke();return}if(f.nodes_start!==null&&(bt(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),i!==""){if(Ce){Je.data;for(var s=Ke(),c=s;s!==null&&(s.nodeType!==8||s.data!=="");)c=s,s=At(s);if(s===null)throw Mt(),Tt;Qe(Je,c),o=Lt(s);return}var l=i+"";n?l=`<svg>${l}</svg>`:a&&(l=`<math>${l}</math>`);var u=Xt(l);if((n||a)&&(u=me(u)),Qe(me(u),u.lastChild),n||a)for(;me(u);)o.before(me(u));else o.before(u)}})}function Kn(t,e,n=e){var a=Rt();Ot(t,"input",r=>{var o=r?t.defaultValue:t.value;if(o=Me(t)?Te(o):o,n(o),a&&o!==(o=e())){var i=t.selectionStart,f=t.selectionEnd;t.value=o??"",f!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(f,t.value.length))}}),(Ce&&t.defaultValue!==t.value||zt(e)==null&&t.value)&&n(Me(t)?Te(t.value):t.value),Nt(()=>{var r=e();Me(t)&&r===Te(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function Me(t){var e=t.type;return e==="number"||e==="range"}function Te(t){return t===""?null:+t}const Z={s_65:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=6.25?4.03*t**1.16:33.9,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},s_70:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=5?6.99*t:34.95,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},esz_100:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<2.33?5.3805*t-.6536:t>=2.33&&t<=2.5?10.635*t-12.89:t>2.5&&t<=5?8.4004*t-7.3293:34.7,rot_b_rule:(t,e)=>Math.min(450*t/e,48),rot_res_rule:48,"Nachweis erfolgreich t":[]},conti_60:{check:!0,manufacturer:"ContiTech",thicknesses:[10,20,30],sigma_rd_rule:t=>t<=5?.315*t**2+4.035*t:28.05,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},leschu_n15:{check:!0,manufacturer:"Leschu",thicknesses:[10,15,20],sigma_rd_rule:t=>t<1.88?3.29*t+1.46:t>=1.88&&t<2.5?2.58*t+2.79:t>=2.5&&t<3.5?3.34*t+.88:t>=3.5&&t<3.75?12.21*t-30.17:t>=3.75&&t<5?3.15*t+3.81:t>=5&&t<=10?1.66*t+11.29:t>10?27.89:0,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},matteco_elr08:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.17?.422*Math.E**(.698*t):7.75,rot_b_rule:(t,e)=>Math.min(200*t/e,16),rot_res_rule:16,"Nachweis erfolgreich t":[]},matteco_elr18:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.5?1.28*t**1.25:8.4,rot_b_rule:(t,e)=>Math.min(200*t/e,20),rot_res_rule:20,"Nachweis erfolgreich t":[]}};function un(t){const{is_ortbeton:e,a:n,b:a,is_dorn:r,is_wirksamgeschlossen:o,d_b:i,n_b:f,ff_zd:s,v_x:c,alpha_y:l,alpha_a:u,c_nom:d,is_streifen:g}=t,m=JSON.parse(JSON.stringify(Z)),E={rules:[(x,G)=>x>=70||G>=100&&x>=50,(x,G)=>G>=70]},_={rules:[(x,G)=>x>=70,(x,G)=>G>=70]};E.rules.every(x=>x(n,a))||(m.s_65.check=!1,m.s_70.check=!1,m.esz_100.check=!1,m.leschu_n15.check=!1,m.matteco_elr08.check=!1,m.matteco_elr18.check=!1),_.rules.every(x=>x(n,a))||(m.conti_60.check=!1);const h=n*a;let p;r===0?p=h:p=Math.round(h-f*Math.PI*(i/2)**2);const M=Math.round(1e3*s/p*10)/10,y=10;let L=Math.round(.625/n*1e3*10)/10;e===0&&(L=L*.5);const S=L+y,R=l+S,O=n+(d+10)+25;let b;g===0&&(b=a+2*(d+10));const X=[];for(const[x,G]of Object.entries(m))if(G.check){const j=typeof Z[x].thicknesses=="function"?Z[x].thicknesses(n):Z[x].thicknesses;for(const z of j){let I;!r||o?I=Math.round(h/(2*z*(n+a))*1e3)/1e3:I=Math.round((h-.25*Math.PI*f*z**2)/(2*z*(n+a)+z*Math.PI*f*i)*1e3)/1e3;const q=Z[x].sigma_rd_rule(I),U=Z[x].rot_b_rule(z,n),C=Z[x].rot_res_rule,$=.6*(z-2),N=M/q,se=c/$,de=R/U,vt=Math.round(1.5*M*a*z/1e3*10)/10,St=Math.round(1.5*M*n*z/1e3*10)/10,xt=N<=1&&se<=1&&de<=1;X.push({lagerType:x,manufacturer:Z[x].manufacturer,thickness:z,s:I,sigma_rd:q,alpha_y_max:U,alpha_y_ges:R,alpha_res_max:C,v_x_max:$,sigma_nachw:N,v_x_nachw:se,rot_b_nachw:de,querzug_x:vt,querzug_y:St,passed:xt,l_xmin:O,l_ymin:b})}}return X}const dn=He([]),mn=He(null),Le={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,is_wirksamgeschlossen:0,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function _n(){const{subscribe:t,set:e,update:n}=He(Le),a={subscribe:t,set:r=>{e(r),Re(r)},update:r=>{n(o=>{const i=r(o);return Re(i),i})},reset:()=>{e(Le),Re(Le)},updateField:(r,o)=>{a.update(i=>({...i,[r]:o}))}};return a}const F=_n();function Re(t){mn.set(null);const e=un(t);dn.set(e)}const T={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:50,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:0,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var hn=be("<!> <!>",1);function Jn(t,e){ne(e,!1);const[n,a]=ye(),r=()=>xe(F,"$shearDeformationParameterStore",n);let o=D(e,"step",8,5),i=P(),f=P(!1),s=P(""),c=null;function l(m){let E=m,_=!1,h="";m<T.LAGERBREITE_MIN?(E=T.LAGERBREITE_MIN,_=!0,h=`${k("shearDeformation.parameters.minValue")}: ${T.LAGERBREITE_MIN} mm`):m>T.LAGERBREITE_MAX&&(E=T.LAGERBREITE_MAX,_=!0,h=`${k("shearDeformation.parameters.maxValue")}: ${T.LAGERBREITE_MAX} mm`);const p=r().b+100;E>p&&(E=p,_=!0,h=k("shearDeformation.parameters.constraintAB")),_&&(A(f,!0),A(s,h),c&&clearTimeout(c),c=setTimeout(()=>{A(f,!1),A(s,"")},3e3)),F.updateField("a",E)}fe(()=>r(),()=>{A(i,r().a)}),Se(),re();var u=hn(),d=ve(u);Ze(d,{children:(m,E)=>{ft();var _=dt();Ye(h=>mt(_,h),[()=>k("shearDeformation.parameters.bearingDepth")],ue),Q(m,_)},$$slots:{default:!0}});var g=Ue(d,2);Ve(g,{size:"sm",get step(){return o()},helperText:"mm",get min(){return T.LAGERBREITE_MIN},get max(){return T.LAGERBREITE_MAX},light:!0,get invalid(){return v(f)},get invalidText(){return v(s)},get value(){return v(i)},set value(m){A(i,m)},$$events:{change:()=>l(v(i))},$$legacy:!0}),Q(t,u),ae(),a()}var gn=be("<!> <!>",1);function Qn(t,e){ne(e,!1);const[n,a]=ye(),r=()=>xe(F,"$shearDeformationParameterStore",n);let o=D(e,"disabled",8,!1),i=D(e,"step",8,5),f=P(),s=P(!1),c=P(""),l=null;function u(_){let h=_,p=!1,M="";_<T.LAGERLAENGE_MIN?(h=T.LAGERLAENGE_MIN,p=!0,M=`${k("shearDeformation.parameters.minValue")}: ${T.LAGERLAENGE_MIN} mm`):_>T.LAGERLAENGE_MAX&&(h=T.LAGERLAENGE_MAX,p=!0,M=`${k("shearDeformation.parameters.maxValue")}: ${T.LAGERLAENGE_MAX} mm`),p&&(A(s,!0),A(c,M),l&&clearTimeout(l),l=setTimeout(()=>{A(s,!1),A(c,"")},3e3)),F.updateField("b",h)}fe(()=>r(),()=>{A(f,r().b)}),Se(),re();var d=gn(),g=ve(d);Ze(g,{children:(_,h)=>{ft();var p=dt();Ye(M=>mt(p,M),[()=>k("shearDeformation.parameters.bearingLength")],ue),Q(_,p)},$$slots:{default:!0}});var m=Ue(g,2);const E=ue(()=>o()||r().is_streifen===1);Ve(m,{size:"sm",get step(){return i()},helperText:"mm",get disabled(){return v(E)},get min(){return T.LAGERLAENGE_MIN},get max(){return T.LAGERLAENGE_MAX},light:!0,get invalid(){return v(s)},get invalidText(){return v(c)},get value(){return v(f)},set value(_){A(f,_)},$$events:{change:()=>u(v(f))},$$legacy:!0}),Q(t,d),ae(),a()}var En=be("<!> <!>",1);function Et(t,e){ne(e,!1);const[n,a]=ye(),r=()=>xe(F,"$shearDeformationParameterStore",n);let o=D(e,"field",8),i=D(e,"label",8),f=D(e,"helperText",8,""),s=D(e,"step",8,1),c=D(e,"disabled",8,!1),l=D(e,"min",8,void 0),u=D(e,"max",8,void 0),d=P(),g=P(!1),m=P(""),E=null;function _(y){let L=y,S=!1,R="";l()!==void 0&&y<l()?(L=l(),S=!0,R=`Minimalwert: ${l()}${f()?" "+f():""}`):u()!==void 0&&y>u()&&(L=u(),S=!0,R=`Maximalwert: ${u()}${f()?" "+f():""}`),S&&(A(g,!0),A(m,R),E&&clearTimeout(E),E=setTimeout(()=>{A(g,!1),A(m,"")},3e3)),F.updateField(o(),L)}fe(()=>(r(),Gt(o())),()=>{A(d,r()[o()])}),Se(),re();var h=En(),p=ve(h);Ze(p,{children:(y,L)=>{var S=$t(),R=ve(S);fn(R,i),Q(y,S)},$$slots:{default:!0}});var M=Ue(p,2);Ve(M,{size:"sm",get step(){return s()},get helperText(){return f()},get disabled(){return c()},get min(){return l()},get max(){return u()},light:!0,get invalid(){return v(g)},get invalidText(){return v(m)},get value(){return v(d)},set value(y){A(d,y)},$$events:{change:()=>_(v(d))},$$legacy:!0}),Q(t,h),ae(),a()}function jn(t,e){ne(e,!1);let n=D(e,"step",8,5);re();const a=ue(()=>k("shearDeformation.parameters.concreteCovernominal"));Et(t,{field:"c_nom",get label(){return v(a)},get step(){return n()},helperText:"mm",get min(){return T.BETONDECKUNG_MIN},get max(){return T.BETONDECKUNG_MAX}}),ae()}function ea(t,e){ne(e,!1);const[n,a]=ye(),r=()=>xe(F,"$shearDeformationParameterStore",n),o=P(),i=P();let f=D(e,"step",8,1);fe(()=>r(),()=>{A(o,r())}),fe(()=>v(o),()=>{A(i,v(o).is_streifen?"kN/m":"kN")}),Se(),re();const s=ue(()=>k("shearDeformation.parameters.designLoad"));Et(t,{field:"ff_zd",get label(){return v(s)},get step(){return f()},get helperText(){return v(i)},get min(){return T.BEMESSUNGSLAST_MIN},get max(){return T.BEMESSUNGSLAST_MAX}}),ae(),a()}const oe=0,J=-.8,ie=-.8,et=(J+ie)/2,_e=.2,he=J,ge=2,Ee=.25,wt=.08,wn=[[J,1,-0],[ie,1,-0],[ie,1,oe],[J,1,oe],[et,.3,oe],[J,.3,oe],[ie,.6,oe],[ie,.6,-0],[et,.3,-0],[J,.3,-0],[he,0,Ee],[he,ge,Ee],[he,ge,-.25],[he,0,-.25],[_e,ge,-.25],[_e,0,-.25],[_e,ge,Ee],[_e,0,Ee]],pn=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],vn=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function qe(t,e,n=0,a=25){const r=wn.map(s=>[s[0],s[1],s[2]]),o=a/1e3+.01,i=t/1e3;let f=e/2/1e3;return n||(f+=o),[1,2,6,7].forEach(s=>{r[s][0]-=i+wt+o}),[4,8].forEach(s=>{r[s][0]-=-.1}),[0,1,7,8,9].forEach(s=>{r[s][2]-=f}),[2,3,4,5,6].forEach(s=>{r[s][2]+=f}),n?([12,13,14,15].forEach(s=>{r[s][2]=-e/2/1e3}),[10,11,16,17].forEach(s=>{r[s][2]=e/2/1e3})):([12,13,14,15].forEach(s=>{r[s][2]-=f}),[10,11,16,17].forEach(s=>{r[s][2]+=f})),r}function Sn(t){const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");n.fillStyle="red",n.beginPath(),n.arc(32,32,28,0,Math.PI*2),n.fill(),n.fillStyle="white",n.font="bold 36px Arial",n.textAlign="center",n.textBaseline="middle",n.fillText(t,32,32);const a=new Yt(e),r=new Ht({map:a}),o=new _t(r);return o.scale.set(.08,.08,1),o}function tt(t,e,n=!1){const a=new We,r=e.a,o=e.b,i=e.is_streifen,f=e.c_nom,s=new Ae({color:kt,shininess:100,flatShading:!0,transparent:!1}),c=qe(r,o,i,f),l=new Float32Array(c.flat()),u=new Y;u.setAttribute("position",new je(l,3)),u.setIndex(pn),u.computeVertexNormals();const d=new B(u,s);d.castShadow=!0,d.receiveShadow=!0,a.add(d);const g=new Y;g.setAttribute("position",new je(l,3)),g.setIndex(vn),g.computeVertexNormals();const m=new B(g,s);return m.castShadow=!0,m.receiveShadow=!0,a.add(m),n&&c.forEach((E,_)=>{const h=Sn(_.toString());h.position.set(E[0],E[1],E[2]),a.add(h)}),t.add(a),a}function te(){const t=ut(F),e=qe(t.a,t.b,t.is_streifen,t.c_nom),n=[e[0],e[1],e[2],e[3]];return{centerX:-t.a/2/1e3-wt+J,centerY:n[0][1],centerZ:(n[0][2]+n[1][2]+n[2][2]+n[3][2])/4}}function nt(t,e){e&&(e.traverse(n=>{n instanceof B&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),t.remove(e))}let Xe=!0,ze=0,ce=0,pe=null,le=null;function xn(t,e,n){if(!t||!e)return;const a=new w;a.subVectors(e.target,t.position),a.normalize();const o=t.position.distanceTo(e.target)*(1-n),i=a.clone().multiplyScalar(o);t.position.add(i),e.update()}const yn=.01,Ne=[new w(-2.1247554456236646,1.8348909616249438,-.9418251993957858),new w(-2.298436211128349,2.1141465425086055,.0593750739688058),new w(-1.8215114290760264,1.8160993918937776,1.1472099754138583)];function bn(){const t=te();return new w(t.centerX,t.centerY,t.centerZ)}function An(t,e,n){if(!Xe||!e)return;ce===0&&(ce=t,pe=e.position.clone(),le=n.target.clone());const a=t-ce,r=pe||Ne[ze],o=(ze+1)%Ne.length,i=Ne[o],s=r.distanceTo(i)/yn*1e3,c=bn();if(a<s){const l=a/s;e.position.lerpVectors(r,i,l),n&&le&&(n.target.lerpVectors(le,c,l),n.update())}else ze=o,ce=t,pe=null,le=c.clone()}function Mn(t,e,n){const a=r=>{r.preventDefault();let o=1;switch(r.deltaMode){case 2:o=1+r.deltaY*.025;break;case 1:o=1+r.deltaY*.01;break;default:o=1+r.deltaY*25e-5;break}xn(e,n,o)};return t.domElement.addEventListener("wheel",a,{passive:!1}),()=>{t.domElement.removeEventListener("wheel",a)}}function Tn(t){const e=()=>{Xe=!1},n=()=>{Xe=!0,ce=0,pe=null,le=null};return t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",n),()=>{t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",n)}}function Ln(){const t=new Ut;return t.background=new ht(10526880),t.fog=new Zt(10526880,10,500),t}function Rn(t){const e=new Vt({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,e.shadowMap.type=Wt,t.appendChild(e.domElement),e}function zn(t){const e=new B(new qt(1e3,1e3),new Ae({color:13355979,depthWrite:!1}));e.rotation.x=-Math.PI/2,e.position.y=-10,e.receiveShadow=!0,t.add(e)}function Nn(t){return t.add(new Kt(9272444,4802918,3)),Gn(t,0,500,500,16777215,2)}function Gn(t,e,n,a,r,o){const i=new Jt(r,o);i.position.set(e,n,a),i.castShadow=!0;const f=1e3;return i.shadow.camera.left=-1e3,i.shadow.camera.right=f,i.shadow.camera.top=f,i.shadow.camera.bottom=-1e3,i.shadow.camera.near=1,i.shadow.camera.far=2e3,i.shadow.mapSize.width=4096,i.shadow.mapSize.height=4096,i.shadow.radius=1,i.shadow.bias=-5e-4,t.add(i),t.add(i.target),i}const In=400,Dn=400,Cn=10,Bn=.4,Pn=.4,On=.01;function at(t,e){const n=new We,a=new Ae({color:Qt,shininess:100,specular:2236962}),r=(e.a-In)/1e3,o=(e.b-Dn)/1e3,i=(e.t-Cn)*2/1e3,f=Bn+r,s=Pn+o,c=On+i,l=new B(new jt(f,c,s),a),u=te();l.position.set(u.centerX,u.centerY+c/2,u.centerZ),l.castShadow=!0,l.receiveShadow=!0,n.add(l),t.add(n),l.geometry.computeBoundingBox();const d=new en;d.setFromObject(l);const g=u.centerY;return{group:n,boundingBox:d,height:g,lengthDiffX:r,lengthDiffZ:o}}function rt(t,e){e&&(e.traverse(n=>{n instanceof B&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),t.remove(e))}function st(t,e){const n=new We;if(!e.is_dorn)return t.add(n),n;const a=new Ae({color:tn,flatShading:!1}),r=(50+e.b*.2)/1e3,o=e.d_b/2/1e3,i=te(),f=e.n_b;for(let s=0;s<f;s++){const c=new B(new nn(o,o,r,16),a);let l=0;if(f===2){const u=e.b/1e3;l=s===0?u/5:-u/5}c.position.set(i.centerX,i.centerY+r/2,i.centerZ+l),c.castShadow=!0,c.receiveShadow=!0,n.add(c)}return t.add(n),n}function ot(t,e){e&&(e.traverse(n=>{n instanceof B&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(a=>a.dispose()):n.material.dispose())}),t.remove(e))}let W=[],V=[],Ge=null,ee=null;const we=11765,$e=.012,Fe=2e-4;async function pt(){return Ge||ee||(ee=new Promise((t,e)=>{new an().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",a=>{Ge=a,ee=null,t(a)},void 0,a=>{ee=null,e(a)})}),ee)}async function Ie(t,e,n,a,r,o=0,i=0){try{const f=await pt(),s=new Pe(r,{font:f,size:$e,depth:Fe,curveSegments:12,bevelEnabled:!0,bevelThickness:3e-4,bevelSize:2e-4,bevelOffset:0,bevelSegments:3});s.computeBoundingBox();const c=s.boundingBox;if(c){const _=-(c.max.x-c.min.x)/2,h=-(c.max.y-c.min.y)/2;s.translate(_,h,0)}const l=new Oe({color:16711680,metalness:.3,roughness:.4}),u=new B(s,l),d=new w(n[0]-e[0],0,n[2]-e[2]).normalize(),g=new w(-d.z,0,d.x),m=(e[0]+n[0])/2+o+g.x*a,E=(e[2]+n[2])/2+i+g.z*a;u.position.set(m,e[1]+.001,E),u.rotation.x=-Math.PI/2,u.rotation.z=Math.atan2(d.z,d.x)+Math.PI,t.add(u),W.push(u)}catch(f){console.error("Failed to load font for 3D text:",f)}}function De(t,e,n,a,r,o=.05){const i=new w(-a.z,0,a.x).normalize(),f=new Y().setFromPoints([new w(e.x-i.x*o/2,e.y,e.z-i.z*o/2),new w(e.x+i.x*o/2,e.y,e.z+i.z*o/2)]),s=new H(f,r);t.add(s),W.push(s);const c=new Y().setFromPoints([new w(n.x-i.x*o/2,n.y,n.z-i.z*o/2),new w(n.x+i.x*o/2,n.y,n.z+i.z*o/2)]),l=new H(c,r);t.add(l),W.push(l)}function ke(t){W.forEach(e=>{t.remove(e),e instanceof B&&(e.geometry&&e.geometry.dispose(),e.material instanceof K&&e.material.dispose()),e instanceof H&&(e.geometry&&e.geometry.dispose(),e.material instanceof K&&e.material.dispose()),e instanceof _t&&e.material instanceof K&&e.material.dispose()}),W=[]}function it(t){V.forEach(e=>{t.remove(e),e instanceof B&&(e.geometry&&e.geometry.dispose(),e.material instanceof K&&e.material.dispose()),e instanceof H&&(e.geometry&&e.geometry.dispose(),e.material instanceof K&&e.material.dispose()),e instanceof Be&&(e.line&&e.line.geometry&&e.line.geometry.dispose(),e.line&&e.line.material instanceof K&&e.line.material.dispose(),e.cone&&e.cone.geometry&&e.cone.geometry.dispose(),e.cone&&e.cone.material instanceof K&&e.cone.material.dispose())}),V=[]}async function ct(t,e=new w(0,0,0)){const r=new gt({color:new ht(we)}),o=we;e.z=e.z-.035;const i=new w(e.x-.06,e.y,e.z),f=new Y().setFromPoints([e,i]),s=new H(f,r);t.add(s),V.push(s);const c=new w(-1,0,0),l=new Be(c,i,.03,o,.03*.5,.03*.3);t.add(l),V.push(l);const u=new w(e.x,e.y,e.z-.06),d=new Y().setFromPoints([e,u]),g=new H(d,r);t.add(g),V.push(g);const m=new w(0,0,-1),E=new Be(m,u,.03,o,.03*.5,.03*.3);t.add(E),V.push(E);try{const _=await pt(),h=new Pe("x (Bauwerkshauptachse)",{font:_,size:$e,depth:Fe,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});h.computeBoundingBox();const p=h.boundingBox;if(p){const b=-(p.max.x-p.min.x)/2,X=-(p.max.y-p.min.y)/2;h.translate(b,X,0)}const M=new Oe({color:we,metalness:.3,roughness:.4}),y=new B(h,M);y.position.set(e.x-.06*1-.05,e.y+.001,e.z-.02),y.rotation.x=-Math.PI/2,y.rotation.z=0,t.add(y),V.push(y);const L=new Pe("y",{font:_,size:$e,depth:Fe,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});L.computeBoundingBox();const S=L.boundingBox;if(S){const b=-(S.max.x-S.min.x)/2,X=-(S.max.y-S.min.y)/2;L.translate(b,X,0)}const R=new Oe({color:we,metalness:.3,roughness:.4}),O=new B(L,R);O.position.set(e.x-.02,e.y+.001,e.z-.06*1.1),O.rotation.x=-Math.PI/2,O.rotation.z=0,t.add(O),V.push(O)}catch(_){console.error("Failed to create 3D text for coordinate system:",_)}}async function lt(t){ke(t);const e=ut(F),n=qe(e.a,e.b,e.is_streifen,e.c_nom),a=te(),r=new gt({color:16711680});let o=e.c_nom/1e3+.01;e.is_streifen===1&&(o=0);const i=.01,f=e.b/1e3,s=e.a/1e3;if(e.is_streifen===0){const x=(n[1][0]+n[2][0])/2,G=n[1][1],j=(n[1][2]+n[2][2])/2,z=new w(x-i-o,G,j-f/2),I=new w(x-i-o,G,j+f/2),q=new Y().setFromPoints([z,I]),U=new H(q,r);t.add(U),W.push(U);const C=new w().subVectors(I,z).normalize();De(t,z,I,C,r),await Ie(t,[z.x,z.y,z.z],[I.x,I.y,I.z],.02,`b = ${e.b} mm`,0,0)}const c=a.centerX,l=n[0][1],u=(n[0][2]+n[1][2])/2,d=new w(c-s/2,l,u-i-o),g=new w(c+s/2,l,u-i-o),m=new Y().setFromPoints([d,g]),E=new H(m,r);t.add(E),W.push(E);const _=new w().subVectors(g,d).normalize();De(t,d,g,_,r),await Ie(t,[d.x,d.y,d.z],[g.x,g.y,g.z],-.02,`a = ${e.a} mm`,0,0);const h=.04,p=a.centerX-e.a/2e3,M=a.centerY,y=a.centerZ+e.b/2e3+h+o,L=e.c_nom/1e3+.01,S=new w(p,M,y),R=new w(p-L,M,y),O=new Y().setFromPoints([S,R]),b=new H(O,r);t.add(b),W.push(b);const X=new w().subVectors(R,S).normalize();De(t,S,R,X,r),await Ie(t,[S.x,S.y,S.z],[R.x,R.y,R.z],-.05,"cnom + 10 mm",0,0)}var Xn=be('<div class="scene-container svelte-1fa0x8l"><!></div>');function ta(t,e){ne(e,!1),D(e,"autoRotate",8,!1);let n=D(e,"showTooltip",8,!0),a;const r=.05,o=.001,i=.04,f=new w(-3.6366326492655574,2.6403115127435544,-1.3328222766488578);let s=P(),c,l,u,d,g,m,E,_,h,p,M,y,L;It(async()=>{c=Ln(),u=Rn(v(s)),zn(c),h=Nn(c),l=rn(35),l.position.copy(f),L=F.subscribe(async C=>{if(a=C,c&&E!==void 0){m&&nt(c,m),E&&rt(c,E),_&&ot(c,_),ke(c),it(c),m=tt(c,a,!1),E=at(c,a).group,_=st(c,a),await lt(c);const N=te();let se=Math.max(a.c_nom/1e3,.03);a.is_streifen===1&&(se=.1);const de=new w(N.centerX+r+a.a/2e3,N.centerY+o,N.centerZ+i+a.b/2e3+se);await ct(c,de),d&&(d.target.set(N.centerX,N.centerY,N.centerZ),d.update())}});const b=te(),X=[b.centerX,b.centerY,b.centerZ];d=sn(l,u,X),p=Mn(u,l,d),M=Tn(v(s)),m=tt(c,a,!1),E=at(c,a).group,_=st(c,a),await lt(c);let G=a.c_nom/1e3;a.is_streifen===1&&(G=.1);const j=new w(b.centerX+r+a.a/2e3,b.centerY+o+.001,b.centerZ+i+a.b/2e3+G);await ct(c,j);const I=1e3/30;let q=0;const U=C=>{y=requestAnimationFrame(U);const $=C-q;if(!($<I)){if(q=C-$%I,An(C,l,d),on(d),h&&l){const N=new w(0,500,500);N.applyQuaternion(l.quaternion),h.position.copy(l.position).add(N),d&&d.target&&(h.target.position.copy(d.target),h.target.updateMatrixWorld())}u.render(c,l)}};if(U(0),await Dt(),v(s)&&v(s)instanceof Element){let C=!1;g=new ResizeObserver(()=>{v(s)&&u&&l&&!C&&(C=!0,requestAnimationFrame(()=>{if(v(s)&&u&&l){const $=v(s).clientWidth,N=v(s).clientHeight;console.log(`Resizing renderer to ${$}x${N}`),l.aspect=$/N,l.updateProjectionMatrix(),u.setSize($,N)}C=!1}))}),g.observe(v(s))}console.log("ShearDeformationScene initialized")}),Ct(()=>{y!==void 0&&cancelAnimationFrame(y),p&&p(),M&&M(),L&&L(),g&&g.disconnect(),d&&d.dispose(),u&&u.dispose(),m&&c&&nt(c,m),E&&c&&rt(c,E),_&&c&&ot(c,_),c&&ke(c),c&&it(c),console.log("ShearDeformationScene destroyed")}),re();var S=Xn(),R=Bt(S);{var O=b=>{cn(b)};Ft(R,b=>{n()&&b(O)})}Pt(S),ln(S,b=>A(s,b),()=>v(s)),Q(t,S),ae()}export{ea as B,T as I,Jn as L,Et as P,ta as S,Qn as a,Kn as b,jn as c,mn as d,dn as e,Z as l,Re as p,F as s};
