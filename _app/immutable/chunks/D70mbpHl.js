const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CS90FlIz.js","./Ckqi-59V.js","./CFSqIZJi.js"])))=>i.map(i=>d[i]);
import"./CWj6FrbW.js";import"./Cj7Y9mmT.js";import{C as Ae,D as Ie,aj as Oe,y as z,w as X,ak as Ge,al as Ve,F as Me,P as ie,O as De,G as ee,L as Ue,A as M,I as Ee,z as Le,av as ke,ax as Be,aT as He,J as Xe,K as Ze}from"./CFSqIZJi.js";import{h as qe}from"./lnX3wxFY.js";import{i as Fe}from"./BeWs9wo8.js";import{p as j,i as We}from"./BKknmLaK.js";import{a as Ke,s as Ye}from"./PXgFDcwA.js";import{F as $e,N as Je,V as S,a as Qe,b as et,G as U,B as N,M as C,S as Pe,c as x,C as tt,d as st,e as nt,L as at,f as it,g as rt,h as ot,i as te,j as R,k as Z,l as re,P as B,m as oe,n as K,o as le,p as lt,r as ct,q as ft,s as ut,t as ht,u as dt,v as mt,w as pt,x as _t,y as gt,z as wt,A as bt,D as vt,T as St}from"./DWqb9k5e.js";import{b as yt}from"./D_Oerkrh.js";import{_ as Tt}from"./Dp1pzeXC.js";const Y={is_voll:1,is_streifen:0,is_punkt:0,f_eigen:8,h:.5,b:4,t:.05,g_a:2,n_gleis:1,is_vollbahn:1,is_regionalbahn:0,is_stadtbahn:0,is_strassenbahn:0,is_user_defined:0,q_v:156,n_streifen:3,b_streifen:.3,n_punkt:2,a_punkt:.1,s_punkt:1};function ce(o){return o.b<6&&o.n_gleis===2?{...o,n_gleis:1}:o}function xt(){const{subscribe:o,set:t,update:e}=Ae(Y),n={subscribe:o,set:s=>{const a=ce(s);t(a),$(a)},update:s=>{e(a=>{const l=s(a),f=ce(l);return $(f),f})},reset:()=>{t(Y),$(Y)},updateField:(s,a)=>{n.update(l=>({...l,[s]:a}))}};return n}const q=xt();function $(o){Tt(()=>import("./CS90FlIz.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>{t.calculate(o)})}var At=Me("<!> <!>",1);function cs(o,t){Ie(t,!1);const[e,n]=Ye(),s=()=>Ke(q,"$massSpringParameterStore",e);let a=j(t,"field",8),l=j(t,"label",8),f=j(t,"helperText",8,""),h=j(t,"step",8,.1),c=j(t,"disabled",8,!1),r=j(t,"min",8,void 0),i=j(t,"max",8,void 0),u=X(),d=X(!1),_=X(""),p=null;function w(v){let F=v,b=!1,y="";r()!==void 0&&v<r()?(F=r(),b=!0,y=`Minimalwert: ${r()}${f()?" "+f():""}`):i()!==void 0&&v>i()&&(F=i(),b=!0,y=`Maximalwert: ${i()}${f()?" "+f():""}`),b&&(z(d,!0),z(_,y),p&&clearTimeout(p),p=setTimeout(()=>{z(d,!1),z(_,"")},3e3)),q.updateField(a(),F)}Oe(()=>(s(),Ge(a())),()=>{z(u,s()[a()])}),Ve(),Fe();var m=At(),g=ie(m);$e(g,{children:(v,F)=>{var b=De(),y=ie(b);qe(y,l),ee(v,b)},$$slots:{default:!0}});var A=Ue(g,2);Je(A,{size:"sm",get step(){return h()},get helperText(){return f()},get disabled(){return c()},get min(){return r()},get max(){return i()},light:!0,get invalid(){return M(d)},get invalidText(){return M(_)},get value(){return M(u)},set value(v){z(u,v)},$$events:{change:()=>w(M(u))},$$legacy:!0}),ee(o,m),Ee(),n()}const fs={F_EIGEN_MIN:.1,F_EIGEN_MAX:100,F_EIGEN_STEP:.5,H_MIN:.2,H_MAX:1.5,H_STEP:.05,B_MIN:2,B_MAX:8,B_STEP:.1,T_MIN:.01,T_MAX:.2,T_STEP:.01,G_A_MIN:0,G_A_MAX:100,G_A_STEP:.1,Q_V_MIN:0,Q_V_MAX:300,Q_V_STEP:1,B_STREIFEN_MIN:.1,B_STREIFEN_MAX:1,B_STREIFEN_STEP:.05,A_PUNKT_MIN:.02,A_PUNKT_MAX:.5,A_PUNKT_STEP:.01,S_PUNKT_MIN:.4,S_PUNKT_MAX:2,S_PUNKT_STEP:.1};function It(o,t,e){if(!o||!t)return;const n=new S;n.subVectors(t.target,o.position),n.normalize();const a=o.position.distanceTo(t.target)*(1-1/e),l=n.clone().multiplyScalar(a);o.position.add(l),t.update()}function Mt(o){return()=>{}}function Et(o,t,e){const n=s=>{s.preventDefault();const a=s.deltaY>0?.95:1.05;It(t,e,a)};return o.domElement.addEventListener("wheel",n,{passive:!1}),()=>{o.domElement.removeEventListener("wheel",n)}}function Lt(o){Qe(o,-10)}function Ft(o){return et(o,{x:0,y:500,z:500})}const T=10,je=.05,P=.6,Pt=.3,k=.01;function fe(o,t,e,n=!1){const s=jt(o,t,e,n),a=zt(o,t,e,n);return{supportPlate:s,carryPlate:a}}function ue(o,t){t&&(he(o,t.supportPlate),he(o,t.carryPlate))}function jt(o,t,e,n=!1){const s=new U,a=t.b*(1+je),l=Pt,f=T,h=new N(a,l,f),c=new C({color:Pe,shininess:100,flatShading:!0,transparent:!1}),r=new x(h,c);r.castShadow=!0,r.receiveShadow=!0,r.position.set(e[0],e[1]-l/2,e[2]+f/2),s.add(r);const i=t.h+l+.1,u=l,d=f,_=f*(1-P),p=new N(u,i,d),w=new N(u,i,_),m=new x(w,c);m.castShadow=!0,m.receiveShadow=!0,m.position.set(e[0]+a/2+u/2,e[1]-l+i/2,e[2]+f*P+1/2*_),s.add(m);const g=new x(p,c);return g.castShadow=!0,g.receiveShadow=!0,g.position.set(e[0]-a/2-u/2,e[1]-l+i/2,e[2]+f/2),s.add(g),o.add(s),s}function Ct(o){const t=document.createElement("canvas");t.width=64,t.height=64;const e=t.getContext("2d");e.fillStyle="red",e.beginPath(),e.arc(32,32,28,0,Math.PI*2),e.fill(),e.fillStyle="white",e.font="bold 36px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText(o,32,32);const n=new tt(t),s=new st({map:n}),a=new nt(s);return a.scale.set(.08,.08,1),a}function zt(o,t,e,n=!1){const s=new U,a=t.b,l=t.h,f=T*(1-P),h=new N(a,l,f),c=new C({color:Pe,shininess:100,flatShading:!0,transparent:!1}),r=new x(h,c);return r.castShadow=!0,r.receiveShadow=!0,r.position.set(e[0],e[1]+k+l/2,e[2]+P*T+f/2),s.add(r),n&&[{pos:new S(e[0]-a/2,e[1]+.1,e[2]),label:"C0"},{pos:new S(e[0]+a/2,e[1]+.1,e[2]),label:"C1"},{pos:new S(e[0]+a/2,e[1]+.1,e[2]+f),label:"C2"},{pos:new S(e[0]-a/2,e[1]+.1,e[2]+f),label:"C3"}].forEach(({pos:u,label:d})=>{const _=Ct(d);_.position.copy(u),s.add(_)}),o.add(s),s}function he(o,t){t&&(t.traverse(e=>{e instanceof x&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),o.remove(t))}const O=.05;function de(o,t,e,n=!1){const s=new U;return t.is_voll===1?Nt(o,s,t,e):t.is_streifen===1?Rt(o,s,t,e):t.is_punkt===1&&Gt(o,s,t,e),o.add(s),{elastomer:s}}function me(o,t){!t||!t.elastomer||(t.elastomer.traverse(e=>{e instanceof x&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),o.remove(t.elastomer))}function Nt(o,t,e,n,s){const a=e.b*(1+je),l=k,f=T*(1-O),h=new N(a,l,f),c=new C({color:3355443,shininess:50,flatShading:!0,transparent:!1}),r=new x(h,c);r.castShadow=!0,r.receiveShadow=!0,r.position.set(n[0],n[1]+l/2,n[2]+O*T+f/2),t.add(r)}const pe=.6;function Ce(o,t,e,n){const s=e-1+2*pe,a=t/s,l=o-t/2,f=a*(pe+(n-1));return l+f}function Rt(o,t,e,n,s){const a=e.n_streifen;if(a<1)return;const l=e.b_streifen,f=k,h=T*(1-O),c=e.b,r=new C({color:3355443,shininess:50,flatShading:!0,transparent:!1});for(let i=1;i<=a;i++){const u=Ce(n[0],c,a,i),d=Ot(r,l,f,h,u,n);t.add(d)}}function Ot(o,t,e,n,s,a){const l=new N(t,e,n),f=new x(l,o);return f.castShadow=!0,f.receiveShadow=!0,f.position.set(s,a[1]+e/2,a[2]+O*T+n/2),f}function Gt(o,t,e,n,s){const a=e.n_punkt;if(a<1)return;const l=Math.sqrt(e.a_punkt),f=k,h=e.b,c=O*T,r=T*(1-O),i=e.s_punkt,u=new C({color:3355443,shininess:50,flatShading:!0,transparent:!1});for(let d=1;d<=a;d++){const _=Ce(n[0],h,a,d);let p=0;for(;p+l/2<=r;){const w=n[2]+c+p+l/2,m=new N(l,f,l),g=new x(m,u);if(g.castShadow=!0,g.receiveShadow=!0,g.position.set(_,n[1]+f/2,w),t.add(g),p+=i,i<=0)break}}}const Vt=/^[og]\s*(.+)?/,Dt=/^mtllib /,Ut=/^usemtl /,kt=/^usemap /,_e=/\s+/,ge=new S,J=new S,we=new S,be=new S,L=new S,H=new rt;function Bt(){const o={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&this.object.fromDeclaration===!1){this.object.name=t,this.object.fromDeclaration=e!==!1;return}const n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,a){const l=this._finalize(!1);l&&(l.inherited||l.groupCount<=0)&&this.materials.splice(l.index,1);const f={index:this.materials.length,name:s||"",mtllib:Array.isArray(a)&&a.length>0?a[a.length-1]:"",smooth:l!==void 0?l.smooth:this.smooth,groupStart:l!==void 0?l.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(h){const c={index:typeof h=="number"?h:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(f),f},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const a=this.currentMaterial();if(a&&a.groupEnd===-1&&(a.groupEnd=this.geometry.vertices.length/3,a.groupCount=a.groupEnd-a.groupStart,a.inherited=!1),s&&this.materials.length>1)for(let l=this.materials.length-1;l>=0;l--)this.materials[l].groupCount<=0&&this.materials.splice(l,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),a}},n&&n.name&&typeof n.clone=="function"){const s=n.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const n=parseInt(t,10);return(n>=0?n-1:n+e/3)*3},parseNormalIndex:function(t,e){const n=parseInt(t,10);return(n>=0?n-1:n+e/3)*3},parseUVIndex:function(t,e){const n=parseInt(t,10);return(n>=0?n-1:n+e/2)*2},addVertex:function(t,e,n){const s=this.vertices,a=this.object.geometry.vertices;a.push(s[t+0],s[t+1],s[t+2]),a.push(s[e+0],s[e+1],s[e+2]),a.push(s[n+0],s[n+1],s[n+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){const s=this.normals,a=this.object.geometry.normals;a.push(s[t+0],s[t+1],s[t+2]),a.push(s[e+0],s[e+1],s[e+2]),a.push(s[n+0],s[n+1],s[n+2])},addFaceNormal:function(t,e,n){const s=this.vertices,a=this.object.geometry.normals;ge.fromArray(s,t),J.fromArray(s,e),we.fromArray(s,n),L.subVectors(we,J),be.subVectors(ge,J),L.cross(be),L.normalize(),a.push(L.x,L.y,L.z),a.push(L.x,L.y,L.z),a.push(L.x,L.y,L.z)},addColor:function(t,e,n){const s=this.colors,a=this.object.geometry.colors;s[t]!==void 0&&a.push(s[t+0],s[t+1],s[t+2]),s[e]!==void 0&&a.push(s[e+0],s[e+1],s[e+2]),s[n]!==void 0&&a.push(s[n+0],s[n+1],s[n+2])},addUV:function(t,e,n){const s=this.uvs,a=this.object.geometry.uvs;a.push(s[t+0],s[t+1]),a.push(s[e+0],s[e+1]),a.push(s[n+0],s[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,s,a,l,f,h,c){const r=this.vertices.length;let i=this.parseVertexIndex(t,r),u=this.parseVertexIndex(e,r),d=this.parseVertexIndex(n,r);if(this.addVertex(i,u,d),this.addColor(i,u,d),f!==void 0&&f!==""){const _=this.normals.length;i=this.parseNormalIndex(f,_),u=this.parseNormalIndex(h,_),d=this.parseNormalIndex(c,_),this.addNormal(i,u,d)}else this.addFaceNormal(i,u,d);if(s!==void 0&&s!==""){const _=this.uvs.length;i=this.parseUVIndex(s,_),u=this.parseUVIndex(a,_),d=this.parseUVIndex(l,_),this.addUV(i,u,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let n=0,s=t.length;n<s;n++){const a=this.parseVertexIndex(t[n],e);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const n=this.vertices.length,s=this.uvs.length;for(let a=0,l=t.length;a<l;a++)this.addVertexLine(this.parseVertexIndex(t[a],n));for(let a=0,l=e.length;a<l;a++)this.addUVLine(this.parseUVIndex(e[a],s))}};return o.startObject("",!1),o}class Ht extends at{constructor(t){super(t),this.materials=null}load(t,e,n,s){const a=this,l=new it(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(f){try{e(a.parse(f))}catch(h){s?s(h):console.error(h),a.manager.itemError(t)}},n,s)}setMaterials(t){return this.materials=t,this}parse(t){const e=new Bt;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const n=t.split(`
`);let s=[];for(let f=0,h=n.length;f<h;f++){const c=n[f].trimStart();if(c.length===0)continue;const r=c.charAt(0);if(r!=="#")if(r==="v"){const i=c.split(_e);switch(i[0]){case"v":e.vertices.push(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3])),i.length>=7?(H.setRGB(parseFloat(i[4]),parseFloat(i[5]),parseFloat(i[6]),ot),e.colors.push(H.r,H.g,H.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]));break;case"vt":e.uvs.push(parseFloat(i[1]),parseFloat(i[2]));break}}else if(r==="f"){const u=c.slice(1).trim().split(_e),d=[];for(let p=0,w=u.length;p<w;p++){const m=u[p];if(m.length>0){const g=m.split("/");d.push(g)}}const _=d[0];for(let p=1,w=d.length-1;p<w;p++){const m=d[p],g=d[p+1];e.addFace(_[0],m[0],g[0],_[1],m[1],g[1],_[2],m[2],g[2])}}else if(r==="l"){const i=c.substring(1).trim().split(" ");let u=[];const d=[];if(c.indexOf("/")===-1)u=i;else for(let _=0,p=i.length;_<p;_++){const w=i[_].split("/");w[0]!==""&&u.push(w[0]),w[1]!==""&&d.push(w[1])}e.addLineGeometry(u,d)}else if(r==="p"){const u=c.slice(1).trim().split(" ");e.addPointGeometry(u)}else if((s=Vt.exec(c))!==null){const i=(" "+s[0].slice(1).trim()).slice(1);e.startObject(i)}else if(Ut.test(c))e.object.startMaterial(c.substring(7).trim(),e.materialLibraries);else if(Dt.test(c))e.materialLibraries.push(c.substring(7).trim());else if(kt.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(r==="s"){if(s=c.split(" "),s.length>1){const u=s[1].trim().toLowerCase();e.object.smooth=u!=="0"&&u!=="off"}else e.object.smooth=!0;const i=e.object.currentMaterial();i&&(i.smooth=e.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}e.finalize();const a=new U;if(a.materialLibraries=[].concat(e.materialLibraries),!(e.objects.length===1&&e.objects[0].geometry.vertices.length===0)===!0)for(let f=0,h=e.objects.length;f<h;f++){const c=e.objects[f],r=c.geometry,i=c.materials,u=r.type==="Line",d=r.type==="Points";let _=!1;if(r.vertices.length===0)continue;const p=new te;p.setAttribute("position",new R(r.vertices,3)),r.normals.length>0&&p.setAttribute("normal",new R(r.normals,3)),r.colors.length>0&&(_=!0,p.setAttribute("color",new R(r.colors,3))),r.hasUVIndices===!0&&p.setAttribute("uv",new R(r.uvs,2));const w=[];for(let g=0,A=i.length;g<A;g++){const v=i[g],F=v.name+"_"+v.smooth+"_"+_;let b=e.materials[F];if(this.materials!==null){if(b=this.materials.create(v.name),u&&b&&!(b instanceof Z)){const y=new Z;re.prototype.copy.call(y,b),y.color.copy(b.color),b=y}else if(d&&b&&!(b instanceof B)){const y=new B({size:10,sizeAttenuation:!1});re.prototype.copy.call(y,b),y.color.copy(b.color),y.map=b.map,b=y}}b===void 0&&(u?b=new Z:d?b=new B({size:1,sizeAttenuation:!1}):b=new C,b.name=v.name,b.flatShading=!v.smooth,b.vertexColors=_,e.materials[F]=b),w.push(b)}let m;if(w.length>1){for(let g=0,A=i.length;g<A;g++){const v=i[g];p.addGroup(v.groupStart,v.groupCount,g)}u?m=new oe(p,w):d?m=new K(p,w):m=new x(p,w)}else u?m=new oe(p,w[0]):d?m=new K(p,w[0]):m=new x(p,w[0]);m.name=c.name,a.add(m)}else if(e.vertices.length>0){const f=new B({size:1,sizeAttenuation:!1}),h=new te;h.setAttribute("position",new R(e.vertices,3)),e.colors.length>0&&e.colors[0]!==void 0&&(h.setAttribute("color",new R(e.colors,3)),f.vertexColors=!0);const c=new K(h,f);a.add(c)}return a}}const Q=1.55,Xt=.01,Zt=-2,ve=.6+2.3/2;async function Se(o,t,e,n=!1){const s=new U,a=new Ht;return new Promise((l,f)=>{a.load("/rails.obj",h=>{const c=T*(1-P),r=e[1]+k+t.h+Xt,i=e[2]+P*T+c/2+Zt;let u;t.n_gleis===2?u=e[0]-t.b/2+ve+Q:u=e[0]+Q,h.position.set(u,r,i);const d=e[2]+P*T,_=new le(new S(0,0,1),-d),p=e[2]+P*T+c,w=new le(new S(0,0,-1),p);if(h.traverse(m=>{if(m instanceof x){const g=new C({color:3355443,shininess:80,specular:4473924,clippingPlanes:[_,w],clipShadows:!0});m.material=g,m.castShadow=!0,m.receiveShadow=!0}}),s.add(h),t.n_gleis===2){const m=h.clone(),g=e[0]+t.b/2-ve+Q;m.position.set(g,r,i),m.traverse(A=>{if(A instanceof x){const v=new C({color:3355443,shininess:80,specular:4473924,clippingPlanes:[_,w],clipShadows:!0});A.material=v,A.castShadow=!0,A.receiveShadow=!0}}),s.add(m)}o.add(s),l({rails:s})},h=>{console.log(h.loaded/h.total*100+"% loaded")},h=>{console.error("Error loading rails.obj:",h),f(h)})})}function ye(o,t){!t||!t.rails||(t.rails.traverse(e=>{e instanceof x&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(n=>n.dispose()):e.material.dispose())}),o.remove(t.rails))}let D=[];const qt=pt*20;function Wt(o,t,e,n,s,a=.05){ft(o,t,e,n,s,a,D)}function ze(o){D=ct(o,D)}async function Kt(o,t,e,n,s){try{const a=await ut(),l=ht(s,a,qt);dt(l);const f=mt(16711680),h=new x(l,f),c=new S(e[0]-t[0],0,e[2]-t[2]).normalize(),r=new S(-c.z,0,c.x),i=(t[0]+e[0])/2+r.x*n,u=(t[2]+e[2])/2+r.z*n;h.position.set(i,t[1]+.001,u),h.rotation.x=-Math.PI/2;const d=Math.atan2(c.z,c.x)+Math.PI;h.rotation.z=d,o.add(h),D.push(h)}catch(a){console.error("Failed to load font for 3D text:",a)}}async function Te(o,t){ze(o);const e=Le(q),n=new Z({color:16711680,linewidth:30}),s=.25,a=e.b,l=t[2]+P*T,f=t[1]+e.h,h=new S(t[0]-a/2,f,l-s),c=new S(t[0]+a/2,f,l-s),r=new te().setFromPoints([h,c]),i=new lt(r,n);o.add(i),D.push(i);const u=new S().subVectors(c,h).normalize();Wt(o,h,c,u,n,.2),await Kt(o,[h.x,h.y,h.z],[c.x,c.y,c.z],-.25,`b = ${e.b} m`)}function Yt(){const{subscribe:o,set:t,update:e}=Ae(null);return{subscribe:o,set:t,update:e,saveState:(n,s)=>{t({position:n,target:s})},clear:()=>t(null)}}const xe=Yt();var $t=Me('<div class="scene-container svelte-7vnivq"><!></div>');function us(o,t){Ie(t,!1),j(t,"autoRotate",8,!1);let e=j(t,"showTooltip",8,!0),n;const s=[0,2,0],a=P*T/2,l=new S(s[0],s[1],s[2]+a),f=10,h=new S(s[0]+f,s[1]+f,s[2]-f);let c=X(),r,i,u,d,_,p,w,m,g,A,v,F,b;ke(async()=>{r=_t(),u=gt(M(c)),Lt(r),p=Ft(r),i=wt(35);const I=Le(xe);I?i.position.set(I.position.x,I.position.y,I.position.z):i.position.copy(h),b=q.subscribe(async E=>{n=E,r&&w!==void 0&&(w&&ue(r,w),m&&me(r,m),w=fe(r,n,s,!1),m=de(r,n,s,!1),g&&ye(r,g),g=await Se(r,n,s,!1),await Te(r,s))});let W;I?W=[I.target.x,I.target.y,I.target.z]:W=[l.x,l.y,l.z],d=bt(i,u,W),A=Et(u,i,d),v=Mt(M(c)),w=fe(r,n,s,!1),m=de(r,n,s,!1),Se(r,n,s,!1).then(E=>{g=E}).catch(E=>{console.error("Failed to load rails:",E)}),Te(r,s);const se=1e3/30;let ne=0;const ae=E=>{F=requestAnimationFrame(ae);const G=E-ne;if(!(G<se)){if(ne=E-G%se,vt(d),p&&i){const V=new S(0,500,500);V.applyQuaternion(i.quaternion),p.position.copy(i.position).add(V),d&&d.target&&(p.target.position.copy(d.target),p.target.updateMatrixWorld())}u.render(r,i)}};if(ae(0),await Be(),M(c)&&M(c)instanceof Element){let E=!1;_=new ResizeObserver(()=>{M(c)&&u&&i&&!E&&(E=!0,requestAnimationFrame(()=>{if(M(c)&&u&&i){const G=M(c).clientWidth,V=M(c).clientHeight;i.aspect=G/V,i.updateProjectionMatrix(),u.setSize(G,V)}E=!1}))}),_.observe(M(c))}}),He(()=>{i&&d&&d.target&&xe.saveState({x:i.position.x,y:i.position.y,z:i.position.z},{x:d.target.x,y:d.target.y,z:d.target.z}),F!==void 0&&cancelAnimationFrame(F),A&&A(),v&&v(),b&&b(),_&&_.disconnect(),d&&d.dispose(),u&&u.dispose(),w&&r&&ue(r,w),m&&r&&me(r,m),g&&r&&ye(r,g),r&&ze(r)}),Fe();var y=$t(),Ne=Xe(y);{var Re=I=>{St(I,{rightOffset:0})};We(Ne,I=>{e()&&I(Re)})}Ze(y),yt(y,I=>z(c,I),()=>M(c)),ee(o,y),Ee()}export{fs as I,us as M,cs as P,q as m,$ as p};
