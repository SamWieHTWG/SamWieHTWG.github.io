import{i as It,b8 as Rt,h as Gt,J as Dt,I as zt,w as Ne,l as Ie,r as he,ae as de,k as w,m as G,ag as Re,u as F,G as Z,ab as ge,B as W,v as Ge,Y as _e,C as De,x as O,o as M,y as Ee,an as Ct,ap as Pt,aK as $t,z as nt,A as at,ah as Bt}from"./95-tTr9P.js";import"./CWj6FrbW.js";import"./2x_3pxqx.js";import{i as pe}from"./Cg3LIffo.js";import{p as ne,i as kt}from"./DIGU72wg.js";import{a as ze,s as Ce}from"./B-cTme2W.js";import{t as D}from"./Bw086dH9.js";import"./uriF5xkT.js";import"./DbhtpNJn.js";import{G as et,a8 as Ot,a9 as ot,S as Xt,aa as Ft,i as Ut,B as re,d as st,j as X,e as Vt,O as Ht,P as Yt,Q as Zt,V as v,R as wt,Z as me,C as Wt,ab as Me,ac as it,a0 as At,a1 as We,a4 as Kt,a2 as Ke,a3 as je,_ as jt,ad as qt,$ as Jt,ae as Qt,af as er,ag as tr,ah as Tt,J as Pe,F as $e,N as Be,f as rr,h as nr,ai as ar,aj as or,ak as sr,M as ir,al as lr,am as cr,an as ur,ao as fr,K as mr,m as dr,n as _r,o as hr,q as gr,x as Er,D as pr,E as Sr}from"./DdVNfCeo.js";import{f as ke}from"./Qz49D2iM.js";import{b as br}from"./DuOoQ1F7.js";function pn(e,t,r=t){var n=It();Rt(e,"input",a=>{var l=a?e.defaultValue:e.value;if(l=Oe(e)?Xe(l):l,r(l),n&&l!==(l=t())){var i=e.selectionStart,c=e.selectionEnd;e.value=l??"",c!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(c,e.value.length))}}),(Gt&&e.defaultValue!==e.value||Dt(t)==null&&e.value)&&r(Oe(e)?Xe(e.value):e.value),zt(()=>{var a=t();Oe(e)&&a===Xe(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Oe(e){var t=e.type;return t==="number"||t==="range"}function Xe(e){return e===""?null:+e}const Fe=(e,t,r)=>{if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];const n=t.findIndex(a=>a>=e)-1;return r[n]+(r[n+1]-r[n])*((e-t[n])/(t[n+1]-t[n]))},Mr={s_65:{hersteller_name:"Calenberg Ingenieure",product_name:"Compactlager S 65",check:(e,t)=>(e>=70||t>=100&&e>=50)&&t>=70,thicknesses:e=>[10,15,20,25,30].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=6.25?4.03*Math.pow(e,1.16):33.9,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},s_70:{hersteller_name:"Calenberg Ingenieure",product_name:"Compactlager S 70",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=5?6.99*e:34.95,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},esz_100:{hersteller_name:"ESZ Wilfried Becker",product_name:"Typ 200",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20,25,30].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<2.33?5.3805*e-.6536:e<=2.5?10.635*e-12.89:e<=5?8.4004*e-7.3293:34.7,rot_b_rule:(e,t)=>Math.min(450*e/t,48),rot_res_rule:48,bohr_rule:!0,"Nachweis erfolgreich t":[]},esz_100_comp:{hersteller_name:"ESZ Wilfried Becker",product_name:"Typ 200 Composite",check:(e,t)=>e>=90&&e<=600&&t>=90&&t<=600,thicknesses:[15,30,35,40,45,50,55,60,65],sigma_rd_rule:e=>e<=3.75?17.17*e-11.32:e<=4?35.94*e-81.67:e<=4.5?1.17*e+57.39:62.6,rot_b_rule:(e,t)=>Math.min(300*e/t,40),rot_res_rule:40,bohr_rule:!0,"Nachweis erfolgreich t":[]},flaechenloch_typ_z:{hersteller_name:"Calenberg Ingenieure",product_name:"Fl채chenlochlager Typ Z",check:(e,t)=>e>=120&&e<=600&&t>=120&&t<=600,thicknesses:[15,24,33,42,51],sigma_rd_rule:e=>35,rot_b_rule:(e,t)=>e===15?Math.min(200*e/t,40):Math.min(350*e/t,43),rot_res_rule:e=>e===15?40:43,bohr_rule:!0,"Nachweis erfolgreich t":[]},conti_60:{hersteller_name:"Continental (ContiTech)",product_name:"Contitan 60",check:(e,t)=>e>=70&&t>=70,thicknesses:[10,20,30],sigma_rd_rule:e=>e<=5?.315*Math.pow(e,2)+4.035*e:28.05,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},leschu_n15:{hersteller_name:"Leschuplast GLT",product_name:"Typ N15",check:(e,t)=>e>=70&&t>=70,thicknesses:[10,15,20],sigma_rd_rule:e=>e<1.88?3.29*e+1.46:e<2.5?2.58*e+2.79:e<3.5?3.34*e+.88:e<3.75?12.21*e-30.17:e<5?3.15*e+3.81:e<=10?1.66*e+11.29:27.89,rot_b_rule:(e,t)=>Math.min(450*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_3000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 3000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Fe(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[2.4,2.4,4.4,5.74,6.88,7.58,8.01,8.29,8.47,8.59,8.68,8.75,8.8]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_6000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 6000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Fe(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[5,5,9.16,11.82,14.23,15.72,16.64,17.23,17.62,17.89,18.09,18.23,18.33]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},sylodyn_12000:{hersteller_name:"Getzner Werkstoffe",product_name:"Sylodyn HRB 12000",check:(e,t)=>e>=70&&e<=1500&&t>=70,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>Fe(e,[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6],[5.76,5.76,12.72,20.9,30.28,40.88,52.68,52.68,52.68,52.68,52.68,52.68,52.68]),rot_b_rule:(e,t)=>Math.min(500*e/t,54),rot_res_rule:54,bohr_rule:!1,"Nachweis erfolgreich t":[]},isoldyn_3000:{hersteller_name:"HBT-ISOL",product_name:"ISOLDYN 3000",check:(e,t)=>(e>=70||e>=50)&&t>=100,thicknesses:e=>[12.5,25].filter(t=>t<=e/5&&t>=e/30),sigma_rd_rule:e=>e<=6?3.96*Math.pow(e,.36):7.55,rot_b_rule:(e,t)=>Math.min(300*e/t,40),rot_res_rule:40,bohr_rule:!1,"Nachweis erfolgreich t":[]},matteco_elr08:{hersteller_name:"matteco",product_name:"ELR 8",check:(e,t)=>e>=70&&t>=70,thicknesses:e=>[10,15,20].filter(t=>t===10||e>=70),sigma_rd_rule:e=>e<=4.17?.422*Math.exp(.698*e):7.75,rot_b_rule:(e,t)=>Math.min(200*e/t,16),rot_res_rule:16,bohr_rule:!0,"Nachweis erfolgreich t":[]},matteco_elr18:{hersteller_name:"matteco",product_name:"ELR 18",check:(e,t)=>e>=70&&t>=70,thicknesses:[10],sigma_rd_rule:e=>e<=4.5?1.28*Math.pow(e,1.25):8.4,rot_b_rule:(e,t)=>Math.min(200*e/t,20),rot_res_rule:20,bohr_rule:!0,"Nachweis erfolgreich t":[]}};function vr(e){const{is_ortbeton:t,a:r,b:n,is_dorn:a,is_wirksamgeschlossen:l,d_b:i,n_b:c,ff_zd:s,v_x:o,alpha_y:u,c_nom:m,is_streifen:f}=e,g=r*n;let E;if(a===0)E=g;else{E=Math.round(g-c*Math.PI*(i/2)**2);const z=Math.round((1-E/g)*100)/100;z>.1&&console.warn(`Bohrungsfl채che 체berschreitet 10% der Lagerfl채che! ratio_bohr=${z}`)}const h=Math.round(1e3*s/E*10)/10,_=10;let d=Math.round(.625/r*1e3*10)/10;t===0&&(d*=.5);const p=d+_,S=u+p,T=r+(m+10)+25;let N;f===0&&(N=n+2*(m+10));const A=[];for(const[z,L]of Object.entries(Mr))if(L.check(r,n)){const K=typeof L.thicknesses=="function"?L.thicknesses(r):L.thicknesses;for(const y of K){let C;!a||l?C=Math.round(g/(2*y*(r+n))*1e3)/1e3:C=Math.round((g-.25*Math.PI*c*y**2)/(2*y*(r+n)+y*Math.PI*c*i)*1e3)/1e3;const U=L.sigma_rd_rule(C),B=L.rot_b_rule(y,r),k=L.rot_res_rule,V=.6*(y-2),j=h/U,I=o/V,H=S/B,R=Math.round(1.5*h*n*y/1e3*1e3)/1e3,Se=Math.round(1.5*h*r*y/1e3*1e3)/1e3,be=a?L.bohr_rule:!0,Nt=j<=1&&I<=1&&H<=1&&be;A.push({lagerType:z,manufacturer:L.hersteller_name,productName:L.product_name,thickness:y,s:C,sigma_rd:U,alpha_y_max:B,alpha_y_ges:S,alpha_res_max:k,v_x_max:V,sigma_nachw:j,v_x_nachw:I,rot_b_nachw:H,querzug_x:R,querzug_y:Se,passed:Nt,bohr_nachw:be,l_xmin:T,l_ymin:N,bohr_rule:L.bohr_rule})}}return A}const wr=Ne([]),Ar=Ne(null),le=0,te=-.8,ce=-.8,lt=(te+ce)/2,ve=.2,we=te,Ae=2,Te=.25,xt=.08,Tr=[[te,1,-0],[ce,1,-0],[ce,1,le],[te,1,le],[lt,.3,le],[te,.3,le],[ce,.6,le],[ce,.6,-0],[lt,.3,-0],[te,.3,-0],[we,0,Te],[we,Ae,Te],[we,Ae,-.25],[we,0,-.25],[ve,Ae,-.25],[ve,0,-.25],[ve,Ae,Te],[ve,0,Te]],xr=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],yr=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function tt(e,t,r=0,n=25){const a=Tr.map(s=>[s[0],s[1],s[2]]),l=n/1e3+.01,i=e/1e3;let c=t/2/1e3;return r||(c+=l),[1,2,6,7].forEach(s=>{a[s][0]-=i+xt+l}),[4,8].forEach(s=>{a[s][0]-=-.1}),[0,1,7,8,9].forEach(s=>{a[s][2]-=c}),[2,3,4,5,6].forEach(s=>{a[s][2]+=c}),r?([12,13,14,15].forEach(s=>{a[s][2]=-t/2/1e3}),[10,11,16,17].forEach(s=>{a[s][2]=t/2/1e3})):([12,13,14,15].forEach(s=>{a[s][2]-=c}),[10,11,16,17].forEach(s=>{a[s][2]+=c})),a}function ct(e,t=1){e.computeVertexNormals();const r=e.attributes.position,n=e.attributes.normal,a=[],l=r.count;for(let i=0;i<l;i++){const c=r.getX(i),s=r.getY(i),o=r.getZ(i),u=Math.abs(n.getX(i)),m=Math.abs(n.getY(i)),f=Math.abs(n.getZ(i));u>=m&&u>=f?a.push(o*t,s*t):m>=u&&m>=f?a.push(c*t,o*t):a.push(c*t,s*t)}e.setAttribute("uv",new Vt(a,2))}function Lr(e){const t=document.createElement("canvas");t.width=64,t.height=64;const r=t.getContext("2d");r.fillStyle="red",r.beginPath(),r.arc(32,32,28,0,Math.PI*2),r.fill(),r.fillStyle="white",r.font="bold 36px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(e,32,32);const n=new Ht(t),a=new Yt({map:n}),l=new Zt(a);return l.scale.set(.08,.08,1),l}function ut(e,t,r=!1){const n=new et,a=t.a,l=t.b,i=t.is_streifen,c=t.c_nom,o=new Ot().load("/texture/concrete1.jpg");o.wrapS=ot,o.wrapT=ot,o.repeat.set(1,1),o.colorSpace=Xt;const u=new Ft({map:o,color:Ut,roughness:.9,metalness:0,flatShading:!1}),m=tt(a,l,i,c),f=new Float32Array(m.flat());let g=new re;g.setAttribute("position",new st(f,3)),g.setIndex(xr),g=g.toNonIndexed(),ct(g,1);const E=new X(g,u);E.castShadow=!0,E.receiveShadow=!0,n.add(E);let h=new re;h.setAttribute("position",new st(f,3)),h.setIndex(yr),h=h.toNonIndexed(),ct(h,1);const _=new X(h,u);return _.castShadow=!0,_.receiveShadow=!0,n.add(_),r&&m.forEach((d,p)=>{const S=Lr(p.toString());S.position.set(d[0],d[1],d[2]),n.add(S)}),e.add(n),n}function ie(){const e=Ie($),t=tt(e.a,e.b,e.is_streifen,e.c_nom),r=[t[0],t[1],t[2],t[3]];return{centerX:-e.a/2/1e3-xt+te,centerY:r[0][1],centerZ:(r[0][2]+r[1][2]+r[2][2]+r[3][2])/4}}function ft(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(n=>n.dispose()):r.material.dispose())}),e.remove(t))}let J=[],Y=[];function Nr(){return[...J,...Y]}let ye=null,rt=0;const qe=Kt;async function Ue(e,t,r,n,a,l=0,i=0,c=!1){try{const s=await At(),o=We(a,s,qe);Ke(o);const u=je(16711680),m=new X(o,u),f=new v(r[0]-t[0],0,r[2]-t[2]).normalize(),g=new v(-f.z,0,f.x),E=(t[0]+r[0])/2+l+g.x*n,h=(t[2]+r[2])/2+i+g.z*n;m.position.set(E,t[1]+.001,h),m.rotation.x=-Math.PI/2;const _=Math.atan2(f.z,f.x)+Math.PI;m.rotation.z=_,c&&(ye=m,rt=_),e.add(m),J.push(m)}catch(s){console.error("Failed to load font for 3D text:",s)}}function Je(e){if(ye){const t=e?Math.PI:0;ye.rotation.z=rt+t}}function Ve(e,t,r,n,a,l=.05){Jt(e,t,r,n,a,l,J)}function Qe(e){J=jt(e,J),ye=null,rt=0}function mt(e){Y=qt(e,Y)}async function dt(e,t=new v(0,0,0)){const a=new wt({color:new Wt(Me)}),l=Me;t.z=t.z-.035;const i=new v(t.x-.06,t.y,t.z),c=new re().setFromPoints([t,i]),s=new me(c,a);e.add(s),Y.push(s);const o=new v(-1,0,0),u=new it(o,i,.03,l,.03*.5,.03*.3);e.add(u),Y.push(u);const m=new v(t.x,t.y,t.z-.06),f=new re().setFromPoints([t,m]),g=new me(f,a);e.add(g),Y.push(g);const E=new v(0,0,-1),h=new it(E,m,.03,l,.03*.5,.03*.3);e.add(h),Y.push(h);try{const _=await At(),d=We(D("shearDeformation.scene.axisLabel.x"),_,qe);Ke(d);const p=je(Me),S=new X(d,p);S.position.set(t.x-.06*1-.05,t.y+.001,t.z-.02),S.rotation.x=-Math.PI/2,S.rotation.z=0,e.add(S),Y.push(S);const T=We("y",_,qe);Ke(T);const N=je(Me),A=new X(T,N);A.position.set(t.x-.02,t.y+.001,t.z-.06*1.1),A.rotation.x=-Math.PI/2,A.rotation.z=0,e.add(A),Y.push(A)}catch(_){console.error("Failed to create 3D text for coordinate system:",_)}}async function _t(e){Qe(e);const t=Ie($),r=tt(t.a,t.b,t.is_streifen,t.c_nom),n=ie(),a=new wt({color:16711680});let l=t.c_nom/1e3+.01;t.is_streifen===1&&(l=0);const i=.01,c=t.b/1e3,s=t.a/1e3;if(t.is_streifen===0){const y=(r[1][0]+r[2][0])/2,C=r[1][1],U=(r[1][2]+r[2][2])/2,B=new v(y-i-l,C,U-c/2),k=new v(y-i-l,C,U+c/2),V=new re().setFromPoints([B,k]),j=new me(V,a);e.add(j),J.push(j);const I=new v().subVectors(k,B).normalize();Ve(e,B,k,I,a),await Ue(e,[B.x,B.y,B.z],[k.x,k.y,k.z],.02,`b = ${t.b} mm`,0,0)}const o=n.centerX,u=r[0][1],m=(r[0][2]+r[1][2])/2,f=new v(o-s/2,u,m-i-l),g=new v(o+s/2,u,m-i-l),E=new re().setFromPoints([f,g]),h=new me(E,a);e.add(h),J.push(h);const _=new v().subVectors(g,f).normalize();Ve(e,f,g,_,a),await Ue(e,[f.x,f.y,f.z],[g.x,g.y,g.z],-.02,`a = ${t.a} mm`,0,0,!0);const d=.04,p=n.centerX-t.a/2e3,S=n.centerY,T=n.centerZ+t.b/2e3+d+l,N=t.c_nom/1e3+.01,A=new v(p,S,T),z=new v(p-N,S,T),L=new re().setFromPoints([A,z]),x=new me(L,a);e.add(x),J.push(x);const K=new v().subVectors(z,A).normalize();Ve(e,A,z,K,a),await Ue(e,[A.x,A.y,A.z],[z.x,z.y,z.z],-.05,"cnom + 100 mm",0,0)}let se=!0,He=0,ue=0,Q=null,q=null;function Ir(e,t,r){if(!e||!t)return;const n=new v;n.subVectors(t.target,e.position),n.normalize();const l=e.position.distanceTo(t.target)*(1-r),i=n.clone().multiplyScalar(l);e.position.add(i),t.update()}const Rr=.05,xe=1.4,ht=[new v(-2.1247554456236646,xe,-.9418251993957858),new v(-2.298436211128349,xe,.0593750739688058),new v(-1.8215114290760264,xe,1.1472099754138583)];function Gr(){const e=Ie($);return(e.a+e.b)/1500}function Dr(){const e=Le(),t=Gr(),r=[];for(let n=0;n<ht.length;n++){const a=ht[n],l=new v(e.x+a.x*t,xe,e.z+a.z*t);r.push(l)}return r}let ae=[];function Le(){const e=ie();return new v(e.centerX,e.centerY,e.centerZ)}let P=null,ee=!1,oe=null,fe=0;const gt=1e3;function zr(){ae=[],P=null,ee=!1,oe=null}function Cr(){const e=Le(),t=Ie($),r=Nr();if(r.length===0){const o=Math.max(t.a,t.b)/1e3*3;return new v(e.x,e.y+o,e.z)}let a=Math.max(t.a,t.b)/1e3*2;const l=20;let i=0;const c=new Qt(35,1,.01,1e3);for(;i<l;){c.position.set(e.x,e.y+a,e.z),c.lookAt(e),c.updateMatrixWorld(),c.updateProjectionMatrix();const s=new er,o=new tr;o.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),s.setFromProjectionMatrix(o);let u=!0;for(const m of r){m.updateMatrixWorld(!0);const f=new Tt().setFromObject(m);if(!s.intersectsBox(f)){u=!1;break}}if(u){a*=1.1;break}a*=1.2,i++}return new v(e.x,e.y+a,e.z)}function Et(e,t){if(!P)return!1;const r=e.position,n=.01;return Math.abs(r.x-P.x)<n&&Math.abs(r.z-P.z)<n}function yt(){ee=!0,fe=0,oe=null,se=!0,Je(!0)}function Pr(e,t,r){if(!t)return;if(P||(P=Le()),ee){if(fe===0&&(fe=e,oe=Cr(),Q=t.position.clone(),q=r.target.clone()),!Q||!oe||!q){console.error("Top view positions not initialized properly"),ee=!1;return}const o=e-fe;let u=Math.min(o/gt,1);u=u<.5?4*u*u*u:1-Math.pow(-2*u+2,3)/2,t.position.lerpVectors(Q,oe,u),r.target.lerpVectors(q,P,u),t.lookAt(r.target),r.update(),o>=gt&&(t.position.copy(oe),r.target.copy(P),t.lookAt(r.target),r.update(),ee=!1,fe=0,se=!1);return}if(!ee&&Et(t)?Je(!0):ee||Je(!1),!se)return;if(ae.length===0&&(ae=Dr(),P=null,P||(P=Le())),Et(t)){se=!1;return}ue===0&&(ue=e,Q=t.position.clone(),q=r.target.clone());const n=e-ue,a=Q||ae[He],l=(He+1)%ae.length,i=ae[l],s=a.distanceTo(i)/Rr*1e3;if(n<s){const o=n/s;t.position.lerpVectors(a,i,o),r&&q&&(r.target.lerpVectors(q,P,o),r.update())}else He=l,ue=e,Q=null,q=P.clone()}function $r(e,t,r){const n=a=>{a.preventDefault();let l=1;switch(a.deltaMode){case 2:l=1+a.deltaY*.025;break;case 1:l=1+a.deltaY*.01;break;default:l=1+a.deltaY*25e-5;break}Ir(t,r,l)};return e.domElement.addEventListener("wheel",n,{passive:!1}),()=>{e.domElement.removeEventListener("wheel",n)}}function Br(e){const t=()=>{se=!1},r=()=>{se=!0,ue=0,Q=null,q=null};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r)}}const Ye={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,is_wirksamgeschlossen:0,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function kr(){const{subscribe:e,set:t,update:r}=Ne(Ye),n={subscribe:e,set:a=>{t(a),Ze(a)},update:a=>{r(l=>{const i=a(l);return Ze(i),i})},reset:()=>{t(Ye),Ze(Ye)},updateField:(a,l)=>{n.update(i=>({...i,[a]:l}))}};return n}const $=kr();function Ze(e){Ar.set(null);const t=vr(e);wr.set(t),zr()}const b={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:70,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:12,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var Or=F(" <!>",1),Xr=F("<!> <!>",1);function Sn(e,t){he(t,!1);const[r,n]=Ce(),a=()=>ze($,"$shearDeformationParameterStore",r);let l=ne(t,"step",8,5),i=G(),c=G(!1),s=G(""),o=null;function u(E){let h=E,_=!1,d="";E<b.LAGERBREITE_MIN?(h=b.LAGERBREITE_MIN,_=!0,d=`${D("shearDeformation.parameters.minValue")}: ${b.LAGERBREITE_MIN} mm`):E>b.LAGERBREITE_MAX&&(h=b.LAGERBREITE_MAX,_=!0,d=`${D("shearDeformation.parameters.maxValue")}: ${b.LAGERBREITE_MAX} mm`);const p=a().b+100;h>p&&(h=p,_=!0,d=D("shearDeformation.parameters.constraintAB")),_&&(w(c,!0),w(s,d),o&&clearTimeout(o),o=setTimeout(()=>{w(c,!1),w(s,"")},3e3)),$.updateField("a",h)}de(()=>a(),()=>{w(i,a().a)}),Re(),pe();var m=Xr(),f=Z(m);Pe(f,{children:(E,h)=>{ge();var _=Or(),d=Z(_),p=W(d);$e(p,{get formula(){return ke.a}}),Ge(S=>De(d,`${S??""} `),[()=>D("shearDeformation.parameters.bearingDepth")],_e),O(E,_)},$$slots:{default:!0}});var g=W(f,2);Be(g,{size:"sm",get step(){return l()},helperText:"mm",get min(){return b.LAGERBREITE_MIN},get max(){return b.LAGERBREITE_MAX},light:!0,get invalid(){return M(c)},get invalidText(){return M(s)},get value(){return M(i)},set value(E){w(i,E)},$$events:{change:()=>u(M(i))},$$legacy:!0}),O(e,m),Ee(),n()}var Fr=F(" <!>",1),Ur=F("<!> <!>",1);function bn(e,t){he(t,!1);const[r,n]=Ce(),a=()=>ze($,"$shearDeformationParameterStore",r);let l=ne(t,"disabled",8,!1),i=ne(t,"step",8,5),c=G(),s=G(!1),o=G(""),u=null;function m(_){let d=_,p=!1,S="";_<b.LAGERLAENGE_MIN?(d=b.LAGERLAENGE_MIN,p=!0,S=`${D("shearDeformation.parameters.minValue")}: ${b.LAGERLAENGE_MIN} mm`):_>b.LAGERLAENGE_MAX&&(d=b.LAGERLAENGE_MAX,p=!0,S=`${D("shearDeformation.parameters.maxValue")}: ${b.LAGERLAENGE_MAX} mm`),p&&(w(s,!0),w(o,S),u&&clearTimeout(u),u=setTimeout(()=>{w(s,!1),w(o,"")},3e3)),$.updateField("b",d)}de(()=>a(),()=>{w(c,a().b)}),Re(),pe();var f=Ur(),g=Z(f);Pe(g,{children:(_,d)=>{ge();var p=Fr(),S=Z(p),T=W(S);$e(T,{get formula(){return ke.b}}),Ge(N=>De(S,`${N??""} `),[()=>D("shearDeformation.parameters.bearingLength")],_e),O(_,p)},$$slots:{default:!0}});var E=W(g,2);const h=_e(()=>l()||a().is_streifen===1);Be(E,{size:"sm",get step(){return i()},helperText:"mm",get disabled(){return M(h)},get min(){return b.LAGERLAENGE_MIN},get max(){return b.LAGERLAENGE_MAX},light:!0,get invalid(){return M(s)},get invalidText(){return M(o)},get value(){return M(c)},set value(_){w(c,_)},$$events:{change:()=>m(M(c))},$$legacy:!0}),O(e,f),Ee(),n()}var Vr=F(" <!>",1),Hr=F("<!> <!>",1);function Mn(e,t){he(t,!1);const[r,n]=Ce(),a=()=>ze($,"$shearDeformationParameterStore",r);let l=ne(t,"step",8,5),i=G(),c=G(!1),s=G(""),o=null;function u(E){let h=E,_=!1,d="";E<b.BETONDECKUNG_MIN?(h=b.BETONDECKUNG_MIN,_=!0,d=`${D("shearDeformation.parameters.minValue")}: ${b.BETONDECKUNG_MIN} mm`):E>b.BETONDECKUNG_MAX&&(h=b.BETONDECKUNG_MAX,_=!0,d=`${D("shearDeformation.parameters.maxValue")}: ${b.BETONDECKUNG_MAX} mm`),_&&(w(c,!0),w(s,d),o&&clearTimeout(o),o=setTimeout(()=>{w(c,!1),w(s,"")},3e3)),$.updateField("c_nom",h)}de(()=>a(),()=>{w(i,a().c_nom)}),Re(),pe();var m=Hr(),f=Z(m);Pe(f,{children:(E,h)=>{ge();var _=Vr(),d=Z(_),p=W(d);$e(p,{get formula(){return ke.c_nom}}),Ge(S=>De(d,`${S??""} `),[()=>D("shearDeformation.parameters.concreteCovernominal")],_e),O(E,_)},$$slots:{default:!0}});var g=W(f,2);Be(g,{size:"sm",get step(){return l()},helperText:"mm",get min(){return b.BETONDECKUNG_MIN},get max(){return b.BETONDECKUNG_MAX},light:!0,get invalid(){return M(c)},get invalidText(){return M(s)},get value(){return M(i)},set value(E){w(i,E)},$$events:{change:()=>u(M(i))},$$legacy:!0}),O(e,m),Ee(),n()}var Yr=F(" <!>",1),Zr=F("<!> <!>",1);function vn(e,t){he(t,!1);const[r,n]=Ce(),a=()=>ze($,"$shearDeformationParameterStore",r),l=G();let i=ne(t,"step",8,1),c=G(),s=G(!1),o=G(""),u=null;function m(h){let _=h,d=!1,p="";h<b.BEMESSUNGSLAST_MIN?(_=b.BEMESSUNGSLAST_MIN,d=!0,p=`${D("shearDeformation.parameters.minValue")}: ${b.BEMESSUNGSLAST_MIN} ${M(l)}`):h>b.BEMESSUNGSLAST_MAX&&(_=b.BEMESSUNGSLAST_MAX,d=!0,p=`${D("shearDeformation.parameters.maxValue")}: ${b.BEMESSUNGSLAST_MAX} ${M(l)}`),d&&(w(s,!0),w(o,p),u&&clearTimeout(u),u=setTimeout(()=>{w(s,!1),w(o,"")},3e3)),$.updateField("ff_zd",_)}de(()=>a(),()=>{w(c,a().ff_zd)}),de(()=>a(),()=>{w(l,a().is_streifen?"kN/m":"kN")}),Re(),pe();var f=Zr(),g=Z(f);Pe(g,{children:(h,_)=>{ge();var d=Yr(),p=Z(d),S=W(p);$e(S,{get formula(){return ke.ff_zd}}),Ge(T=>De(p,`${T??""} `),[()=>D("shearDeformation.parameters.designLoad")],_e),O(h,d)},$$slots:{default:!0}});var E=W(g,2);Be(E,{size:"sm",get step(){return i()},get helperText(){return M(l)},get min(){return b.BEMESSUNGSLAST_MIN},get max(){return b.BEMESSUNGSLAST_MAX},light:!0,get invalid(){return M(s)},get invalidText(){return M(o)},get value(){return M(c)},set value(h){w(c,h)},$$events:{change:()=>m(M(c))},$$legacy:!0}),O(e,f),Ee(),n()}function Wr(e){rr(e,-10)}function Kr(e){return nr(e,{x:0,y:500,z:500})}function Lt(e){const t=[],r=e.n_b;for(let n=0;n<r;n++){let a=0;if(r===2){const l=e.b/1e3;a=n===0?l/5:-l/5}t.push(a)}return t}function pt(e,t){const r=new et;if(!t.is_dorn)return e.add(r),r;const n=new ar({color:or,metalness:.9,roughness:.8,flatShading:!1}),a=(50+t.b*.2)/1e3,l=t.d_b/2/1e3*.8,i=ie();return Lt(t).forEach(s=>{const o=new X(new sr(l,l,a,16),n);o.position.set(i.centerX,i.centerY+a/2,i.centerZ+s),o.castShadow=!0,o.receiveShadow=!0,r.add(o)}),e.add(r),r}function St(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(n=>n.dispose()):r.material.dispose())}),e.remove(t))}const jr=400,qr=400,Jr=10,Qr=.4,en=.4,tn=.01;function bt(e,t){const r=new et,n=new ir({color:lr,shininess:100,specular:2236962}),a=(t.a-jr)/1e3,l=(t.b-qr)/1e3,i=(t.t-Jr)*2/1e3,c=Qr+a,s=en+l,o=tn+i;let u;if(t.is_dorn){const d=new cr;d.moveTo(-c/2,-s/2),d.lineTo(c/2,-s/2),d.lineTo(c/2,s/2),d.lineTo(-c/2,s/2),d.lineTo(-c/2,-s/2);const p=Lt(t),S=t.d_b/2/1e3;p.forEach(N=>{const A=new ur;A.absarc(0,N,S,0,Math.PI*2,!1),d.holes.push(A)});const T={depth:o,bevelEnabled:!1};u=new fr(d,T),u.translate(0,0,-o/2),u.rotateX(-Math.PI/2)}else u=new mr(c,o,s);const m=new X(u,n),f=ie();m.position.set(f.centerX,f.centerY+o/2,f.centerZ),m.castShadow=!0,m.receiveShadow=!0,r.add(m),e.add(r),m.geometry.computeBoundingBox();const g=new Tt;g.setFromObject(m);const E=f.centerY;return{group:r,boundingBox:g,height:E,lengthDiffX:a,lengthDiffZ:l}}function Mt(e,t){t&&(t.traverse(r=>{r instanceof X&&(r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(n=>n.dispose()):r.material.dispose())}),e.remove(t))}function rn(){const{subscribe:e,set:t,update:r}=Ne({renderer:null,camera:null,controls:null,scene:null});return{subscribe:e,setScene:n=>{r(a=>({...a,...n}))},reset:()=>{t({renderer:null,camera:null,controls:null,scene:null})},captureScreenshot:async(n=!1)=>new Promise((a,l)=>{const i={renderer:null,camera:null,controls:null,scene:null};if(e(o=>{i.renderer=o.renderer,i.camera=o.camera,i.controls=o.controls,i.scene=o.scene})(),!i.renderer||!i.camera||!i.scene){l(new Error("Scene not initialized"));return}const s=()=>{if(!i.renderer||!i.camera||!i.scene){l(new Error("Scene not initialized"));return}i.renderer.render(i.scene,i.camera);const o=i.renderer.domElement.toDataURL("image/png");a(o)};n?(yt(),setTimeout(s,1200)):s()})}}const vt=rn();var nn=F('<!> <div class="top-view-button-container svelte-1mle02r"><!></div>',1),an=F('<div class="scene-container svelte-1mle02r"><!></div>');function wn(e,t){he(t,!1),ne(t,"autoRotate",8,!1);let r=ne(t,"showTooltip",8,!0),n;const a=.05,l=.001,i=.04,c=new v(-1.67,1.4,.02);let s=G(),o,u,m,f,g,E,h,_,d,p,S,T,N;Ct(async()=>{o=dr(),m=_r(M(s)),Wr(o),d=Kr(o),u=hr(35),u.position.copy(c),N=$.subscribe(async I=>{if(n=I,o&&h!==void 0){E&&ft(o,E),h&&Mt(o,h),_&&St(o,_),Qe(o),mt(o),E=ut(o,n,!1),h=bt(o,n).group,_=pt(o,n),await _t(o);const R=ie();let Se=Math.max(n.c_nom/1e3,.03);n.is_streifen===1&&(Se=.1);const be=new v(R.centerX+a+n.a/2e3,R.centerY+l,R.centerZ+i+n.b/2e3+Se);await dt(o,be),f&&(f.target.set(R.centerX,R.centerY,R.centerZ),f.update())}});const x=ie(),K=[x.centerX,x.centerY,x.centerZ];f=gr(u,m,K),vt.setScene({renderer:m,camera:u,controls:f,scene:o}),p=$r(m,u,f),S=Br(M(s)),E=ut(o,n,!1),h=bt(o,n).group,_=pt(o,n),await _t(o);let C=n.c_nom/1e3;n.is_streifen===1&&(C=.1);const U=new v(x.centerX+a+n.a/2e3,x.centerY+l+.001,x.centerZ+i+n.b/2e3+C);await dt(o,U);const k=1e3/30;let V=0;const j=I=>{T=requestAnimationFrame(j);const H=I-V;if(!(H<k)){if(V=I-H%k,Pr(I,u,f),Er(f),d&&u){const R=new v(0,500,500);R.applyQuaternion(u.quaternion),d.position.copy(u.position).add(R),f&&f.target&&(d.target.position.copy(f.target),d.target.updateMatrixWorld())}m.render(o,u)}};if(j(0),await Pt(),M(s)&&M(s)instanceof Element){let I=!1;g=new ResizeObserver(()=>{M(s)&&m&&u&&!I&&(I=!0,requestAnimationFrame(()=>{if(M(s)&&m&&u){const H=M(s).clientWidth,R=M(s).clientHeight;u.aspect=H/R,u.updateProjectionMatrix(),m.setSize(H,R)}I=!1}))}),g.observe(M(s))}}),$t(()=>{vt.reset(),T!==void 0&&cancelAnimationFrame(T),p&&p(),S&&S(),N&&N(),g&&g.disconnect(),f&&f.dispose(),m&&m.dispose(),E&&o&&ft(o,E),h&&o&&Mt(o,h),_&&o&&St(o,_),o&&Qe(o),o&&mt(o)}),pe();var A=an(),z=nt(A);{var L=x=>{var K=nn(),y=Z(K);pr(y,{});var C=W(y,2),U=nt(C);Sr(U,{size:"small",kind:"secondary",$$events:{click:()=>yt()},children:(B,k)=>{ge();var V=Bt("Draufsicht");O(B,V)},$$slots:{default:!0}}),at(C),O(x,K)};kt(z,x=>{r()&&x(L)})}at(A),br(A,x=>w(s,x),()=>M(s)),O(e,A),Ee()}export{vn as B,b as I,Sn as L,wn as S,bn as a,pn as b,Mn as c,vt as d,Ar as e,wr as f,Mr as l,Ze as p,$ as s};
