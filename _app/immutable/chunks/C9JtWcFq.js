var Bn=Object.defineProperty;var Zn=(n,t,e)=>t in n?Bn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ht=(n,t,e)=>Zn(n,typeof t!="symbol"?t+"":t,e);import"./CWj6FrbW.js";import"./MyNhdvZg.js";import{createEventDispatcher as gn,onMount as Vn}from"./Jl7__Md-.js";import{v as J,H as Wn,b5 as qn,b6 as Gn,b7 as nn,V as fe,h as sn,f as on,c as an,a0 as Kn,b8 as Xn,b9 as Qn,D as Jn,r as $n,as as ti,o as lt,af as L,ag as O,aj as w,w as R,k as Et,ak as $,al as It,ai as We,t as xe,m as St,an as K,K as tt,am as k,y as v,x as rt,ap as qe,ah as ut,B as Jt,aL as Rt,z as Ee,b4 as ei,ae as Ge,ao as Ke,ac as ni,ba as rn,l as ii}from"./Cl0ug4r9.js";import{l as X,p,i as pt,b as si}from"./Cxv2QNzF.js";import{b as Mt,c as ee,e as nt,i as Tt,r as bn,a as Zt,k as oi,j as ai,s as gt,d as ri,S as li,h as yn}from"./DRnR6aa5.js";import{b as te}from"./C8OeErWx.js";import{b as E}from"./DZ3pU7aL.js";import{b as ci,W as hi,d as di}from"./D5cFTiN_.js";import{Z as ui,c as y,_ as Bt,$ as Ut,Q as ln,a0 as je,V as mt,a1 as fi,y as _i,a2 as vn,u as mi,v as pi,a3 as gi,o as wn,X as bi,q as Se,M as ft,h as yi,p as Ot,n as vi,f as $t,m as wi,i as wt,t as xi,A as He,B as At,g as xn,a as En,P as Sn,D as Ei,I as Si,e as Mi,a4 as Ti,d as zi,a5 as Pi,a6 as Di,J as Li,a7 as Oi}from"./C5QbS7GW.js";import{t as Xt}from"./CIK7bzKS.js";import"./C8BMgICZ.js";import"./CMaaihqG.js";import{_ as Ri}from"./Dp1pzeXC.js";import{c as Ai}from"./XCqzgxnV.js";function Ci(n,t,e=!1,i=!1,s=!1){var o=n,r="";J(()=>{var a=Wn;if(r===(r=t()??"")){sn&&on();return}if(a.nodes_start!==null&&(qn(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),r!==""){if(sn){an.data;for(var l=on(),u=l;l!==null&&(l.nodeType!==8||l.data!=="");)u=l,l=Kn(l);if(l===null)throw Xn(),Qn;nn(an,u),o=Jn(l);return}var h=r+"";e?h=`<svg>${h}</svg>`:i&&(h=`<math>${h}</math>`);var d=Gn(h);if((e||i)&&(d=fe(d)),nn(fe(d),d.lastChild),e||i)for(;fe(d);)o.before(fe(d));else o.before(d)}})}function ki(n,t,e,i,s){var o=()=>{i(e[n])};e.addEventListener(t,o),s?$n(()=>{e[n]=s()}):o(),(e===document.body||e===window||e===document)&&ti(()=>{e.removeEventListener(t,o)})}var Ii=lt("<div><span></span></div>");function Ni(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,[]);var s=Ii();Mt(s,()=>({...i,[ee]:{"bx--form-item":!0,"bx--checkbox-wrapper":!0,"bx--checkbox-label":!0}}));var o=L(s);nt(o,1,"",null,{},{"bx--checkbox-label-text":!0,"bx--skeleton":!0}),O(s),w("click",s,function(r){E.call(this,t,r)}),w("mouseover",s,function(r){E.call(this,t,r)}),w("mouseenter",s,function(r){E.call(this,t,r)}),w("mouseleave",s,function(r){E.call(this,t,r)}),R(n,s)}var Fi=lt('<div><input type="checkbox"/> <label><span><!></span></label></div>');function xo(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["value","checked","group","indeterminate","skeleton","required","readonly","disabled","labelText","hideLabel","name","title","id","ref"]);Et(t,!1);const s=tt(),o=tt();let r=p(t,"value",8,""),a=p(t,"checked",12,!1),l=p(t,"group",12,void 0),u=p(t,"indeterminate",12,!1),h=p(t,"skeleton",8,!1),d=p(t,"required",8,!1),c=p(t,"readonly",8,!1),_=p(t,"disabled",8,!1),b=p(t,"labelText",8,""),g=p(t,"hideLabel",8,!1),f=p(t,"name",8,""),S=p(t,"title",12,void 0),F=p(t,"id",24,()=>"ccs-"+Math.random().toString(36)),j=p(t,"ref",12,null);const A=gn();let N=tt(null);$(()=>k(l()),()=>{K(s,Array.isArray(l()))}),$(()=>(v(s),k(l()),k(r())),()=>{v(s)&&a(l().includes(r()))}),$(()=>k(a()),()=>{A("check",a())}),$(()=>v(N),()=>{var C,z;K(o,((C=v(N))==null?void 0:C.offsetWidth)<((z=v(N))==null?void 0:z.scrollWidth))}),$(()=>(k(S()),v(o),v(N)),()=>{var C;S(!S()&&v(o)?(C=v(N))==null?void 0:C.innerText:S())}),It(),Tt();var et=We(),Z=xe(et);{var ct=C=>{Ni(C,si(()=>i,{$$events:{click(z){E.call(this,t,z)},mouseover(z){E.call(this,t,z)},mouseenter(z){E.call(this,t,z)},mouseleave(z){E.call(this,t,z)}}}))},_t=C=>{var z=Fi();Mt(z,()=>({...i,[ee]:{"bx--form-item":!0,"bx--checkbox-wrapper":!0}}));var P=L(z);bn(P),nt(P,1,"",null,{},{"bx--checkbox":!0}),te(P,x=>j(x),()=>j());var V=rt(P,2);nt(V,1,"",null,{},{"bx--checkbox-label":!0});var W=L(V);let st;var ot=L(W);Zt(ot,t,"labelText",{},x=>{var q=qe();J(()=>ut(q,b())),R(x,q)}),O(W),te(W,x=>K(N,x),()=>v(N)),O(V),O(z),J(x=>{oi(P,r()),ai(P,a()),P.disabled=_(),gt(P,"id",F()),gt(P,"name",f()),P.required=d(),P.readOnly=c(),gt(V,"for",F()),gt(V,"title",S()),st=nt(W,1,"",null,st,x)},[()=>({"bx--checkbox-label-text":!0,"bx--visually-hidden":g()})],Jt),ki("indeterminate","change",P,u,u),w("change",P,()=>{v(s)?l(l().includes(r())?l().filter(x=>x!==r()):[...l(),r()]):a(!a())}),w("change",P,function(x){E.call(this,t,x)}),w("focus",P,function(x){E.call(this,t,x)}),w("blur",P,function(x){E.call(this,t,x)}),w("click",z,function(x){E.call(this,t,x)}),w("mouseover",z,function(x){E.call(this,t,x)}),w("mouseenter",z,function(x){E.call(this,t,x)}),w("mouseleave",z,function(x){E.call(this,t,x)}),R(C,z)};pt(Z,C=>{h()?C(ct):C(_t,!1)})}R(n,et),St()}var Yi=lt("<label><!></label>");function Eo(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["id"]);Et(t,!1);let s=p(t,"id",24,()=>"ccs-"+Math.random().toString(36));Tt();var o=Yi();Mt(o,()=>({for:s(),...i,[ee]:{"bx--label":!0}}));var r=L(o);Zt(r,t,"default",{},null),O(o),w("click",o,function(a){E.call(this,t,a)}),w("mouseover",o,function(a){E.call(this,t,a)}),w("mouseenter",o,function(a){E.call(this,t,a)}),w("mouseleave",o,function(a){E.call(this,t,a)}),R(n,o),St()}var ji=Rt("<title> </title>"),Hi=Rt('<svg><!><path d="M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"></path></svg>');function Ui(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["size","title"]);Et(t,!1);const s=tt(),o=tt();let r=p(t,"size",8,16),a=p(t,"title",8,void 0);$(()=>(k(e),k(a())),()=>{K(s,e["aria-label"]||e["aria-labelledby"]||a())}),$(()=>(v(s),k(e)),()=>{K(o,{"aria-hidden":v(s)?void 0:!0,role:v(s)?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})}),It(),Tt();var l=Hi();Mt(l,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:r(),height:r(),...v(o),...i}));var u=L(l);{var h=d=>{var c=ji(),_=L(c,!0);O(c),J(()=>ut(_,a())),R(d,c)};pt(u,d=>{a()&&d(h)})}Ee(),O(l),R(n,l),St()}var Bi=Rt("<title> </title>"),Zi=Rt('<svg><!><path d="M8 15H24V17H8z"></path></svg>');function Vi(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["size","title"]);Et(t,!1);const s=tt(),o=tt();let r=p(t,"size",8,16),a=p(t,"title",8,void 0);$(()=>(k(e),k(a())),()=>{K(s,e["aria-label"]||e["aria-labelledby"]||a())}),$(()=>(v(s),k(e)),()=>{K(o,{"aria-hidden":v(s)?void 0:!0,role:v(s)?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})}),It(),Tt();var l=Zi();Mt(l,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:r(),height:r(),...v(o),...i}));var u=L(l);{var h=d=>{var c=Bi(),_=L(c,!0);O(c),J(()=>ut(_,a())),R(d,c)};pt(u,d=>{a()&&d(h)})}Ee(),O(l),R(n,l),St()}var Wi=Rt("<title> </title>"),qi=Rt('<svg><!><path d="M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"></path></svg>');function Gi(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["size","title"]);Et(t,!1);const s=tt(),o=tt();let r=p(t,"size",8,16),a=p(t,"title",8,void 0);$(()=>(k(e),k(a())),()=>{K(s,e["aria-label"]||e["aria-labelledby"]||a())}),$(()=>(v(s),k(e)),()=>{K(o,{"aria-hidden":v(s)?void 0:!0,role:v(s)?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})}),It(),Tt();var l=qi();Mt(l,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:r(),height:r(),...v(o),...i}));var u=L(l);{var h=d=>{var c=Wi(),_=L(c,!0);O(c),J(()=>ut(_,a())),R(d,c)};pt(u,d=>{a()&&d(h)})}Ee(),O(l),R(n,l),St()}var Ki=lt("<label><!></label>"),Xi=lt("<!> <!>",1),Qi=lt('<div><button type="button" tabindex="-1"><!></button> <div></div> <button type="button" tabindex="-1"><!></button> <div></div></div>'),Ji=lt("<div> </div>"),$i=lt("<div> </div>"),ts=lt("<div> </div>"),es=lt("<div><div><!> <div><input/> <!> <!></div> <!> <!> <!></div></div>");function So(n,t){const e=ri(t),i=X(t,["children","$$slots","$$events","$$legacy"]),s=X(i,["translationIds","size","value","step","max","min","light","readonly","allowEmpty","disabled","hideSteppers","iconDescription","invalid","invalidText","warn","warnText","helperText","label","hideLabel","translateWithId","id","name","ref"]);Et(t,!1);const o=tt(),r=tt(),a=tt(),l=tt(),u=tt();let h=p(t,"size",8,void 0),d=p(t,"value",12,null),c=p(t,"step",8,1),_=p(t,"max",8,void 0),b=p(t,"min",8,void 0),g=p(t,"light",8,!1),f=p(t,"readonly",8,!1),S=p(t,"allowEmpty",8,!1),F=p(t,"disabled",8,!1),j=p(t,"hideSteppers",8,!1),A=p(t,"iconDescription",8,""),N=p(t,"invalid",8,!1),et=p(t,"invalidText",8,""),Z=p(t,"warn",8,!1),ct=p(t,"warnText",8,""),_t=p(t,"helperText",8,""),C=p(t,"label",8,""),z=p(t,"hideLabel",8,!1),P=p(t,"translateWithId",8,m=>x[m]);const V={increment:"increment",decrement:"decrement"};let W=p(t,"id",24,()=>"ccs-"+Math.random().toString(36)),st=p(t,"name",8,void 0),ot=p(t,"ref",12,null);const x={[V.increment]:"Increment number",[V.decrement]:"Decrement number"},q=gn();function at(m){m?ot().stepUp():ot().stepDown(),d(+ot().value),q("input",d()),q("change",d())}function zt(m){return m!=""?Number(m):null}function bt({target:m}){d(zt(m.value)),q("input",d())}function ne({target:m}){q("change",zt(m.value))}$(()=>k(P()),()=>{K(o,P()("increment"))}),$(()=>k(P()),()=>{K(r,P()("decrement"))}),$(()=>(k(N()),k(f()),k(S()),k(d()),k(_()),k(b())),()=>{K(a,N()&&!f()||!S()&&d()==null||d()>_()||typeof d()=="number"&&d()<b())}),$(()=>k(W()),()=>{K(l,`error-${W()}`)}),$(()=>k(i),()=>{K(u,i["aria-label"]||"Numeric input field with increment and decrement buttons")}),It(),Tt();var yt=es();nt(yt,1,"",null,{},{"bx--form-item":!0});var Lt=L(yt);let ie;var Vt=L(Lt);{var se=m=>{var M=Ki();let Y;var Pt=L(M);Zt(Pt,t,"label",{},T=>{var G=qe();J(()=>ut(G,C())),R(T,G)}),O(M),J(T=>{gt(M,"for",W()),Y=nt(M,1,"",null,Y,T)},[()=>({"bx--label":!0,"bx--label--disabled":F(),"bx--visually-hidden":z()})],Jt),R(m,M)};pt(Vt,m=>{(e.label||C())&&m(se)})}var Nt=rt(Vt,2);let Wt;var H=L(Nt);bn(H),Mt(H,()=>({type:"number",pattern:"[0-9]*","aria-describedby":v(l),"data-invalid":v(a)||void 0,"aria-invalid":v(a)||void 0,"aria-label":C()?void 0:v(u),disabled:F(),id:W(),name:st(),max:_(),min:b(),step:c(),value:d()??"",readonly:f(),...s})),te(H,m=>ot(m),()=>ot());var D=rt(H,2);{var oe=m=>{Gi(m,{class:"bx--text-input__readonly-icon"})},Me=m=>{var M=Xi(),Y=xe(M);{var Pt=it=>{hi(it,{class:"bx--number__invalid"})};pt(Y,it=>{N()&&it(Pt)})}var T=rt(Y,2);{var G=it=>{di(it,{class:"bx--number__invalid bx--number__invalid--warning"})};pt(T,it=>{!N()&&Z()&&it(G)})}R(m,M)};pt(D,m=>{f()?m(oe):m(Me,!1)})}var Te=rt(D,2);{var ae=m=>{var M=Qi();nt(M,1,"",null,{},{"bx--number__controls":!0});var Y=L(M);nt(Y,1,"",null,{},{"bx--number__control-btn":!0,"down-icon":!0});var Pt=L(Y);Vi(Pt,{class:"down-icon"}),O(Y);var T=rt(Y,2);nt(T,1,"",null,{},{"bx--number__rule-divider":!0});var G=rt(T,2);nt(G,1,"",null,{},{"bx--number__control-btn":!0,"up-icon":!0});var it=L(G);Ui(it,{class:"up-icon"}),O(G);var he=rt(G,2);nt(he,1,"",null,{},{"bx--number__rule-divider":!0}),O(M),J(()=>{gt(Y,"title",v(r)||A()),gt(Y,"aria-label",v(r)||A()),Y.disabled=F(),gt(G,"title",v(o)||A()),gt(G,"aria-label",v(o)||A()),G.disabled=F()}),w("click",Y,()=>{at(!1)}),w("click",G,()=>{at(!0)}),R(m,M)};pt(Te,m=>{j()||m(ae)})}O(Nt);var re=rt(Nt,2);{var le=m=>{var M=Ji();let Y;var Pt=L(M,!0);O(M),J(T=>{Y=nt(M,1,"",null,Y,T),ut(Pt,_t())},[()=>({"bx--form__helper-text":!0,"bx--form__helper-text--disabled":F()})],Jt),R(m,M)};pt(re,m=>{!v(a)&&!Z()&&_t()&&m(le)})}var qt=rt(re,2);{var ce=m=>{var M=$i();nt(M,1,"",null,{},{"bx--form-requirement":!0});var Y=L(M,!0);O(M),J(()=>{gt(M,"id",v(l)),ut(Y,et())}),R(m,M)};pt(qt,m=>{v(a)&&m(ce)})}var ze=rt(qt,2);{var Pe=m=>{var M=ts();nt(M,1,"",null,{},{"bx--form-requirement":!0});var Y=L(M,!0);O(M),J(()=>{gt(M,"id",v(l)),ut(Y,ct())}),R(m,M)};pt(ze,m=>{!v(a)&&Z()&&m(Pe)})}return O(Lt),O(yt),J((m,M)=>{gt(Lt,"data-invalid",v(a)||void 0),ie=nt(Lt,1,"",null,ie,m),Wt=nt(Nt,1,"",null,Wt,M)},[()=>({"bx--number":!0,"bx--number--helpertext":!0,"bx--number--readonly":f(),"bx--number--light":g(),"bx--number--nolabel":z(),"bx--number--nosteppers":j(),"bx--number--sm":h()==="sm","bx--number--xl":h()==="xl"}),()=>({"bx--number__input-wrapper":!0,"bx--number__input-wrapper--warning":!N()&&Z()})],Jt),w("change",H,ne),w("input",H,bt),w("keydown",H,function(m){E.call(this,t,m)}),w("keyup",H,function(m){E.call(this,t,m)}),w("focus",H,function(m){E.call(this,t,m)}),w("blur",H,function(m){E.call(this,t,m)}),w("paste",H,function(m){E.call(this,t,m)}),w("click",yt,function(m){E.call(this,t,m)}),w("mouseover",yt,function(m){E.call(this,t,m)}),w("mouseenter",yt,function(m){E.call(this,t,m)}),w("mouseleave",yt,function(m){E.call(this,t,m)}),R(n,yt),ci(t,"translationIds",V),St({translationIds:V})}var ns=lt("<div><!></div>");function Mo(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["light"]);let s=p(t,"light",8,!1);var o=ns();Mt(o,a=>({...i,[ee]:a}),[()=>({"bx--tile":!0,"bx--tile--light":s()})]);var r=L(o);Zt(r,t,"default",{},null),O(o),w("click",o,function(a){E.call(this,t,a)}),w("mouseover",o,function(a){E.call(this,t,a)}),w("mouseenter",o,function(a){E.call(this,t,a)}),w("mouseleave",o,function(a){E.call(this,t,a)}),R(n,o)}var is=lt("<button><span><!></span> <!></button>");function ss(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["tooltipText","icon","disabled","align","direction","id","ref"]);Et(t,!1);let s=p(t,"tooltipText",8,""),o=p(t,"icon",8,void 0),r=p(t,"disabled",8,!1),a=p(t,"align",8,"center"),l=p(t,"direction",8,"bottom"),u=p(t,"id",24,()=>"ccs-"+Math.random().toString(36)),h=p(t,"ref",12,null),d=tt(!1);Tt();var c=is();w("keydown",ei,({key:f})=>{f==="Escape"&&K(d,!0)}),Mt(c,f=>({disabled:r(),type:"button","aria-describedby":u(),...i,[ee]:f,[li]:{cursor:r()?"not-allowed":"default"}}),[()=>({"bx--tooltip__trigger":!0,"bx--tooltip--a11y":!0,"bx--tooltip--hidden":v(d)||r(),"bx--tooltip--top":l()==="top","bx--tooltip--right":l()==="right","bx--tooltip--bottom":l()==="bottom","bx--tooltip--left":l()==="left","bx--tooltip--align-start":a()==="start","bx--tooltip--align-center":a()==="center","bx--tooltip--align-end":a()==="end"})]);var _=L(c);nt(_,1,"",null,{},{"bx--assistive-text":!0});var b=L(_);Zt(b,t,"tooltipText",{},f=>{var S=qe();J(()=>ut(S,s())),R(f,S)}),O(_);var g=rt(_,2);Zt(g,t,"default",{},f=>{var S=We(),F=xe(S);Ai(F,o,(j,A)=>{A(j,{})}),R(f,S)}),O(c),te(c,f=>h(f),()=>h()),J(()=>gt(_,"id",u())),w("click",c,function(f){E.call(this,t,f)}),w("mouseover",c,function(f){E.call(this,t,f)}),w("mouseenter",c,function(f){E.call(this,t,f)}),w("mouseenter",c,()=>{r()||K(d,!1)}),w("mouseleave",c,function(f){E.call(this,t,f)}),w("focus",c,function(f){E.call(this,t,f)}),w("focus",c,()=>{r()||K(d,!1)}),R(n,c),St()}const cn={type:"change"},Xe={type:"start"},Mn={type:"end"},_e=new fi,hn=new _i,os=Math.cos(70*vn.DEG2RAD),Q=new y,dt=2*Math.PI,I={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Ae=1e-6;class as extends ui{constructor(t,e=null){super(t,e),this.state=I.NONE,this.target=new y,this.cursor=new y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Bt.ROTATE,MIDDLE:Bt.DOLLY,RIGHT:Bt.PAN},this.touches={ONE:Ut.ROTATE,TWO:Ut.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new y,this._lastQuaternion=new ln,this._lastTargetPosition=new y,this._quat=new ln().setFromUnitVectors(t.up,new y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new je,this._sphericalDelta=new je,this._scale=1,this._panOffset=new y,this._rotateStart=new mt,this._rotateEnd=new mt,this._rotateDelta=new mt,this._panStart=new mt,this._panEnd=new mt,this._panDelta=new mt,this._dollyStart=new mt,this._dollyEnd=new mt,this._dollyDelta=new mt,this._dollyDirection=new y,this._mouse=new mt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ls.bind(this),this._onPointerDown=rs.bind(this),this._onPointerUp=cs.bind(this),this._onContextMenu=ps.bind(this),this._onMouseWheel=us.bind(this),this._onKeyDown=fs.bind(this),this._onTouchStart=_s.bind(this),this._onTouchMove=ms.bind(this),this._onMouseDown=hs.bind(this),this._onMouseMove=ds.bind(this),this._interceptControlDown=gs.bind(this),this._interceptControlUp=bs.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(cn),this.update(),this.state=I.NONE}update(t=null){const e=this.object.position;Q.copy(e).sub(this.target),Q.applyQuaternion(this._quat),this._spherical.setFromVector3(Q),this.autoRotate&&this.state===I.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(i)&&isFinite(s)&&(i<-Math.PI?i+=dt:i>Math.PI&&(i-=dt),s<-Math.PI?s+=dt:s>Math.PI&&(s-=dt),i<=s?this._spherical.theta=Math.max(i,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+s)/2?Math.max(i,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const r=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=r!=this._spherical.radius}if(Q.setFromSpherical(this._spherical),Q.applyQuaternion(this._quatInverse),e.copy(this.target).add(Q),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let r=null;if(this.object.isPerspectiveCamera){const a=Q.length();r=this._clampDistance(a*this._scale);const l=a-r;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),o=!!l}else if(this.object.isOrthographicCamera){const a=new y(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=l!==this.object.zoom;const u=new y(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),r=Q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;r!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(r).add(this.object.position):(_e.origin.copy(this.object.position),_e.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(_e.direction))<os?this.object.lookAt(this.target):(hn.setFromNormalAndCoplanarPoint(this.object.up,this.target),_e.intersectPlane(hn,this.target))))}else if(this.object.isOrthographicCamera){const r=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),r!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>Ae||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Ae||this._lastTargetPosition.distanceToSquared(this.target)>Ae?(this.dispatchEvent(cn),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?dt/60*this.autoRotateSpeed*t:dt/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){Q.setFromMatrixColumn(e,0),Q.multiplyScalar(-t),this._panOffset.add(Q)}_panUp(t,e){this.screenSpacePanning===!0?Q.setFromMatrixColumn(e,1):(Q.setFromMatrixColumn(e,0),Q.crossVectors(this.object.up,Q)),Q.multiplyScalar(t),this._panOffset.add(Q)}_pan(t,e){const i=this.domElement;if(this.object.isPerspectiveCamera){const s=this.object.position;Q.copy(s).sub(this.target);let o=Q.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*o/i.clientHeight,this.object.matrix),this._panUp(2*e*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),s=t-i.left,o=e-i.top,r=i.width,a=i.height;this._mouse.x=s/r*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(dt*this._rotateDelta.x/e.clientHeight),this._rotateUp(dt*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(dt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-dt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(dt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-dt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._rotateStart.set(i,s)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panStart.set(i,s)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,o=Math.sqrt(i*i+s*s);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const i=this._getSecondPointerPosition(t),s=.5*(t.pageX+i.x),o=.5*(t.pageY+i.y);this._rotateEnd.set(s,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(dt*this._rotateDelta.x/e.clientHeight),this._rotateUp(dt*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panEnd.set(i,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,o=Math.sqrt(i*i+s*s);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const r=(t.pageX+e.x)*.5,a=(t.pageY+e.y)*.5;this._updateZoomParameters(r,a)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new mt,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function rs(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function ls(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function cs(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Mn),this.state=I.NONE;break;case 1:const t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function hs(n){let t;switch(n.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Bt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=I.DOLLY;break;case Bt.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=I.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=I.ROTATE}break;case Bt.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=I.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=I.PAN}break;default:this.state=I.NONE}this.state!==I.NONE&&this.dispatchEvent(Xe)}function ds(n){switch(this.state){case I.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case I.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case I.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function us(n){this.enabled===!1||this.enableZoom===!1||this.state!==I.NONE||(n.preventDefault(),this.dispatchEvent(Xe),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(Mn))}function fs(n){this.enabled!==!1&&this._handleKeyDown(n)}function _s(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Ut.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=I.TOUCH_ROTATE;break;case Ut.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=I.TOUCH_PAN;break;default:this.state=I.NONE}break;case 2:switch(this.touches.TWO){case Ut.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=I.TOUCH_DOLLY_PAN;break;case Ut.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=I.TOUCH_DOLLY_ROTATE;break;default:this.state=I.NONE}break;default:this.state=I.NONE}this.state!==I.NONE&&this.dispatchEvent(Xe)}function ms(n){switch(this._trackPointer(n),this.state){case I.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case I.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case I.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case I.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=I.NONE}}function ps(n){this.enabled!==!1&&n.preventDefault()}function gs(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function bs(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class ys extends mi{constructor(t){super(t)}load(t,e,i,s){const o=this,r=new pi(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(a){const l=o.parse(JSON.parse(a));e&&e(l)},i,s)}parse(t){return new vs(t)}}class vs{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const i=[],s=ws(t,e,this.data);for(let o=0,r=s.length;o<r;o++)i.push(...s[o].toShapes());return i}}function ws(n,t,e){const i=Array.from(n),s=t/e.resolution,o=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*s,r=[];let a=0,l=0;for(let u=0;u<i.length;u++){const h=i[u];if(h===`
`)a=0,l-=o;else{const d=xs(h,s,a,l,e);a+=d.offsetX,r.push(d.path)}}return r}function xs(n,t,e,i,s){const o=s.glyphs[n]||s.glyphs["?"];if(!o){console.error('THREE.Font: character "'+n+'" does not exists in font family '+s.familyName+".");return}const r=new gi;let a,l,u,h,d,c,_,b;if(o.o){const g=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let f=0,S=g.length;f<S;)switch(g[f++]){case"m":a=g[f++]*t+e,l=g[f++]*t+i,r.moveTo(a,l);break;case"l":a=g[f++]*t+e,l=g[f++]*t+i,r.lineTo(a,l);break;case"q":u=g[f++]*t+e,h=g[f++]*t+i,d=g[f++]*t+e,c=g[f++]*t+i,r.quadraticCurveTo(d,c,u,h);break;case"b":u=g[f++]*t+e,h=g[f++]*t+i,d=g[f++]*t+e,c=g[f++]*t+i,_=g[f++]*t+e,b=g[f++]*t+i,r.bezierCurveTo(d,c,_,b,u,h);break}}return{offsetX:o.ha*t,path:r}}class Es extends wn{constructor(t,e={}){const i=e.font;if(i===void 0)super();else{const s=i.generateShapes(t,e.size);e.depth===void 0&&(e.depth=50),e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(s,e)}this.type="TextGeometry"}}const Ss=[{diameter:200,type:2,t_1:8,n:[2,3,4]},{diameter:250,type:2,t_1:8,n:[2,3,4]},{diameter:300,type:3,t_1:8,n:[3,4,5,6]},{diameter:350,type:4,t_1:8,n:[3,4,5,6,7]},{diameter:400,type:5,t_1:12,n:[3,4,5,6]},{diameter:450,type:5,t_1:12,n:[3,4,5,6]},{diameter:500,type:6,t_1:12,n:[3,4,5,6,7]},{diameter:550,type:7,t_1:12,n:[4,5,6,7,8]},{diameter:600,type:8,t_1:12,n:[4,5,6,7,8,9]},{diameter:650,type:9,t_1:12,n:[4,5,6,7,8,9,10]},{diameter:700,type:10,t_1:16,n:[4,5,6,7,8,9]},{diameter:750,type:10,t_1:16,n:[4,5,6,7,8,9]},{diameter:850,type:11,t_1:16,n:[4,5,6,7,8,9,10]},{diameter:900,type:12,t_1:20,n:[4,5,6,7,8,9,10]}],Qe=[{length:100,width:150,t_1:8,n:[2,3]},{length:100,width:200,t_1:8,n:[2,3]},{length:150,width:200,t_1:8,n:[2,3,4]},{length:150,width:250,t_1:8,n:[2,3,4]},{length:150,width:300,t_1:8,n:[2,3,4]},{length:200,width:250,t_1:8,n:[3,4,5,6]},{length:200,width:300,t_1:8,n:[3,4,5,6]},{length:200,width:350,t_1:8,n:[3,4,5,6]},{length:200,width:400,t_1:8,n:[3,4,5,6]},{length:250,width:300,t_1:8,n:[3,4,5,6,7]},{length:250,width:400,t_1:8,n:[3,4,5,6,7]},{length:300,width:400,t_1:12,n:[3,4,5,6]},{length:300,width:500,t_1:12,n:[3,4,5,6]},{length:300,width:600,t_1:12,n:[3,4,5,6]},{length:350,width:450,t_1:12,n:[3,4,5,6,7]},{length:400,width:500,t_1:12,n:[4,5,6,7,8]},{length:400,width:600,t_1:12,n:[4,5,6,7,8]},{length:450,width:600,t_1:12,n:[4,5,6,7,8,9]},{length:500,width:600,t_1:12,n:[4,5,6,7,8,9,10]},{length:600,width:600,t_1:16,n:[4,5,6,7,8,9]},{length:600,width:700,t_1:16,n:[4,5,6,7,8,9]},{length:800,width:800,t_1:20,n:[4,5,6,7,8,9,10]},{length:900,width:900,t_1:20,n:[4,5,6,7,8,9,10,11]}];function To(n,t){const e=Qe.find(i=>i.length===n&&i.width===t);return e?e.n.map(i=>({t_1:e.t_1,n:i})):[]}function zo(n){const t=Ss.find(e=>e.diameter===n);return t?t.n.map(e=>({t_1:t.t_1,n:e})):[]}function Ms(){const n={calculationResult:null},{subscribe:t,set:e,update:i}=Ge(n),s={subscribe:t,set:o=>{e(o)},update:o=>{i(o)},reset:()=>{e(n)},setCalculationResult:o=>{s.update(r=>({...r,calculationResult:o}))},clearCalculationResult:()=>{s.update(o=>({...o,calculationResult:null}))},getCalculationSuccess:()=>{let o=null;if(t(l=>{o=l.calculationResult})(),!o)return!1;const a=o;return a.VerformungUnterDruckSuccess&&a.VerformungUnterSchubSuccess&&a.VerformungWinkelverdrehungSuccess&&a.SummeDerTeilverformungenSuccess&&a.VerdrehungsgrenzbedingungSuccess&&a.MindestpressungLagertypBSuccess&&a.GleitnachweisSuccess&&a.StabilitaetSuccess},areAllSuccessFlagsTrue:()=>{let o=null;if(t(l=>{o=l.calculationResult})(),!o)return!1;const a=o;return a.VerformungUnterDruckSuccess&&a.VerformungUnterSchubSuccess&&a.VerformungWinkelverdrehungSuccess&&a.SummeDerTeilverformungenSuccess&&a.VerdrehungsgrenzbedingungSuccess&&a.MindestpressungLagertypBSuccess&&a.GleitnachweisSuccess&&a.StabilitaetSuccess}};return s}const Tn=Ms();function Ts(n,t,e){for(let i=0;i<t.length-1;i++)if(n>=t[i]&&n<=t[i+1]){const s=(n-t[i])/(t[i+1]-t[i]);return e[i]+s*(e[i+1]-e[i])}return n<t[0]?e[0]:e[e.length-1]}function zs(n){const t=n.t_1,e=n.n,i=n.gg,s=n.ee_b,o=n.is_round,r=n.a,a=n.b,l=n.d,u=n.is_ztv_ing,h=n.is_typ_b,d=n.is_typ_c,c=n.ff_zd1,_=n.v_x1,b=n.v_y1,g=n.alpha_b1,f=n.alpha_a1,S=n.ff_zd2,F=n.v_x2,j=n.v_y2,A=n.alpha_b2,N=n.alpha_a2;if(h&&d)throw new Error("Lager cannot be both Typ B and Typ C");const et=2.5,Z=Math.max(Math.abs(c),Math.abs(S)),ct=Math.max(Math.abs(_),Math.abs(F)),_t=Math.max(Math.abs(b),Math.abs(j)),C=t*e,z=C+2*et;let P,V,W,st,ot,x,q,at=0,zt=0,bt=0;if(o){if(!l)throw new Error("Diameter (d) is required for round bearings");P=Math.round(Math.PI*l**2/4),at=l-10,V=Math.round(Math.PI*at**2/4),W=Math.round(V*(1-Math.sqrt(ct**2+_t**2)/at)),st=Math.round(at/(4*t)*100)/100,ot=Math.round(at/(4*et)*100)/100,x=0,q=0}else{if(!r||!a)throw new Error("Length (a) and width (b) are required for rectangular bearings");P=r*a,x=r-10,q=a-10,V=x*q,W=Math.round(V*(1-ct/x-_t/q)),bt=2*(x+q),st=Math.round(V/(bt*t)*100)/100,ot=Math.round(V/(bt*et)*100)/100;const T=[.5,.75,1,1.2,1.25,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2,2.5,10],G=[137,100,86.2,80.4,79.3,78.4,76.7,75.3,74.1,73.1,72.2,71.5,70.8,68.3,61.9];zt=Math.round(Ts(a/r,T,G)*10)/10}const ne=235,yt=1.3,Lt=3,ie=1,Vt=Math.round(1e3*(yt*Z*(t*2)*1/(W*ne))*10)/10,se=Math.max(t>12?5:t>8?4:3,Vt),Nt=z+(e-1)*se,Wt=[],H=(T,G,it)=>{(T[G]===null||it>T[G])&&(T[G]=it)},D={epsi_cd:null,epsi_qd:null,epsi_ad:null,epsi_td:null,verdreh_nachw:null,stab_nachw:null,rr_x:null,rr_y:null,mm:null};h&&(D.sigma_cdmin=null,D.nachw_gleit=null);const oe=e*t**3,Me=[{ff_zd:c,v_x:_,v_y:b,alpha_b:g,alpha_a:f},{ff_zd:S,v_x:F,v_y:j,alpha_b:A,alpha_a:N}];for(const T of Me){const G=Math.sqrt(T.v_x**2+T.v_y**2),it=Math.sqrt(T.alpha_a**2+T.alpha_b**2),he=Math.round(1.5*T.ff_zd*1e3/(i*W*st)*1e3)/1e3,$e=Math.round(G/z*1e3)/1e3;let de;o?de=Math.round(it*at**2*t/(2*oe*1e3)*1e3)/1e3:de=Math.round((T.alpha_b*x**2+T.alpha_a*q**2)*t/(2*oe*1e3)*1e3)/1e3;const An=Math.round((he+$e+de)*1e3)/1e3;H(D,"epsi_cd",he),H(D,"epsi_qd",$e),H(D,"epsi_ad",de),H(D,"epsi_td",An);const tn=Math.round(P*i*T.v_x/(C*1e3)*100)/100,en=Math.round(P*i*T.v_y/(C*1e3)*100)/100;let De;o?De=Math.round(i*it*Math.PI*at**6/(512*e*t**3*1e3**3)*100)/100:De=Math.round(i*it*x**5*q/(e*t**3*zt*1e3**3)*100)/100,H(D,"rr_x",tn),H(D,"rr_y",en),H(D,"mm",De);let ue=1e3*T.ff_zd/V;u&&d&&ue<3&&(ue=3);const Cn=ue*t*(1/(5*i*st**2)+1/s),kn=ue*et*(1/(5*i*ot**2)+1/s),In=Math.round((kn+e*Cn)*1e3)/1e3;let Le;o?Le=Math.round(at*Math.sqrt(T.alpha_b**2+T.alpha_a**2)/(Lt*1e3)*1e3)/1e3:Le=Math.round((x*T.alpha_b+q*T.alpha_a)/(Lt*1e3)*1e3)/1e3;const Nn=Math.round(Le/In*1e3)/1e3;H(D,"verdreh_nachw",Nn);const Fn=Math.round(1e3*T.ff_zd/W*1e3)/1e3;let Oe;o?Oe=Math.round(2*at*i*st/(3*C)*1e3)/1e3:Oe=Math.round(2*x*i*st/(3*C)*1e3)/1e3;const Yn=Math.round(Fn/Oe*1e3)/1e3;if(H(D,"stab_nachw",Yn),h){const Re=Math.round(T.ff_zd*1e3/W*100)/100;(D.sigma_cdmin===null||D.sigma_cdmin>Re)&&(D.sigma_cdmin=Re);const jn=.1+1.5*.2/Re,Hn=Math.sqrt(tn**2+en**2),Un=Math.round(Hn/(T.ff_zd*jn)*1e3)/1e3;H(D,"nachw_gleit",Un)}}const Te=D.epsi_cd??0,ae=D.epsi_qd??0,re=D.epsi_ad??0,le=D.epsi_td??0,qt=D.verdreh_nachw??0,ce=D.stab_nachw??0,ze=D.rr_x??0,Pe=D.rr_y??0,m=D.mm??0,M=D.sigma_cdmin??0,Y=D.nachw_gleit??0,Pt={epsi_cd:Te,epsi_qd:ae,epsi_ad:re,epsi_td:le,verdreh_nachw:qt,sigma_cdmin:M,nachw_gleit:Y,stab_nachw:ce,rr_x:ze,rr_y:Pe,t_smin:Vt,mm:m,VerformungUnterDruckSuccess:!0,VerformungUnterSchubSuccess:ae<=1,VerformungWinkelverdrehungSuccess:!0,SummeDerTeilverformungenSuccess:le<=7,VerdrehungsgrenzbedingungSuccess:qt<=1,MindestpressungLagertypBSuccess:!h||M>=3,GleitnachweisSuccess:!h||Y<=1,StabilitaetSuccess:ce<=1,t_2:et,tt_e:C,tt_q:z,tt_b:Nt,aa:P,a_str:x,b_str:q,d_str:at,aa_str:V,aa_r:W,ss_1:st,t_s:se,gg:i,ee_b:s,f_y:ne,kk_p:yt,kk_rd:Lt,kk_l:ie,kk_s:zt};return Wt.push(Pt),Wt}let U;function zn(n){U=n||Ke(On);const t={is_round:U.isRound,a:U.a,b:U.b,d:U.d,t_1:U.t_1,n:U.n,gg:U.gg_d,ee_b:U.ee_b,is_ztv_ing:U.VorgabenZTVING,is_typ_b:U.l_typ==="B",is_typ_c:U.l_typ==="C",ff_zd1:U.ff_zd1,ff_zd2:U.ff_zd2,v_x1:U.v_x1,v_x2:U.v_x2,v_y1:U.v_y1,v_y2:U.v_y2,alpha_b1:U.alpha_b1,alpha_b2:U.alpha_b2,alpha_a1:U.alpha_a1,alpha_a2:U.alpha_a2},e=zs(t);Tn.setCalculationResult(e[0]||null)}const dn=Ge(!1);function Gt(n,t={}){const{width:e=50,height:i=50,depth:s=50,position:o={x:0,y:0,z:0},color:r=4886754,widthSegments:a=1,heightSegments:l=1,depthSegments:u=1}=t,h=new yi(e,i,s,a,l,u),d=new Se({color:r,shininess:100,specular:2236962}),c=new ft(h,d);return c.position.set(o.x,o.y,o.z),c.castShadow=!0,c.receiveShadow=!0,n.add(c),c}function Kt(n,t={}){const{radius:e=25,height:i=50,position:s={x:0,y:0,z:0},color:o=4886754,radialSegments:r=32,heightSegments:a=1}=t,l=new bi(e,e,i,r,a),u=new Se({color:o,shininess:100,specular:2236962}),h=new ft(l,u);return h.position.set(s.x,s.y,s.z),h.castShadow=!0,h.receiveShadow=!0,n.add(h),h}function Ce(n,t={}){const{width:e=50,height:i=50,depth:s=50,extrudeDepth:o=20,position:r={x:0,y:0,z:0},color:a=4886754}=t,l=new vi,u=e/2,h=i/2;l.moveTo(-u,-h),l.lineTo(u,-h),l.lineTo(u,h),l.lineTo(-u,h),l.lineTo(-u,-h);const d={depth:o,bevelEnabled:!1,steps:1,curveSegments:1},c=new wn(l,d);c.computeBoundingBox();const _=c.boundingBox,b=new y;_.getCenter(b),c.translate(-b.x,-b.y,-b.z);const g=new Se({color:a,shininess:100,specular:2236962}),f=new ft(c,g);return f.position.set(r.x,r.y,r.z),f.castShadow=!0,f.receiveShadow=!0,n.add(f),f}function un(n){n.geometry.computeBoundingBox(),n.updateMatrixWorld(!0);const t=new $t().setFromObject(n),e=new y;t.getCenter(e);const i=new y(e.x,t.max.y,e.z),s=new y(e.x,t.min.y,e.z);return{mesh:n,boundingBox:t.clone(),centerPoint:e.clone(),upperPoint:i.clone(),lowerPoint:s.clone()}}function ke(n,t){const e=un(t),i=un(n),s=e.upperPoint,o=i.centerPoint.y-i.lowerPoint.y,r=s.y+o;n.position.y=r}function Ps(n,t){n.remove(t),t.geometry.dispose(),t.material instanceof Ot&&t.material.dispose()}let Ie=null,Ft=null;const me=11765,Ds=.03,Po=.012,Ls=2e-4;async function Pn(){return Ie||Ft||(Ft=new Promise((n,t)=>{new ys().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",i=>{Ie=i,Ft=null,n(i)},void 0,i=>{Ft=null,t(i)})}),Ft)}function Ue(n,t,e){return new Es(n,{font:t,size:e,depth:Ls,curveSegments:12,bevelEnabled:!0,bevelThickness:3e-4,bevelSize:2e-4,bevelOffset:0,bevelSegments:3})}function Be(n){n.computeBoundingBox();const t=n.boundingBox;if(t){const e=-(t.max.x-t.min.x)/2,i=-(t.max.y-t.min.y)/2;n.translate(e,i,0)}}function Ze(n){return new wi({color:n,metalness:.3,roughness:.4})}function Os(n,t,e,i,s,o=.05,r){const a=new y(-i.z,0,i.x).normalize(),l=new At().setFromPoints([new y(t.x-a.x*o/2,t.y,t.z-a.z*o/2),new y(t.x+a.x*o/2,t.y,t.z+a.z*o/2)]),u=new wt(l,s);n.add(u),r.push(u);const h=new At().setFromPoints([new y(e.x-a.x*o/2,e.y,e.z-a.z*o/2),new y(e.x+a.x*o/2,e.y,e.z+a.z*o/2)]),d=new wt(h,s);n.add(d),r.push(d)}function Rs(n,t){return t.forEach(e=>{n.remove(e),e instanceof ft&&(e.geometry&&e.geometry.dispose(),e.material instanceof Ot&&e.material.dispose()),e instanceof wt&&(e.geometry&&e.geometry.dispose(),e.material instanceof Ot&&e.material.dispose()),e instanceof xi&&e.material instanceof Ot&&e.material.dispose()}),[]}function As(n,t){return t.forEach(e=>{n.remove(e),e instanceof ft&&(e.geometry&&e.geometry.dispose(),e.material instanceof Ot&&e.material.dispose()),e instanceof wt&&(e.geometry&&e.geometry.dispose(),e.material instanceof Ot&&e.material.dispose()),e instanceof He&&(e.line&&e.line.geometry&&e.line.geometry.dispose(),e.line&&e.line.material instanceof Ot&&e.line.material.dispose(),e.cone&&e.cone.geometry&&e.cone.geometry.dispose(),e.cone&&e.cone.material instanceof Ot&&e.cone.material.dispose())}),[]}function Cs(n,t){return[[n.min.x,t,n.min.z],[n.max.x,t,n.min.z],[n.min.x,t,n.max.z],[n.max.x,t,n.max.z]]}let xt=[],vt=[];const kt=new Map,Yt=new Map;function ks(){return[...xt,...vt]}function fn(n){vt.forEach(t=>{if(t instanceof ft&&kt.has(t)){const e=kt.get(t),i=n?-Math.PI:0;t.rotation.z=e+i}})}function _n(n){const t=js();xt.forEach(e=>{if(n)if(e instanceof wt&&e.geometry){const i=e.geometry.attributes.position;if(i){if(!Yt.has(e)){const s=[];for(let o=0;o<i.count;o++)s.push(i.getY(o));Yt.set(e,s)}for(let s=0;s<i.count;s++)i.setY(s,t);i.needsUpdate=!0}}else e instanceof ft&&e.position&&(Yt.has(e)||Yt.set(e,[e.position.y]),e.position.y=t+.001);else{const i=Yt.get(e);if(i)if(e instanceof wt&&e.geometry){const s=e.geometry.attributes.position;if(s&&i.length===s.count){for(let o=0;o<s.count;o++)s.setY(o,i[o]);s.needsUpdate=!0}}else e instanceof ft&&e.position&&i.length>0&&(e.position.y=i[0])}}),n||Yt.clear()}const Ve=Ds;async function Ne(n,t,e,i,s,o=0,r=0){try{const a=await Pn(),l=Ue(s,a,Ve);Be(l);const u=Ze(16711680),h=new ft(l,u),d=new y(e[0]-t[0],0,e[2]-t[2]).normalize(),c=new y(-d.z,0,d.x),_=(t[0]+e[0])/2+o+c.x*i,b=(t[2]+e[2])/2+r+c.z*i;h.position.set(_,t[1]+.001,b),h.rotation.x=-Math.PI/2;const g=Math.atan2(d.z,d.x)+Math.PI;h.rotation.z=g,kt.set(h,g),n.add(h),xt.push(h)}catch(a){console.error("Failed to load font for 3D text:",a)}}function Fe(n,t,e,i,s,o=.05){Os(n,t,e,i,s,o,xt)}function Dn(n){xt.forEach(t=>{t instanceof ft&&kt.delete(t)}),xt=Rs(n,xt)}function Is(n){vt.forEach(t=>{t instanceof ft&&kt.delete(t)}),vt=As(n,vt)}async function Ns(n,t=new y(0,0,0)){const o=new xn({color:new En(me)}),r=me,a=new y(t.x+.2,t.y,t.z),l=new At().setFromPoints([t,a]),u=new wt(l,o);n.add(u),vt.push(u);const h=new y(1,0,0),d=new He(h,a,.1,r,.1*.5,.1*.3);n.add(d),vt.push(d);const c=new y(t.x,t.y,t.z+.2),_=new At().setFromPoints([t,c]),b=new wt(_,o);n.add(b),vt.push(b);const g=new y(0,0,1),f=new He(g,c,.1,r,.1*.5,.1*.3);n.add(f),vt.push(f);try{const S=await Pn(),F=Ue(Xt("bridgeBearing.scene.axisLabel.x"),S,Ve);Be(F);const j=Ze(me),A=new ft(F,j);A.position.set(t.x+.2*1.2+.03,t.y+.001,t.z+.05),A.rotation.x=-Math.PI/2,A.rotation.z=Math.PI,kt.set(A,Math.PI),n.add(A),vt.push(A);const N=Ue("y",S,Ve);Be(N);const et=Ze(me),Z=new ft(N,et);Z.position.set(t.x+.05,t.y+.001,t.z+.2*1.2),Z.rotation.x=-Math.PI/2,Z.rotation.z=Math.PI,kt.set(Z,Math.PI),n.add(Z),vt.push(Z)}catch(S){console.error("Failed to create 3D text for coordinate system:",S)}}async function Fs(n,t,e,i=0,s=0,o=!1){Dn(n);const r=Cs(t,e+.01);if(!r||r.length<2)return;const a=r[3],l=r[1],u=r[2],h=new xn({color:16711680}),d=Ke(On);if(o){let c=a,_=l,b=.1+i/2,g=0,f=new At().setFromPoints([new y(c[0]+b,c[1],c[2]+g),new y(_[0]+b,_[1],_[2]+g)]);const S=new wt(f,h);n.add(S),xt.push(S);const F=new y(c[0]+b,c[1],c[2]+g),j=new y(_[0]+b,_[1],_[2]+g),A=new y().subVectors(j,F).normalize();Fe(n,F,j,A,h);const N=d.d;await Ne(n,c,_,-.03,`d = ${N} mm`,b,g)}else{let c=a,_=l,b=.1+i/2,g=0,f=new At().setFromPoints([new y(c[0]+b,c[1],c[2]+g),new y(_[0]+b,_[1],_[2]+g)]);const S=new wt(f,h);n.add(S),xt.push(S);const F=new y(c[0]+b,c[1],c[2]+g),j=new y(_[0]+b,_[1],_[2]+g),A=new y().subVectors(j,F).normalize();Fe(n,F,j,A,h);const N=d.a,et=d.b;await Ne(n,c,_,-.03,`b = ${et} mm`,b,g),c=a,_=u,b=0,g=.1+s/2,f=new At().setFromPoints([new y(c[0]+b,c[1],c[2]+g),new y(_[0]+b,_[1],_[2]+g)]);const Z=new wt(f,h);n.add(Z),xt.push(Z);const ct=new y(c[0]+b,c[1],c[2]+g),_t=new y(_[0]+b,_[1],_[2]+g),C=new y().subVectors(_t,ct).normalize();Fe(n,ct,_t,C,h),await Ne(n,c,_,.03,`a = ${N} mm`,b,g)}}let Dt=new y(0,0,0),Ct=[];function Ys(n,t=[0,0,0]){const i=n.isRound,s=n.laengeElastomer*.001,o=n.diameter*.001,r=n.schichtdicke*n.anzahlSchichten*.001,a=i?o:s,l=a*.5,u=a*.1,h=l+l*.08+u+r+u,d=t[0],c=t[1]+h/2,_=t[2],b=new y(d,c,_);return console.log("calculateElastomerCenter called (predicted from params):",{params:{a:n.laengeElastomer,b:n.breiteElastomer,n:n.anzahlSchichten,t_1:n.schichtdicke},calculations:{referenceDim:a,plinthHeight:l,baseHeight:u,layerThickness:r,totalHeight:h},groundPosition:t,center:{x:b.x,y:b.y,z:b.z}}),b}function js(){return Ct.length>3&&Ct[3]?Ct[3].position.y:0}function mn(n){Ct.length!==0&&Ct.forEach((t,e)=>{const i=t.material;e===3?(i.transparent=!1,i.opacity=1):n?e>3&&(i.visible=!1):(i.transparent=!1,i.visible=!0,i.opacity=1),i.needsUpdate=!0})}class Do{constructor(t,e){ht(this,"scene");ht(this,"currentElastomerObjects",[]);ht(this,"camera");this.scene=t,this.camera=e}createElastomer(t,e=[0,0,0]){var zt;const i=[],o=t.isRound,r=t.laengeElastomer*.001,a=t.breiteElastomer*.001,l=t.diameter*.001,d=(((zt=Ke(Tn).calculationResult)==null?void 0:zt.tt_e)??t.schichtdicke*t.anzahlSchichten)*.001,c=o?l:r,_=c*.5,b=c*.1,g=e[1]+_/2,f=c*.4;let S;o?S=Kt(this.scene,{radius:(l+f)/2,height:_,position:{x:e[0],y:g,z:e[2]},color:16116681}):S=Gt(this.scene,{width:r+f,height:_,depth:a+f,position:{x:e[0],y:g,z:e[2]},color:16116681}),i.push(S);const F=new $t().setFromObject(S);let j;o?j=Kt(this.scene,{radius:(l+f*.9)/2,height:_*.08,position:{x:e[0],y:0,z:e[2]},color:16116681}):j=Gt(this.scene,{width:r+f*.9,height:_*.08,depth:a+f*.9,position:{x:e[0],y:0,z:e[2]},color:16116681}),i.push(j);const A=c*.2;let N;o?N=Kt(this.scene,{radius:(l+A)/2,height:b,position:{x:e[0],y:0,z:e[2]},color:12895428}):N=Gt(this.scene,{width:r+A,height:b,depth:a+A,position:{x:e[0],y:0,z:e[2]},color:12895428}),i.push(N);const et=2894892,Z=d;let ct;o?ct=Kt(this.scene,{radius:l/2,height:Z,position:{x:e[0],y:0,z:e[2]},color:et}):ct=Gt(this.scene,{width:r,height:Z,depth:a,position:{x:e[0],y:0,z:e[2]},color:et}),i.push(ct);const _t=new $t().setFromObject(ct),C=F.getSize(new y),z=_t.getSize(new y),P=C.x-z.x,V=C.z-z.z;let W;o?W=Kt(this.scene,{radius:(l+A)/2,height:b,position:{x:e[0],y:0,z:e[2]},color:12895428}):W=Gt(this.scene,{width:r+A,height:b,depth:a+A,position:{x:e[0],y:0,z:e[2]},color:12895428}),i.push(W);for(let bt=1;bt<i.length;bt++)ke(i[bt],i[bt-1]);const st=new $t;i.forEach(bt=>st.expandByObject(bt)),Dt=st.getCenter(new y),console.log("Elastomer center calculated (from actual geometry):",{x:Dt.x,y:Dt.y,z:Dt.z}),this.currentElastomerObjects=i,Ct=i,Fs(this.scene,_t,e[1],P,V,o);let ot,x,q;x=.01,o?(ot=-t.diameter*.001*1.15/2-.18,q=-(t.diameter*.001*1.15)/2-.2):(ot=-t.laengeElastomer*.001*1.18/2-.18,q=-(t.breiteElastomer*.001*1.18)/2-.2);const at=new y(e[0]+ot,e[1]+x,e[2]+q);return Ns(this.scene,at),i}removeCurrentElastomer(){this.currentElastomerObjects.forEach(t=>{Ps(this.scene,t)}),this.currentElastomerObjects=[],Ct=[],Dn(this.scene),Is(this.scene)}updateElastomer(t,e=[0,0,0]){return this.removeCurrentElastomer(),this.createElastomer(t,e)}createDemoScene(t){this.createElastomer(t)}createSecondStack(t=100){const e=Ce(this.scene,{width:50,height:50,extrudeDepth:20,position:{x:t,y:0,z:0},color:5294200}),i=Ce(this.scene,{width:35,height:35,extrudeDepth:15,color:16753920}),s=Ce(this.scene,{width:25,height:25,extrudeDepth:12,color:9662683});return ke(i,e),ke(s,i),{base:e,middle:i,top:s}}focusCameraOnElastomer(){}}const Hs=15e4;class Us{constructor(t){ht(this,"config");ht(this,"isAnimating",!0);ht(this,"spherical");ht(this,"cameraOffset");ht(this,"isTransitioning",!1);ht(this,"transitionStartTime",0);ht(this,"transitionDuration",2e4);ht(this,"transitionStartPosition",null);ht(this,"transitionStartTarget",null);ht(this,"transitionTargetPosition",null);this.config=t,this.spherical=new je,this.cameraOffset=new y}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}start(){this.isAnimating||(this.isTransitioning=!0,this.transitionStartTime=0),this.isAnimating=!0}stop(){this.isAnimating=!1,this.isTransitioning=!1}setTransitionDuration(t){this.transitionDuration=t}isActive(){return this.isAnimating}animate(t,e,i){if(!this.isAnimating||!e)return;const s=t/Hs%2;let o=s<=1?s:2-s;o=(o+.5)%1;const r=vn.lerp(this.config.azimuthStart,this.config.azimuthEnd,o);this.spherical.set(this.config.radius,this.config.polarAngle,r),this.cameraOffset.setFromSpherical(this.spherical);const a=this.cameraOffset.clone().add(this.config.focusPoint);if(this.isTransitioning){this.transitionStartTime===0&&(this.transitionStartTime=t,this.transitionStartPosition=e.position.clone(),this.transitionStartTarget=i.target.clone(),this.transitionTargetPosition=a.clone());const l=t-this.transitionStartTime;if(l<this.transitionDuration){const u=l/this.transitionDuration,h=u*u*(3-2*u);e.position.lerpVectors(this.transitionStartPosition,a,h),i.target.lerpVectors(this.transitionStartTarget,this.config.focusPoint,h),i.update();return}else this.isTransitioning=!1,this.transitionStartTime=0,this.transitionStartPosition=null,this.transitionStartTarget=null,this.transitionTargetPosition=null}e.position.copy(a),i.target.copy(this.config.focusPoint),i.update()}}function Bs(n,t){const e=()=>{t.stop()},i=()=>{t.start()};return n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",i),()=>{n.removeEventListener("mouseenter",e),n.removeEventListener("mouseleave",i)}}let Ln=new mt,pe,ge=null,be=null,jt=!1,Qt=0,Ht=null,B=null;function Zs(n){if(!n)return 3.5;const t=2.5,e=n.isRound?n.d:n.a,i=(e*1.5+300)/1e3;return console.log("Camera radius calculation (Brueckenlager) - isRound:",n.isRound,"dimension:",e,"(a:"+n.a+", d:"+n.d+")","scaleFactor:",i),t*i}function Je(n){const t={radius:3.5,polarAngle:Math.PI/4,azimuthStart:0,azimuthEnd:Math.PI,focusPoint:Dt};B=new Us({...t,...n})}function Vs(n){if(console.log("regenerateCameraConfiguration (Brueckenlager) called with params:",n),B||(console.log("Automatic camera not initialized, initializing now"),Je()),B&&n){const t=Zs(n),e={selectedHeight:n.heightOfElastomer??84.5,anzahlSchichten:n.n??6,schichtdicke:n.t_1??12,laengeElastomer:n.a??350,breiteElastomer:n.b??450,isRound:n.isRound??!1,diameter:n.d??400},i=[.3,.6,0],s=Ys(e,i);console.log("=== Camera Focus Point Update (Brueckenlager) ===",{radius:t,focusPoint:{x:s.x,y:s.y,z:s.z},groundPosition:i,elastomerParams:{a:e.laengeElastomer,b:e.breiteElastomer,n:e.anzahlSchichten,t_1:e.schichtdicke,isRound:e.isRound,d:e.diameter}}),B.updateConfig({radius:t,focusPoint:s})}}function Ws(n){const t=n.target.getBoundingClientRect(),e=n.clientX-t.left,i=n.clientY-t.top,s=e/n.target.clientWidth*2-1,o=-(i/n.target.clientHeight)*2+1;return new mt(s,o)}function qs(n,t,e){if(!n||!t)return;const i=Ln,s=new y(i.x,i.y,1);s.unproject(n),s.sub(n.position),s.normalize();const r=n.position.distanceTo(t.target)*(1-e),a=s.clone().multiplyScalar(r);n.position.add(a),t.target.add(a),t.update()}function Lo(n=35){return new Sn(n,1,.01,1e3)}function Oo(n,t,e){const i=new as(n,t.domElement);return i.target.set(e[0],e[1],e[2]),i.minDistance=.1,i.maxDistance=1e3,i.enableZoom=!1,i.update(),i}function Ro(n,t,e){const i=s=>{s.preventDefault(),Ln.copy(Ws(s));let o=1;switch(s.deltaMode){case 2:o=1+s.deltaY*.025;break;case 1:o=1+s.deltaY*.01;break;default:o=1+s.deltaY*25e-5;break}qs(t,e,o)};return n.domElement.addEventListener("wheel",i,{passive:!1}),()=>{n.domElement.removeEventListener("wheel",i)}}function Ao(n,t,e){const i=()=>void 0;return n.addEventListener("mousemove",i),n.addEventListener("mousedown",i),n.addEventListener("wheel",i),pe=setInterval(()=>void 0,100),()=>{n.removeEventListener("mousemove",i),n.removeEventListener("mousedown",i),n.removeEventListener("wheel",i),pe&&(clearInterval(pe),pe=void 0)}}function Co(n,t,e=.002){n.update()}function ko(n,t,e){if(t&&(!jt&&pn(t)?(fn(!0),mn(!0),_n(!0)):jt||(fn(!1),mn(!1),_n(!1)),B||Je(),!!(B!=null&&B.isActive()))){if(jt){Qt===0&&(Qt=n,ge=t.position.clone(),be=e.target.clone(),Ht=Gs());const s=n-Qt;if(!ge||!Ht||!be){console.error("Top view positions not initialized properly"),jt=!1;return}if(s<1e3){const o=s/1e3,r=o*o*(3-2*o);t.position.lerpVectors(ge,Ht,r),e.target.lerpVectors(be,Dt,r),t.lookAt(e.target),e.update()}else t.position.copy(Ht),e.target.copy(Dt),t.lookAt(e.target),e.update(),jt=!1,Qt=0,ge=null,be=null,Ht=null,B==null||B.stop();return}if(pn(t)){B==null||B.stop();return}B&&B.animate(n,t,e)}}function Io(n){return B||Je(),B?Bs(n,B):()=>{}}function pn(n,t){const e=Dt,i=n.position,s=.01;return Math.abs(i.x-e.x)<s&&Math.abs(i.z-e.z)<s}function Gs(){const n=Dt,t=ks();if(t.length===0)return new y(n.x,n.y+3,n.z);let e=.5;const i=30;let s=0;const o=new Sn(35,1,.01,1e3);for(;s<i;){o.position.set(n.x,n.y+e,n.z),o.lookAt(n),o.updateMatrixWorld(),o.updateProjectionMatrix();const r=new Ei,a=new Si;a.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),r.setFromProjectionMatrix(a);let l=!0;for(const u of t){u.updateMatrixWorld(!0);const h=new $t().setFromObject(u);if(!r.intersectsBox(h)){l=!1;break}}if(l){e*=1.1;break}e*=1.2,s++}return new y(n.x,n.y+e,n.z)}function No(){jt=!0,Qt=0,Ht=null,B==null||B.start()}let ve=null;function Fo(n){ve=n}const Ks=84.5,ye={isRound:!1,a:350,b:450,d:400,heightOfElastomer:Ks,ff_zd1:3e3,ff_zd2:1e3,v_x1:10,v_x2:5,v_y1:0,v_y2:0,alpha_b1:15,alpha_b2:10,alpha_a1:3,alpha_a2:3,n:6,t_1:12,gg_d:.9,ee_b:2e3,l_typ:"B",VorgabenZTVING:!1};let we=null;function Xs(){we=Rn(ye);const{subscribe:n,set:t,update:e}=Ge(ye),i={subscribe:n,set:s=>{t(s),Ye(s)},update:s=>{e(o=>{const r=s(o);return Ye(r),r})},reset:()=>{t(ye),Ye(ye)},updateField:(s,o)=>{i.update(r=>({...r,[s]:o}))}};return i}const On=Xs();zn();function Qs(n,t){return n.lagertyp===t.lagertyp&&n.selectedCombination===t.selectedCombination&&n.selectedHeight===t.selectedHeight&&n.anzahlSchichten===t.anzahlSchichten&&n.schichtdicke===t.schichtdicke&&n.laengeElastomer===t.laengeElastomer&&n.breiteElastomer===t.breiteElastomer&&n.isRound===t.isRound&&n.diameter===t.diameter}function Rn(n){const t=Qe.findIndex(e=>e.length===n.a&&e.width===n.b);return{lagertyp:"B",selectedCombination:t>=0?t:0,selectedHeight:n.heightOfElastomer,anzahlSchichten:n.n,schichtdicke:n.t_1,laengeElastomer:n.a,breiteElastomer:n.b,isRound:n.isRound,diameter:n.d}}function Ye(n){console.log("Parameter changed callback (Brueckenlager) - a:",n.a,"b:",n.b),dn.set(!0);const t=Rn(n);zn(n),setTimeout(()=>{dn.set(!1)},300),Vs(n),(!we||!Qs(t,we))&&(we={...t},ve&&setTimeout(()=>{ve&&ve(t)},10))}function Yo(){return Qe.map(n=>({length:n.length,width:n.width}))}var Js=Rt("<title> </title>"),$s=Rt('<svg><!><path fill="none" d="M16,8a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,16,8Zm4,13.875H17.125v-8H13v2.25h1.875v5.75H12v2.25h8Z" data-icon-path="inner-path"></path><path d="M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,6a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,16,8Zm4,16.125H12v-2.25h2.875v-5.75H13v-2.25h4.125v8H20Z"></path></svg>');function to(n,t){const e=X(t,["children","$$slots","$$events","$$legacy"]),i=X(e,["size","title"]);Et(t,!1);const s=tt(),o=tt();let r=p(t,"size",8,16),a=p(t,"title",8,void 0);$(()=>(k(e),k(a())),()=>{K(s,e["aria-label"]||e["aria-labelledby"]||a())}),$(()=>(v(s),k(e)),()=>{K(o,{"aria-hidden":v(s)?void 0:!0,role:v(s)?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})}),It(),Tt();var l=$s();Mt(l,()=>({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:r(),height:r(),...v(o),...i}));var u=L(l);{var h=d=>{var c=Js(),_=L(c,!0);O(c),J(()=>ut(_,a())),R(d,c)};pt(u,d=>{a()&&d(h)})}Ee(2),O(l),R(n,l),St()}var eo=lt('<span class="svelte-13x9acq"></span>');function jo(n,t){Et(t,!1);let e=p(t,"formula",8),i=p(t,"padding",8,null),s=tt(),o=0;async function r(){if(!v(s)||!e())return;const u=++o;try{const{render:h}=await Ri(async()=>{const{render:d}=await import("./D8Do4g9D.js");return{render:d}},[],import.meta.url);if(u!==o||!v(s))return;rn(s,v(s).innerHTML=""),h(e(),v(s),{throwOnError:!1,displayMode:!1})}catch(h){console.error("KaTeX rendering error:",h),v(s)&&rn(s,v(s).textContent=e())}}Vn(async()=>{await ni(),r()}),$(()=>(k(e()),v(s)),()=>{e()&&v(s)&&r()}),It(),Tt();var a=eo();let l;te(a,u=>K(s,u),()=>v(s)),J(()=>l=yn(a,"",l,{padding:i()!==null?`${i()}px`:void 0})),R(n,a),St()}const Ho=12303291,Uo=2894892,Bo=13e3,Zo=1e3;function Vo(){const n=new Mi;return n.background=new En(10526880),n.fog=new Ti(10526880,10,500),n}function Wo(n){const t=new zi({antialias:!0});return t.setPixelRatio(window.devicePixelRatio),t.shadowMap.enabled=!0,t.shadowMap.type=Pi,t.localClippingEnabled=!0,n.appendChild(t.domElement),t}function qo(n,t=-10){const e=new ft(new Di(1e3,1e3),new Se({color:13355979,depthWrite:!1}));e.rotation.x=-Math.PI/2,e.position.y=t,e.receiveShadow=!0,n.add(e)}function no(n,t,e,i,s,o){const r=new Oi(s,o);r.position.set(t,e,i),r.castShadow=!0;const a=50;return r.shadow.camera.left=-50,r.shadow.camera.right=a,r.shadow.camera.top=a,r.shadow.camera.bottom=-50,r.shadow.camera.near=1,r.shadow.camera.far=1e3,r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.radius=2,r.shadow.bias=-5e-4,n.add(r),n.add(r.target),r}function Go(n,t={x:0,y:500,z:0}){return n.add(new Li(9272444,4802918,5)),no(n,t.x,t.y,t.z,16777215,2)}function Ko(n){n.setAnimationLoop(null)}var io=lt('<span slot="tooltipText"><strong> </strong><br/> <br/> <br/> </span>'),so=lt('<div class="tooltip-container svelte-17njmpp"><!></div>');function Xo(n,t){Et(t,!1);let e=p(t,"rightOffset",8,150);Tt();var i=so(),s=L(i);ss(s,{get icon(){return to},direction:"left",$$slots:{tooltipText:(o,r)=>{var a=io(),l=L(a),u=L(l,!0);O(l);var h=rt(l,2),d=rt(h,2),c=rt(d,2);O(a),J((_,b,g,f)=>{ut(u,_),ut(h,`  ${b??""}`),ut(d,`  ${g??""}`),ut(c,`  ${f??""}`)},[()=>Xt("bridgeBearing.scene.tooltip.title"),()=>Xt("bridgeBearing.scene.tooltip.rotate"),()=>Xt("bridgeBearing.scene.tooltip.zoom"),()=>Xt("bridgeBearing.scene.tooltip.pan")],Jt),R(o,a)}}}),O(i),J(()=>yn(i,`right: ${e()??""}px;`)),R(n,i),St()}function Qo(n,t){let e=p(t,"type",3,"organization");const i="https://www.statiqs.eu",s={"@context":"https://schema.org","@type":"Organization",name:"statiqs",url:i,logo:`${i}/logo_square_1-0.svg`,description:"Civil and software engineering solutions for structural design tools and bearing calculations.",contactPoint:{"@type":"ContactPoint",contactType:"Customer Service",email:"info@statiqs.eu"},sameAs:[]},o={"@context":"https://schema.org","@type":"WebSite",name:"ElastoTool",url:i,description:"Professional tool for analyzing elastomeric bearings and calculating shear deformations.",publisher:s,inLanguage:["de","en","fr","es","it"]},r={"@context":"https://schema.org","@type":"SoftwareApplication",name:"ElastoTool",applicationCategory:"EngineeringApplication",operatingSystem:"Web Browser",offers:{"@type":"Offer",price:"0",priceCurrency:"EUR"},description:"Free online tool for preliminary design of elastomeric bearings, bridge bearings, and shear deformation bearings according to DIN EN 1337.",featureList:["Elastomeric bridge bearing calculation according to DIN EN 1337-3","Shear deformation bearing design","Mass-spring system calculations","3D visualization","PDF report generation","Multilingual support (DE, EN, FR, ES, IT)"],screenshot:`${i}/logo_square_1-0.svg`,author:s,inLanguage:["de","en","fr","es","it"]},a=e()==="organization"?s:e()==="website"?o:r;ii(l=>{var u=We(),h=xe(u);Ci(h,()=>`<script type="application/ld+json">${JSON.stringify(a)}<\/script>`),R(l,u)})}export{Bo as A,Ci as B,Do as C,Ho as D,Rs as E,jo as F,Os as G,Pn as H,to as I,Ue as J,Be as K,Ze as L,Po as M,So as N,me as O,As as P,Us as Q,Bs as R,Qo as S,ss as T,no as U,Uo as V,Tn as W,dn as X,Gi as Y,ki as Z,zo as a,To as b,qo as c,Go as d,No as e,Vo as f,Yo as g,Wo as h,Lo as i,Oo as j,Ao as k,Io as l,ko as m,Ko as n,Rn as o,On as p,ye as q,Ss as r,Ro as s,Fo as t,Co as u,Xo as v,Mo as w,xo as x,Zo as y,Eo as z};
