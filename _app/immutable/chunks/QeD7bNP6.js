import{aQ as se,r as ce,B as ie,A as le,ai as T,p as _e,e as p,m as fe,a8 as de,f as ue,c as he,a as be,i as we}from"./DYCQwRL8.js";import{l as ge,o as me,k as Se}from"./CpvxbhX2.js";import"./CWj6FrbW.js";import"./CZB9eVzO.js";import{b as ve}from"./WwlshBQs.js";import{i as Me}from"./CwgNvKtK.js";import{p as ye}from"./Cf2sSQny.js";import{k as pe,d as Ee,W as xe,l as Ae,M,P as Ie,m as z,H as ke,D as Pe,G as B,B as Y,h as K,K as Ne,N as Re,O as Te,Q as ze,R as Ge,V as Q,q as De,t as Ce,u as Le,T as Be,U as qe,z as Oe}from"./BVhE0l85.js";function St(e,n,t=n){var s=se();ge(e,"input",r=>{var o=r?e.defaultValue:e.value;if(o=G(e)?D(o):o,t(o),s&&o!==(o=n())){var a=e.selectionStart,c=e.selectionEnd;e.value=o??"",c!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(c,e.value.length))}}),(ce&&e.defaultValue!==e.value||ie(n)==null&&e.value)&&t(G(e)?D(e.value):e.value),le(()=>{var r=n();G(e)&&r===D(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function G(e){var n=e.type;return n==="number"||n==="range"}function D(e){return e===""?null:+e}const J={nachw_vert:0,nachw_rotb:0,nachw_schub:0,querz_x:0,querz_y:0};function He(){const{subscribe:e,set:n,update:t}=T(J);return{subscribe:e,set:n,update:t,reset:()=>n(J)}}const Fe=He();function Ue(e){const n=e.a*e.b;let t,s;e.n_b===0||e.is_wirksamgeschlossen===1?(t=n,s=Math.round(n/(2*e.t*(e.a+e.b))*1e3)/1e3):(t=Math.round(n-e.n_b*Math.PI*Math.pow(e.d_b/2,2)),s=Math.round((n-.25*Math.PI*e.n_b*Math.pow(e.t,2))/(2*e.t*(e.a+e.b)+e.t*Math.PI*e.n_b*e.d_b)*1e3)/1e3);const r=e.is_ortbeton===0?10:10/2,a=Math.round(.625/e.a*1e3*10)/10+r,c=e.alpha_a,l=e.alpha_b+a,d=Math.sqrt(Math.pow(c,2)+Math.pow(l,2)),_=Math.min(450*e.t/e.a,48),i=48,u=Math.round(l/_*1e3)/1e3,m=Math.round(d/i*1e3)/1e3,h=Math.round(1e3*e.ff_zd/t*10)/10;let g;s<2.33?g=Math.round((5.3805*s-.6536)*10)/10:g=Math.round((10.635*s-12.89)*10)/10;const E=Math.round(h/g*1e3)/1e3,y=Math.round((e.v_a/e.t+e.ff_x*1e3/(e.gg*t))*100)/100,P=Math.round((e.v_b/e.t+e.ff_y*1e3/(e.gg*t))*100)/100,b=Math.sqrt(Math.pow(y,2)+Math.pow(P,2)),N=Math.round(b/(.6*(e.t-2)/e.t)*1e3)/1e3,x=5,R=5,A=e.c_nom+10;return{aa:n,a_eff:t,s,alpha_b_zus:a,alpha_b_ges:l,alpha_a_ges:c,alpha_ges:d,alpha_bmax:_,alpha_resmax:i,nachw_rotb:u,nachw_rotres:m,sigma_ed:h,sigma_rd:g,nachw_vert:E,tan_gamx:y,tan_gamy:P,tan_gamxy:b,nachw_schub:N,querz_x:x,querz_y:R,c_rand:A}}function Ze(e){const n={is_streifen:e.is_streifen,a:e.a,b:e.b,t:e.t,c_nom:e.c_nom,is_dorn:e.is_dorn,d_b:e.d_b,d_d:e.d_d,n_b:e.n_b,ff_zd:e.ff_zd,v_a:e.v_a,v_b:e.v_b,alpha_a:e.alpha_a,alpha_b:e.alpha_b,gg:e.gg,ff_x:e.ff_x,ff_y:e.ff_y,is_ortbeton:e.is_ortbeton,is_wirksamgeschlossen:e.is_wirksamgeschlossen},t=Ue(n);Fe.set({nachw_vert:t.nachw_vert,nachw_rotb:t.nachw_rotb,nachw_schub:t.nachw_schub,querz_x:t.querz_x,querz_y:t.querz_y})}const k={s_65:{check:!0,thicknesses:e=>[10,15,20,25,30].filter(n=>n===10||e>=70),sigma_rd_rule:e=>e<=6.25?4.03*e**1.16:33.9,rot_b_rule:(e,n)=>Math.min(450*e/n,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},s_70:{check:!0,thicknesses:e=>[10,15,20].filter(n=>n===10||e>=70),sigma_rd_rule:e=>e<=5?6.99*e:34.95,rot_b_rule:(e,n)=>Math.min(450*e/n,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},esz_100:{check:!0,thicknesses:e=>[10,15,20,25,30].filter(n=>n===10||e>=70),sigma_rd_rule:e=>e<=2.33?5.3805*e-.6536:e<=2.5?10.635*e-12.89:e<=5?8.4004*e-7.3293:34.7,rot_b_rule:(e,n)=>Math.min(450*e/n,48),rot_res_rule:48,"Nachweis erfolgreich t":[]},conti_60:{check:!0,thicknesses:[10,20,30],sigma_rd_rule:e=>e<=5?.315*e**2+4.035*e:28.05,rot_b_rule:(e,n)=>Math.min(450*e/n,40),rot_res_rule:40,"Nachweis erfolgreich t":[]}};function Ve(e){const{is_ortbeton:n,is_wirksamgeschlossen:t,a:s,b:r,is_dorn:o,d_b:a,n_b:c,ff_zd:l,alpha_b:d,alpha_a:_}=e,i=JSON.parse(JSON.stringify(k)),u={rules:[(f,S)=>f>=70||S>=100&&f>=50,(f,S)=>S>=70]},m={rules:[(f,S)=>f>=70,(f,S)=>S>=70]};for(const f of u.rules)f(s,r)||(i.s_65.check=!1,i.s_70.check=!1,i.esz_100.check=!1);for(const f of m.rules)f(s,r)||(i.conti_60.check=!1);const h=s*r;let g;o===0?g=h:g=Math.round(h-c*Math.PI*(a/2)**2);const E=Math.round(1e3*l/g*10)/10,y=n===0?10:10/2,b=Math.round(.625/s*1e3*10)/10+y,N=_,x=d+b,R=Math.sqrt(N**2+x**2),A=[];for(const[f,S]of Object.entries(i))if(S.check){const v=typeof k[f].thicknesses=="function"?k[f].thicknesses(s):k[f].thicknesses;for(const w of v){let I;!o||t?I=Math.round(h/(2*w*(s+r))*1e3)/1e3:I=Math.round((h-.25*Math.PI*c*w**2)/(2*w*(s+r)+w*Math.PI*c*a)*1e3)/1e3;const F=k[f].sigma_rd_rule(I),U=k[f].rot_b_rule(w,s),Z=k[f].rot_res_rule,V=E/F,W=x/U,X=R/Z,re=V<=1&&W<=1&&X<=1;A.push({lagerType:f,thickness:w,s:I,sigma_rd:F,alpha_b_max:U,alpha_res_max:Z,sigma_nachw:V,rot_b_nachw:W,rot_res_nach:X,passed:re})}}return A}const We=T([]),vt=T(null),C={is_streifen:0,a:200,b:200,t:10,c_nom:25,is_dorn:1,d_b:50,d_d:20,n_b:1,ff_zd:800,v_a:0,alpha_b:2,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0,is_wirksamgeschlossen:0};function Xe(){const{subscribe:e,set:n,update:t}=T(C),s={subscribe:e,set:r=>{n(r),L(r)},update:r=>{t(o=>{const a=r(o);return L(a),a})},reset:()=>{n(C),L(C)},updateField:(r,o)=>{s.update(a=>({...a,[r]:o}))}};return s}const Ye=Xe();function L(e){Ze(e);const n=Ve(e);We.set(n)}function Ke(){const e=new pe;return e.background=new Ee(16777215),e}function Qe(e){const n=new xe({antialias:!0});return n.setPixelRatio(window.devicePixelRatio),n.shadowMap.enabled=!0,n.shadowMap.type=Ae,e.appendChild(n.domElement),n}function Je(e){const n=new M(new Ie(200,200),new z({color:13355979,specular:4671303}));n.rotation.x=-Math.PI/2,n.position.y=-10,n.receiveShadow=!0}function $e(e){return e.add(new ke(9272444,4802918,3)),je(e,0,500,500,16777215,2)}function je(e,n,t,s,r,o){const a=new Pe(r,o);a.position.set(n,t,s),a.castShadow=!0;const c=1e3;return a.shadow.camera.left=-1e3,a.shadow.camera.right=c,a.shadow.camera.top=c,a.shadow.camera.bottom=-1e3,a.shadow.camera.near=1,a.shadow.camera.far=2e3,a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.radius=1,a.shadow.bias=-5e-4,e.add(a),e.add(a.target),a}const q=400,O=400,et=[[-.8,1,-.25],[-1.35,1,-.25],[-1.35,1,.25],[-.8,1,.25],[-1.0475,.3,.25],[-.8,.3,.25],[-1.35,.6,.25],[-1.35,.6,-.25],[-1.0475,.3,-.25],[-.8,.3,-.25],[-.8,0,.5],[-.8,2,.5],[-.8,2,-.5],[-.8,0,-.5],[.2,2,-.5],[.2,0,-.5],[.2,2,.5],[.2,0,.5]],tt=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],nt=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function ae(e,n){const t=et.map(o=>[o[0],o[1],o[2]]),s=(e-q)/1e3,r=(n-O)/2/1e3;return s>-.3?[1,2,4,6,7,8].forEach(o=>{t[o][0]-=s}):([1,2,6,7].forEach(o=>{t[o][0]-=s}),[4,8].forEach(o=>{t[o][0]-=-.1})),[0,1,7,8,9,12,13,14,15].forEach(o=>{t[o][2]-=r}),[2,3,4,5,6,10,11,16,17].forEach(o=>{t[o][2]+=r}),t}function ot(e){const n=document.createElement("canvas");n.width=64,n.height=64;const t=n.getContext("2d");t.fillStyle="red",t.beginPath(),t.arc(32,32,28,0,Math.PI*2),t.fill(),t.fillStyle="white",t.font="bold 36px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(e,32,32);const s=new Ne(n),r=new Re({map:s}),o=new Te(r);return o.scale.set(.08,.08,1),o}function $(e,n=q,t=O,s=!0){const r=new B,o=new z({color:12895428,shininess:100,flatShading:!0,transparent:!0,opacity:.5}),a=ae(n,t),c=new Float32Array(a.flat()),l=new Y;l.setAttribute("position",new K(c,3)),l.setIndex(tt),l.computeVertexNormals();const d=new M(l,o);d.castShadow=!0,d.receiveShadow=!0,r.add(d);const _=new Y;_.setAttribute("position",new K(c,3)),_.setIndex(nt),_.computeVertexNormals();const i=new M(_,o);return i.castShadow=!0,i.receiveShadow=!0,r.add(i),s&&a.forEach((u,m)=>{const h=ot(m.toString());h.position.set(u[0],u[1],u[2]),r.add(h)}),e.add(r),r}function H(e=q,n=O){const t=ae(e,n);return{centerX:(t[0][0]+t[1][0])/2,centerY:t[0][1],centerZ:(t[0][2]+t[3][2])/2}}function j(e,n){n&&(n.traverse(t=>{t instanceof M&&(t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(s=>s.dispose()):t.material.dispose())}),e.remove(n))}const at=400,rt=400,st=10,ct=.4,it=.4,lt=.02;function ee(e,n){const t=new B,s=new z({color:12895428,shininess:100,specular:2236962}),r=(n.a-at)/1e3,o=(n.b-rt)/1e3,a=(n.t-st)*2/1e3,c=ct+r,l=it+o,d=lt+a,_=new M(new ze(c,d,l),s),i=H();return _.position.set(i.centerX,i.centerY,i.centerZ),_.castShadow=!0,_.receiveShadow=!0,t.add(_),e.add(t),t}function te(e,n){n&&(n.traverse(t=>{t instanceof M&&(t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(s=>s.dispose()):t.material.dispose())}),e.remove(n))}function ne(e,n){const t=new B;if(!n.is_dorn)return e.add(t),t;const s=new z({color:12895428,flatShading:!1}),r=.2,o=n.d_d/2/1e3,a=new M(new Ge(o,o,r,16),s),c=H();return a.position.set(c.centerX,c.centerY+r/2,c.centerZ),a.castShadow=!0,a.receiveShadow=!0,t.add(a),e.add(t),t}function oe(e,n){n&&(n.traverse(t=>{t instanceof M&&(t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(s=>s.dispose()):t.material.dispose())}),e.remove(n))}var _t=ue('<div class="scene-container svelte-5boshl"></div>');function Mt(e,n){_e(n,!1),ye(n,"autoRotate",8,!1);let t;const s=new Q(-3.6366326492655574,2.6403115127435544,-1.3328222766488578);let r=fe(),o,a,c,l,d,_,i,u,m,h=!1,g,E,y;me(async()=>{o=Ke(),c=Qe(p(r)),Je(),m=$e(o),a=De(35),a.position.copy(s),y=Ye.subscribe(v=>{t=v,o&&i!==void 0&&(_&&j(o,_),i&&te(o,i),u&&oe(o,u),_=$(o,t.a,t.b),i=ee(o,t),u=ne(o,t))});const b=H(t.a,t.b),N=[b.centerX,b.centerY,b.centerZ];l=Ce(a,c,N),g=Le(c,a,l),_=$(o,t.a,t.b),i=ee(o,t),u=ne(o,t);const x=new M(new Be(.01,16,16),new qe({color:16711680}));x.position.set(b.centerX,b.centerY,b.centerZ),o.add(x);const A=1e3/30;let f=0;const S=v=>{E=requestAnimationFrame(S);const w=v-f;if(!(w<A)){if(f=v-w%A,Oe(l),m&&a){const I=new Q(0,500,500);I.applyQuaternion(a.quaternion),m.position.copy(a.position).add(I),l&&l.target&&(m.target.position.copy(l.target),m.target.updateMatrixWorld())}c.render(o,a)}};S(0),await de(),p(r)&&p(r)instanceof Element&&(d=new ResizeObserver(()=>{if(p(r)&&c&&a){if(h==!0){h=!1;return}const v=p(r).clientWidth,w=p(r).clientHeight;console.log(`Resizing renderer to ${v}x${w}`),a.aspect=v/w,a.updateProjectionMatrix(),c.setSize(v,w),h=!0}}),d.observe(p(r))),console.log("ShearDeformationScene initialized")}),Se(()=>{E!==void 0&&cancelAnimationFrame(E),g&&g(),y&&y(),d&&d.disconnect(),l&&l.dispose(),c&&c.dispose(),_&&o&&j(o,_),i&&o&&te(o,i),u&&o&&oe(o,u),console.log("ShearDeformationScene destroyed")}),Me();var P=_t();ve(P,b=>he(r,b),()=>p(r)),be(e,P),we()}export{Mt as S,Fe as a,St as b,vt as c,We as d,L as p,Ye as s};
