import{a4 as St,t as Ae,h as Ye,u as vt,a_ as pt,d as Ue,a as xt,f as yt,b as bt,c as Mt,g as se,aK as At,B as Tt,A as Lt,ay as Be,q as K,ai as ne,T as b,a0 as z,ak as me,af as de,n as it,a7 as Ce,O as v,v as W,N as Rt,aj as Nt,at as ct,ac as Gt,ae as It,aN as zt}from"./BKKamjXU.js";import{m as Bt,b as _e,s as he}from"./BQQo2vOL.js";import{b as Ze,e as Ct,f as ge,t as lt,a as Z,c as Ot}from"./7uABVGkd.js";import"./CJYkZmJn.js";import{i as J}from"./CgXxt2k1.js";import{p as N}from"./BUnJTkC2.js";import{y as Oe,N as Pe,G as De,h as Ee,i as Pt,B as k,c as Ve,M as G,z as Dt,A as $t,E as ft,V as p,e as Xt,C as ut,W as Ft,f as kt,P as Ht,H as Yt,D as Ut,J as Zt,K as Vt,O as qt,Q as Kt,R as Wt,U as dt,X as H,Y as Te,Z as Le,_ as Re,j as Y,$ as Jt,l as Qt,m as jt,s as en,u as tn}from"./Dkui9F0T.js";import{b as nn}from"./DxNVJtZB.js";function an(t,e,n=!1,s=!1,o=!1){var i=t,r="";St(()=>{var c=vt;if(r===(r=e()??"")){Ae&&Ye();return}if(c.nodes_start!==null&&(pt(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),r!==""){if(Ae){Ue.data;for(var a=Ye(),u=a;a!==null&&(a.nodeType!==8||a.data!=="");)u=a,a=xt(a);if(a===null)throw yt(),bt;Ze(Ue,u),i=Mt(a);return}var l=r+"";n?l=`<svg>${l}</svg>`:s&&(l=`<math>${l}</math>`);var f=Ct(l);if((n||s)&&(f=se(f)),Ze(se(f),f.lastChild),n||s)for(;se(f);)i.before(se(f));else i.before(f)}})}function $n(t,e,n=e){var s=At();Bt(t,"input",o=>{var i=o?t.defaultValue:t.value;if(i=Se(t)?ve(i):i,n(i),s&&i!==(i=e())){var r=t.selectionStart,c=t.selectionEnd;t.value=i??"",c!==null&&(t.selectionStart=r,t.selectionEnd=Math.min(c,t.value.length))}}),(Ae&&t.defaultValue!==t.value||Tt(e)==null&&t.value)&&n(Se(t)?ve(t.value):t.value),Lt(()=>{var o=e();Se(t)&&o===ve(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Se(t){var e=t.type;return e==="number"||e==="range"}function ve(t){return t===""?null:+t}const X={s_65:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=6.25?4.03*t**1.16:33.9,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},s_70:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=5?6.99*t:34.95,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},esz_100:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<2.33?5.3805*t-.6536:t>=2.33&&t<=2.5?10.635*t-12.89:t>2.5&&t<=5?8.4004*t-7.3293:34.7,rot_b_rule:(t,e)=>Math.min(450*t/e,48),rot_res_rule:48,"Nachweis erfolgreich t":[]},conti_60:{check:!0,manufacturer:"ContiTech",thicknesses:[10,20,30],sigma_rd_rule:t=>t<=5?.315*t**2+4.035*t:28.05,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},leschu_n15:{check:!0,manufacturer:"Leschu",thicknesses:[10,15,20],sigma_rd_rule:t=>t<1.88?3.29*t+1.46:t>=1.88&&t<2.5?2.58*t+2.79:t>=2.5&&t<3.5?3.34*t+.88:t>=3.5&&t<3.75?12.21*t-30.17:t>=3.75&&t<5?3.15*t+3.81:t>=5&&t<=10?1.66*t+11.29:t>10?27.89:0,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},matteco_elr08:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.17?.422*Math.E**(.698*t):7.75,rot_b_rule:(t,e)=>Math.min(200*t/e,16),rot_res_rule:16,"Nachweis erfolgreich t":[]},matteco_elr18:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.5?1.28*t**1.25:8.4,rot_b_rule:(t,e)=>Math.min(200*t/e,20),rot_res_rule:20,"Nachweis erfolgreich t":[]}};function rn(t){const{is_ortbeton:e,a:n,b:s,is_dorn:o,d_b:i,n_b:r,ff_zd:c,v_x:a,alpha_y:u,alpha_a:l,c_nom:f,is_streifen:g}=t,d=JSON.parse(JSON.stringify(X)),_={rules:[(x,C)=>x>=70||C>=100&&x>=50,(x,C)=>C>=70]},h={rules:[(x,C)=>x>=70,(x,C)=>C>=70]};_.rules.every(x=>x(n,s))||(d.s_65.check=!1,d.s_70.check=!1,d.esz_100.check=!1,d.leschu_n15.check=!1,d.matteco_elr08.check=!1,d.matteco_elr18.check=!1),h.rules.every(x=>x(n,s))||(d.conti_60.check=!1);const m=n*s;let E;o===0?E=m:E=Math.round(m-r*Math.PI*(i/2)**2);const w=Math.round(1e3*c/E*10)/10,M=10;let y=Math.round(.625/n*1e3*10)/10;e===0&&(y=y*.5);const T=y+M,S=u+T,B=n+(f+10)+25;let D;g===0&&(D=s+2*(f+10));const $=[];for(const[x,C]of Object.entries(d))if(C.check){const re=typeof X[x].thicknesses=="function"?X[x].thicknesses(n):X[x].thicknesses;for(const I of re){let L;o?L=Math.round((m-.25*Math.PI*r*I**2)/(2*I*(n+s)+I*Math.PI*r*i)*1e3)/1e3:L=Math.round(m/(2*I*(n+s))*1e3)/1e3;const O=X[x].sigma_rd_rule(L),R=X[x].rot_b_rule(I,n),we=X[x].rot_res_rule,Xe=.6*(I-2),Fe=w/O,ke=a/Xe,He=S/R,gt=Math.round(1.5*w*s*I/1e3*10)/10,Et=Math.round(1.5*w*n*I/1e3*10)/10,wt=Fe<=1&&ke<=1&&He<=1;$.push({lagerType:x,manufacturer:X[x].manufacturer,thickness:I,s:L,sigma_rd:O,alpha_y_max:R,alpha_y_ges:S,alpha_res_max:we,v_x_max:Xe,sigma_nachw:Fe,v_x_nachw:ke,rot_b_nachw:He,querzug_x:gt,querzug_y:Et,passed:wt,l_xmin:B,l_ymin:D})}}return $}const sn=Be([]),on=Be(null),pe={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function cn(){const{subscribe:t,set:e,update:n}=Be(pe),s={subscribe:t,set:o=>{e(o),xe(o)},update:o=>{n(i=>{const r=o(i);return xe(r),r})},reset:()=>{e(pe),xe(pe)},updateField:(o,i)=>{s.update(r=>({...r,[o]:i}))}};return s}const P=cn();function xe(t){on.set(null);const e=rn(t);sn.set(e)}const A={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:50,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:0,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var ln=ge("<!> <!>",1);function Xn(t,e){K(e,!1);const[n,s]=he(),o=()=>_e(P,"$shearDeformationParameterStore",n);let i=N(e,"step",8,5),r=z(),c=z(!1),a=z(""),u=null;function l(_){let h=_,m=!1,E="";_<A.LAGERBREITE_MIN?(h=A.LAGERBREITE_MIN,m=!0,E=`Minimalwert: ${A.LAGERBREITE_MIN} mm`):_>A.LAGERBREITE_MAX&&(h=A.LAGERBREITE_MAX,m=!0,E=`Maximalwert: ${A.LAGERBREITE_MAX} mm`);const w=o().b+100;h>w&&(h=w,m=!0,E="a > b+100 nicht erlaubt"),m&&(b(c,!0),b(a,E),u&&clearTimeout(u),u=setTimeout(()=>{b(c,!1),b(a,"")},3e3)),P.updateField("a",h)}ne(()=>o(),()=>{b(r,o().a)}),me(),J();var f=ln(),g=de(f);Oe(g,{children:(_,h)=>{it();var m=lt("Lagertiefe a");Z(_,m)},$$slots:{default:!0}});var d=Ce(g,2);Pe(d,{size:"sm",get step(){return i()},helperText:"mm",get min(){return A.LAGERBREITE_MIN},get max(){return A.LAGERBREITE_MAX},light:!0,get invalid(){return v(c)},get invalidText(){return v(a)},get value(){return v(r)},set value(_){b(r,_)},$$events:{change:()=>l(v(r))},$$legacy:!0}),Z(t,f),W(),s()}var fn=ge("<!> <!>",1);function Fn(t,e){K(e,!1);const[n,s]=he(),o=()=>_e(P,"$shearDeformationParameterStore",n);let i=N(e,"disabled",8,!1),r=N(e,"step",8,5),c=z(),a=z(!1),u=z(""),l=null;function f(m){let E=m,w=!1,M="";m<A.LAGERLAENGE_MIN?(E=A.LAGERLAENGE_MIN,w=!0,M=`Minimalwert: ${A.LAGERLAENGE_MIN} mm`):m>A.LAGERLAENGE_MAX&&(E=A.LAGERLAENGE_MAX,w=!0,M=`Maximalwert: ${A.LAGERLAENGE_MAX} mm`),w&&(b(a,!0),b(u,M),l&&clearTimeout(l),l=setTimeout(()=>{b(a,!1),b(u,"")},3e3)),P.updateField("b",E)}ne(()=>o(),()=>{b(c,o().b)}),me(),J();var g=fn(),d=de(g);Oe(d,{children:(m,E)=>{it();var w=lt("Lagerbreite b");Z(m,w)},$$slots:{default:!0}});var _=Ce(d,2);const h=Rt(()=>i()||o().is_streifen===1);Pe(_,{size:"sm",get step(){return r()},helperText:"mm",get disabled(){return v(h)},get min(){return A.LAGERLAENGE_MIN},get max(){return A.LAGERLAENGE_MAX},light:!0,get invalid(){return v(a)},get invalidText(){return v(u)},get value(){return v(c)},set value(m){b(c,m)},$$events:{change:()=>f(v(c))},$$legacy:!0}),Z(t,g),W(),s()}var un=ge("<!> <!>",1);function mt(t,e){K(e,!1);const[n,s]=he(),o=()=>_e(P,"$shearDeformationParameterStore",n);let i=N(e,"field",8),r=N(e,"label",8),c=N(e,"helperText",8,""),a=N(e,"step",8,1),u=N(e,"disabled",8,!1),l=N(e,"min",8,void 0),f=N(e,"max",8,void 0),g=z(),d=z(!1),_=z(""),h=null;function m(y){let T=y,S=!1,B="";l()!==void 0&&y<l()?(T=l(),S=!0,B=`Minimalwert: ${l()}${c()?" "+c():""}`):f()!==void 0&&y>f()&&(T=f(),S=!0,B=`Maximalwert: ${f()}${c()?" "+c():""}`),S&&(b(d,!0),b(_,B),h&&clearTimeout(h),h=setTimeout(()=>{b(d,!1),b(_,"")},3e3)),P.updateField(i(),T)}ne(()=>(o(),Nt(i())),()=>{b(g,o()[i()])}),me(),J();var E=un(),w=de(E);Oe(w,{children:(y,T)=>{var S=Ot(),B=de(S);an(B,r),Z(y,S)},$$slots:{default:!0}});var M=Ce(w,2);Pe(M,{size:"sm",get step(){return a()},get helperText(){return c()},get disabled(){return u()},get min(){return l()},get max(){return f()},light:!0,get invalid(){return v(d)},get invalidText(){return v(_)},get value(){return v(g)},set value(y){b(g,y)},$$events:{change:()=>m(v(g))},$$legacy:!0}),Z(t,E),W(),s()}function kn(t,e){K(e,!1);let n=N(e,"step",8,5);J(),mt(t,{field:"c_nom",label:"Betondeckung Konsole c<sub>nom</sub>",get step(){return n()},helperText:"mm",get min(){return A.BETONDECKUNG_MIN},get max(){return A.BETONDECKUNG_MAX}}),W()}function Hn(t,e){K(e,!1);const[n,s]=he(),o=()=>_e(P,"$shearDeformationParameterStore",n),i=z(),r=z();let c=N(e,"step",8,1);ne(()=>o(),()=>{b(i,o())}),ne(()=>v(i),()=>{b(r,v(i).is_streifen?"kN/m":"kN")}),me(),J(),mt(t,{field:"ff_zd",label:"Bemessungslast F<sub>z,d</sub>",get step(){return c()},get helperText(){return v(r)},get min(){return A.BEMESSUNGSLAST_MIN},get max(){return A.BEMESSUNGSLAST_MAX}}),W(),s()}const Q=0,U=-.8,j=-.8,qe=(U+j)/2,oe=.2,ie=U,ce=2,le=.25,_t=.08,Ke=[[U,1,-0],[j,1,-0],[j,1,Q],[U,1,Q],[qe,.3,Q],[U,.3,Q],[j,.6,Q],[j,.6,-0],[qe,.3,-0],[U,.3,-0],[ie,0,le],[ie,ce,le],[ie,ce,-.25],[ie,0,-.25],[oe,ce,-.25],[oe,0,-.25],[oe,ce,le],[oe,0,le]],dn=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],mn=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function $e(t,e,n=0,s=25){const o=Ke.map(a=>[a[0],a[1],a[2]]),i=s/1e3+.01,r=t/1e3,c=e/2/1e3+i;return[1,2,6,7].forEach(a=>{o[a][0]-=r+_t+i}),[4,8].forEach(a=>{o[a][0]-=-.1}),n===1?o.forEach((a,u)=>{const l=Ke[u][2];a[2]=l>=0?e/2/1e3:-e/2/1e3}):([0,1,7,8,9,12,13,14,15].forEach(a=>{o[a][2]-=c}),[2,3,4,5,6,10,11,16,17].forEach(a=>{o[a][2]+=c})),o}function _n(t){const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");n.fillStyle="red",n.beginPath(),n.arc(32,32,28,0,Math.PI*2),n.fill(),n.fillStyle="white",n.font="bold 36px Arial",n.textAlign="center",n.textBaseline="middle",n.fillText(t,32,32);const s=new Dt(e),o=new $t({map:s}),i=new ft(o);return i.scale.set(.08,.08,1),i}function We(t,e,n=!1){const s=new De,o=e.a,i=e.b,r=e.is_streifen,c=e.c_nom,a=new Ee({color:Pt,shininess:100,flatShading:!0,transparent:!1}),u=$e(o,i,r,c),l=new Float32Array(u.flat()),f=new k;f.setAttribute("position",new Ve(l,3)),f.setIndex(dn),f.computeVertexNormals();const g=new G(f,a);g.castShadow=!0,g.receiveShadow=!0,s.add(g);const d=new k;d.setAttribute("position",new Ve(l,3)),d.setIndex(mn),d.computeVertexNormals();const _=new G(d,a);return _.castShadow=!0,_.receiveShadow=!0,s.add(_),n&&u.forEach((h,m)=>{const E=_n(m.toString());E.position.set(h[0],h[1],h[2]),s.add(E)}),t.add(s),s}function ae(){const t=ct(P),e=$e(t.a,t.b,t.is_streifen,t.c_nom),n=[e[0],e[1],e[2],e[3]];return{centerX:-t.a/2/1e3-_t+U,centerY:n[0][1],centerZ:(n[0][2]+n[1][2]+n[2][2]+n[3][2])/4}}function Je(t,e){e&&(e.traverse(n=>{n instanceof G&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(s=>s.dispose()):n.material.dispose())}),t.remove(e))}let Ne=!0,ye=0,ee=0,ue=null,te=null;const hn=.07,be=[new p(-2.1247554456236646,1.8348909616249438,-.9418251993957858),new p(-2.298436211128349,2.1141465425086055,.0593750739688058),new p(-1.8215114290760264,1.8160993918937776,1.1472099754138583)];function gn(){const t=ae();return new p(t.centerX,t.centerY,t.centerZ)}function En(t,e,n){if(!Ne||!e)return;ee===0&&(ee=t,ue=e.position.clone(),te=n.target.clone());const s=t-ee,o=ue||be[ye],i=(ye+1)%be.length,r=be[i],a=o.distanceTo(r)/hn*1e3,u=gn();if(s<a){const l=s/a;e.position.lerpVectors(o,r,l),n&&te&&(n.target.lerpVectors(te,u,l),n.update())}else ye=i,ee=t,ue=null,te=u.clone()}function wn(t){const e=()=>{Ne=!1},n=()=>{Ne=!0,ee=0,ue=null,te=null};return t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",n),()=>{t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",n)}}function Sn(){const t=new Xt;return t.background=new ut(16777215),t}function vn(t){const e=new Ft({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,e.shadowMap.type=kt,t.appendChild(e.domElement),e}function pn(t){const e=new G(new Ht(200,200),new Ee({color:13355979,specular:4671303}));e.rotation.x=-Math.PI/2,e.position.y=-10,e.receiveShadow=!0}function xn(t){return t.add(new Yt(9272444,4802918,3)),yn(t,0,500,500,16777215,2)}function yn(t,e,n,s,o,i){const r=new Ut(o,i);r.position.set(e,n,s),r.castShadow=!0;const c=1e3;return r.shadow.camera.left=-1e3,r.shadow.camera.right=c,r.shadow.camera.top=c,r.shadow.camera.bottom=-1e3,r.shadow.camera.near=1,r.shadow.camera.far=2e3,r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.radius=1,r.shadow.bias=-5e-4,t.add(r),t.add(r.target),r}const bn=400,Mn=400,An=10,Tn=.4,Ln=.4,Rn=.02;function Qe(t,e){const n=new De,s=new Ee({color:Zt,shininess:100,specular:2236962}),o=(e.a-bn)/1e3,i=(e.b-Mn)/1e3,r=(e.t-An)*2/1e3,c=Tn+o,a=Ln+i,u=Rn+r,l=new G(new Vt(c,u,a),s),f=ae();l.position.set(f.centerX,f.centerY+u/2,f.centerZ),l.castShadow=!0,l.receiveShadow=!0,n.add(l),t.add(n),l.geometry.computeBoundingBox();const g=new qt;g.setFromObject(l);const d=f.centerY;return{group:n,boundingBox:g,height:d,lengthDiffX:o,lengthDiffZ:i}}function je(t,e){e&&(e.traverse(n=>{n instanceof G&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(s=>s.dispose()):n.material.dispose())}),t.remove(e))}function et(t,e){const n=new De;if(!e.is_dorn)return t.add(n),n;const s=new Ee({color:Kt,flatShading:!1}),o=(50+e.b*.2)/1e3,i=e.d_b/2/1e3,r=ae(),c=e.n_b;for(let a=0;a<c;a++){const u=new G(new Wt(i,i,o,16),s);let l=0;if(c===2){const f=e.b/1e3;l=a===0?f/5:-f/5}u.position.set(r.centerX,r.centerY+o/2,r.centerZ+l),u.castShadow=!0,u.receiveShadow=!0,n.add(u)}return t.add(n),n}function tt(t,e){e&&(e.traverse(n=>{n instanceof G&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(s=>s.dispose()):n.material.dispose())}),t.remove(e))}let V=[],F=[],Me=null,q=null;const fe=11765,Ge=.012,Ie=2e-4;async function ht(){return Me||q||(q=new Promise((t,e)=>{new Jt().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",s=>{Me=s,q=null,t(s)},void 0,s=>{q=null,e(s)})}),q)}async function nt(t,e,n,s,o,i=0,r=0){try{const c=await ht(),a=new Le(o,{font:c,size:Ge,depth:Ie,curveSegments:12,bevelEnabled:!0,bevelThickness:3e-4,bevelSize:2e-4,bevelOffset:0,bevelSegments:3});a.computeBoundingBox();const u=a.boundingBox;if(u){const m=-(u.max.x-u.min.x)/2,E=-(u.max.y-u.min.y)/2;a.translate(m,E,0)}const l=new Re({color:16711680,metalness:.3,roughness:.4}),f=new G(a,l),g=new p(n[0]-e[0],0,n[2]-e[2]).normalize(),d=new p(-g.z,0,g.x),_=(e[0]+n[0])/2+i+d.x*s,h=(e[2]+n[2])/2+r+d.z*s;f.position.set(_,e[1]+.001,h),f.rotation.x=-Math.PI/2,f.rotation.z=Math.atan2(g.z,g.x)+Math.PI,t.add(f),V.push(f)}catch(c){console.error("Failed to load font for 3D text:",c)}}function at(t,e,n,s,o,i=.05){const r=new p(-s.z,0,s.x).normalize(),c=new k().setFromPoints([new p(e.x-r.x*i/2,e.y,e.z-r.z*i/2),new p(e.x+r.x*i/2,e.y,e.z+r.z*i/2)]),a=new H(c,o);t.add(a),V.push(a);const u=new k().setFromPoints([new p(n.x-r.x*i/2,n.y,n.z-r.z*i/2),new p(n.x+r.x*i/2,n.y,n.z+r.z*i/2)]),l=new H(u,o);t.add(l),V.push(l)}function ze(t){V.forEach(e=>{t.remove(e),e instanceof G&&(e.geometry&&e.geometry.dispose(),e.material instanceof Y&&e.material.dispose()),e instanceof H&&(e.geometry&&e.geometry.dispose(),e.material instanceof Y&&e.material.dispose()),e instanceof ft&&e.material instanceof Y&&e.material.dispose()}),V=[]}function rt(t){F.forEach(e=>{t.remove(e),e instanceof G&&(e.geometry&&e.geometry.dispose(),e.material instanceof Y&&e.material.dispose()),e instanceof H&&(e.geometry&&e.geometry.dispose(),e.material instanceof Y&&e.material.dispose()),e instanceof Te&&(e.line&&e.line.geometry&&e.line.geometry.dispose(),e.line&&e.line.material instanceof Y&&e.line.material.dispose(),e.cone&&e.cone.geometry&&e.cone.geometry.dispose(),e.cone&&e.cone.material instanceof Y&&e.cone.material.dispose())}),F=[]}async function st(t,e=new p(0,0,0)){const o=new dt({color:new ut(fe)}),i=fe,r=new p(e.x-.06,e.y,e.z),c=new k().setFromPoints([e,r]),a=new H(c,o);t.add(a),F.push(a);const u=new p(-1,0,0),l=new Te(u,r,.03,i,.03*.5,.03*.3);t.add(l),F.push(l);const f=new p(e.x,e.y,e.z-.06),g=new k().setFromPoints([e,f]),d=new H(g,o);t.add(d),F.push(d);const _=new p(0,0,-1),h=new Te(_,f,.03,i,.03*.5,.03*.3);t.add(h),F.push(h);try{const m=await ht(),E=new Le("x (Bauwerkshauptachse)",{font:m,size:Ge,depth:Ie,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});E.computeBoundingBox();const w=E.boundingBox;if(w){const $=-(w.max.x-w.min.x)/2,x=-(w.max.y-w.min.y)/2;E.translate($,x,0)}const M=new Re({color:fe,metalness:.3,roughness:.4}),y=new G(E,M);y.position.set(e.x-.06*1-.05,e.y+.001,e.z-.02),y.rotation.x=-Math.PI/2,y.rotation.z=0,t.add(y),F.push(y);const T=new Le("y",{font:m,size:Ge,depth:Ie,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});T.computeBoundingBox();const S=T.boundingBox;if(S){const $=-(S.max.x-S.min.x)/2,x=-(S.max.y-S.min.y)/2;T.translate($,x,0)}const B=new Re({color:fe,metalness:.3,roughness:.4}),D=new G(T,B);D.position.set(e.x-.02,e.y+.001,e.z-.06*1.1),D.rotation.x=-Math.PI/2,D.rotation.z=0,t.add(D),F.push(D)}catch(m){console.error("Failed to create 3D text for coordinate system:",m)}}async function ot(t){ze(t);const e=ct(P),n=$e(e.a,e.b,e.is_streifen),s=new dt({color:16711680}),o=.05,i=e.b/1e3,r=e.a/1e3;if(e.is_streifen===0){const h=(n[1][0]+n[2][0])/2,m=n[1][1],E=(n[1][2]+n[2][2])/2,w=new p(h-o,m,E-i/2),M=new p(h-o,m,E+i/2),y=new k().setFromPoints([w,M]),T=new H(y,s);t.add(T),V.push(T);const S=new p().subVectors(M,w).normalize();at(t,w,M,S,s),await nt(t,[w.x,w.y,w.z],[M.x,M.y,M.z],.02,`b = ${e.b} mm`,0,0)}const c=(n[0][0]+n[1][0])/2,a=n[0][1],u=(n[0][2]+n[1][2])/2,l=new p(c-r/2,a,u-o),f=new p(c+r/2,a,u-o),g=new k().setFromPoints([l,f]),d=new H(g,s);t.add(d),V.push(d);const _=new p().subVectors(f,l).normalize();at(t,l,f,_,s),await nt(t,[l.x,l.y,l.z],[f.x,f.y,f.z],-.02,`a = ${e.a} mm`,0,0)}var Nn=ge('<div class="scene-container svelte-5boshl"></div>');function Yn(t,e){K(e,!1),N(e,"autoRotate",8,!1);let n;const s=.05,o=.001,i=.04,r=new p(-3.6366326492655574,2.6403115127435544,-1.3328222766488578);let c=z(),a,u,l,f,g,d,_,h,m,E,w,M,y;Gt(async()=>{a=Sn(),l=vn(v(c)),pn(),m=xn(a),u=Qt(35),u.position.copy(r),y=P.subscribe(async L=>{if(n=L,a&&_!==void 0){d&&Je(a,d),_&&je(a,_),h&&tt(a,h),ze(a),rt(a),d=We(a,n,!1),_=Qe(a,n).group,h=et(a,n),await ot(a);const R=ae(),we=new p(R.centerX+s+n.a/2e3,R.centerY+o,R.centerZ+i+n.b/2e3);await st(a,we)}});const S=ae(),B=[S.centerX,S.centerY,S.centerZ];f=jt(u,l,B),E=en(l,u,f),w=wn(v(c)),d=We(a,n,!1),_=Qe(a,n).group,h=et(a,n),await ot(a);const $=new p(S.centerX+s+n.a/2e3,S.centerY+o+.001,S.centerZ+i+n.b/2e3);await st(a,$);const C=1e3/30;let re=0;const I=L=>{M=requestAnimationFrame(I);const O=L-re;if(!(O<C)){if(re=L-O%C,En(L,u,f),tn(f),m&&u){const R=new p(0,500,500);R.applyQuaternion(u.quaternion),m.position.copy(u.position).add(R),f&&f.target&&(m.target.position.copy(f.target),m.target.updateMatrixWorld())}l.render(a,u)}};if(I(0),await It(),v(c)&&v(c)instanceof Element){let L=!1;g=new ResizeObserver(()=>{v(c)&&l&&u&&!L&&(L=!0,requestAnimationFrame(()=>{if(v(c)&&l&&u){const O=v(c).clientWidth,R=v(c).clientHeight;console.log(`Resizing renderer to ${O}x${R}`),u.aspect=O/R,u.updateProjectionMatrix(),l.setSize(O,R)}L=!1}))}),g.observe(v(c))}console.log("ShearDeformationScene initialized")}),zt(()=>{M!==void 0&&cancelAnimationFrame(M),E&&E(),w&&w(),y&&y(),g&&g.disconnect(),f&&f.dispose(),l&&l.dispose(),d&&a&&Je(a,d),_&&a&&je(a,_),h&&a&&tt(a,h),a&&ze(a),a&&rt(a),console.log("ShearDeformationScene destroyed")}),J();var T=Nn();nn(T,S=>b(c,S),()=>v(c)),Z(t,T),W()}export{Hn as B,A as I,Xn as L,mt as P,Yn as S,Fn as a,$n as b,kn as c,on as d,sn as e,X as l,xe as p,P as s};
