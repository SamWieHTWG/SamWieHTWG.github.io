import{a4 as Pe,t as Ne,h as qe,u as yt,aO as At,d as Ke,a as Mt,f as bt,b as Tt,c as Lt,g as fe,aK as Rt,B as Nt,A as Gt,ay as $e,q as Q,ai as se,T as A,V as D,ak as we,af as Ee,n as ft,N as oe,a7 as Xe,O as p,v as j,aj as It,at as ut,ac as zt,ae as Dt,aN as Ct}from"./B_J1m_EM.js";import{m as Bt,b as pe,s as Se}from"./rTFhHhec.js";import{b as We,d as Ot,f as ve,t as dt,a as q,c as Pt}from"./b0vKRyRU.js";import"./CYP6ejXN.js";import{s as mt}from"./touYG125.js";import{i as ee}from"./D-GPOFrA.js";import{p as G}from"./CnYdXSJI.js";import{t as X}from"./Cg5mPG-9.js";import{y as Fe,N as ke,G as He,h as xe,i as $t,B as Y,c as Je,M as I,z as Xt,A as Ft,E as _t,V as v,e as kt,C as ht,W as Ht,f as Yt,P as Ut,H as Zt,D as Vt,J as qt,K as Kt,O as Wt,Q as Jt,R as Qt,U as gt,X as U,Y as Ge,Z as Ie,_ as ze,j as Z,$ as jt,l as en,m as tn,s as nn,u as an}from"./Cz0ijs7u.js";import{b as rn}from"./Dag8BmdE.js";function sn(t,e,n=!1,i=!1,s=!1){var o=t,r="";Pe(()=>{var c=yt;if(r===(r=e()??"")){Ne&&qe();return}if(c.nodes_start!==null&&(At(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),r!==""){if(Ne){Ke.data;for(var a=qe(),f=a;a!==null&&(a.nodeType!==8||a.data!=="");)f=a,a=Mt(a);if(a===null)throw bt(),Tt;We(Ke,f),o=Lt(a);return}var l=r+"";n?l=`<svg>${l}</svg>`:i&&(l=`<math>${l}</math>`);var u=Ot(l);if((n||i)&&(u=fe(u)),We(fe(u),u.lastChild),n||i)for(;fe(u);)o.before(fe(u));else o.before(u)}})}function Yn(t,e,n=e){var i=Rt();Bt(t,"input",s=>{var o=s?t.defaultValue:t.value;if(o=ye(t)?Ae(o):o,n(o),i&&o!==(o=e())){var r=t.selectionStart,c=t.selectionEnd;t.value=o??"",c!==null&&(t.selectionStart=r,t.selectionEnd=Math.min(c,t.value.length))}}),(Ne&&t.defaultValue!==t.value||Nt(e)==null&&t.value)&&n(ye(t)?Ae(t.value):t.value),Gt(()=>{var s=e();ye(t)&&s===Ae(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function ye(t){var e=t.type;return e==="number"||e==="range"}function Ae(t){return t===""?null:+t}const k={s_65:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=6.25?4.03*t**1.16:33.9,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},s_70:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=5?6.99*t:34.95,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},esz_100:{check:!0,manufacturer:"Standard",thicknesses:t=>[10,15,20,25,30].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<2.33?5.3805*t-.6536:t>=2.33&&t<=2.5?10.635*t-12.89:t>2.5&&t<=5?8.4004*t-7.3293:34.7,rot_b_rule:(t,e)=>Math.min(450*t/e,48),rot_res_rule:48,"Nachweis erfolgreich t":[]},conti_60:{check:!0,manufacturer:"ContiTech",thicknesses:[10,20,30],sigma_rd_rule:t=>t<=5?.315*t**2+4.035*t:28.05,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},leschu_n15:{check:!0,manufacturer:"Leschu",thicknesses:[10,15,20],sigma_rd_rule:t=>t<1.88?3.29*t+1.46:t>=1.88&&t<2.5?2.58*t+2.79:t>=2.5&&t<3.5?3.34*t+.88:t>=3.5&&t<3.75?12.21*t-30.17:t>=3.75&&t<5?3.15*t+3.81:t>=5&&t<=10?1.66*t+11.29:t>10?27.89:0,rot_b_rule:(t,e)=>Math.min(450*t/e,40),rot_res_rule:40,"Nachweis erfolgreich t":[]},matteco_elr08:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10,15,20].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.17?.422*Math.E**(.698*t):7.75,rot_b_rule:(t,e)=>Math.min(200*t/e,16),rot_res_rule:16,"Nachweis erfolgreich t":[]},matteco_elr18:{check:!0,manufacturer:"Matteco",thicknesses:t=>[10].filter(e=>e===10||t>=70),sigma_rd_rule:t=>t<=4.5?1.28*t**1.25:8.4,rot_b_rule:(t,e)=>Math.min(200*t/e,20),rot_res_rule:20,"Nachweis erfolgreich t":[]}};function on(t){const{is_ortbeton:e,a:n,b:i,is_dorn:s,is_wirksamgeschlossen:o,d_b:r,n_b:c,ff_zd:a,v_x:f,alpha_y:l,alpha_a:u,c_nom:m,is_streifen:_}=t,d=JSON.parse(JSON.stringify(k)),E={rules:[(b,C)=>b>=70||C>=100&&b>=50,(b,C)=>C>=70]},h={rules:[(b,C)=>b>=70,(b,C)=>C>=70]};E.rules.every(b=>b(n,i))||(d.s_65.check=!1,d.s_70.check=!1,d.esz_100.check=!1,d.leschu_n15.check=!1,d.matteco_elr08.check=!1,d.matteco_elr18.check=!1),h.rules.every(b=>b(n,i))||(d.conti_60.check=!1);const g=n*i;let w;s===0?w=g:w=Math.round(g-c*Math.PI*(r/2)**2);const M=Math.round(1e3*a/w*10)/10,S=10;let y=Math.round(.625/n*1e3*10)/10;e===0&&(y=y*.5);const x=y+S,L=l+x,B=n+(m+10)+25;let $;_===0&&($=i+2*(m+10));const F=[];for(const[b,C]of Object.entries(d))if(C.check){const ie=typeof k[b].thicknesses=="function"?k[b].thicknesses(n):k[b].thicknesses;for(const z of ie){let R;!s||o?R=Math.round(g/(2*z*(n+i))*1e3)/1e3:R=Math.round((g-.25*Math.PI*c*z**2)/(2*z*(n+i)+z*Math.PI*c*r)*1e3)/1e3;const O=k[b].sigma_rd_rule(R),N=k[b].rot_b_rule(z,n),ce=k[b].rot_res_rule,le=.6*(z-2),Ue=M/O,Ze=f/le,Ve=L/N,St=Math.round(1.5*M*i*z/1e3*10)/10,vt=Math.round(1.5*M*n*z/1e3*10)/10,xt=Ue<=1&&Ze<=1&&Ve<=1;F.push({lagerType:b,manufacturer:k[b].manufacturer,thickness:z,s:R,sigma_rd:O,alpha_y_max:N,alpha_y_ges:L,alpha_res_max:ce,v_x_max:le,sigma_nachw:Ue,v_x_nachw:Ze,rot_b_nachw:Ve,querzug_x:St,querzug_y:vt,passed:xt,l_xmin:B,l_ymin:$})}}return F}const cn=$e([]),ln=$e(null),Me={is_streifen:0,a:200,b:250,t:10,c_nom:25,is_dorn:1,is_wirksamgeschlossen:0,d_b:20,d_d:20,n_b:1,ff_zd:800,v_x:5,alpha_y:10,gg:.9,v_b:0,alpha_a:0,ff_x:15,ff_y:0,is_ortbeton:0};function fn(){const{subscribe:t,set:e,update:n}=$e(Me),i={subscribe:t,set:s=>{e(s),be(s)},update:s=>{n(o=>{const r=s(o);return be(r),r})},reset:()=>{e(Me),be(Me)},updateField:(s,o)=>{i.update(r=>({...r,[s]:o}))}};return i}const P=fn();function be(t){ln.set(null);const e=on(t);cn.set(e)}const T={LAGERBREITE_MIN:50,LAGERBREITE_MAX:1e3,LAGERLAENGE_MIN:50,LAGERLAENGE_MAX:1e3,BETONDECKUNG_MIN:0,BETONDECKUNG_MAX:100,BOHRUNGSDURCHMESSER_MIN:0,BOHRUNGSDURCHMESSER_MAX:50,BEMESSUNGSLAST_MIN:0,BEMESSUNGSLAST_MAX:5e4,LAGERVERDREHUNG_MIN:0,LAGERVERDREHUNG_MAX:50,LAGERVERSCHIEBUNG_MIN:0,LAGERVERSCHIEBUNG_MAX:50};var un=ve("<!> <!>",1);function Un(t,e){Q(e,!1);const[n,i]=Se(),s=()=>pe(P,"$shearDeformationParameterStore",n);let o=G(e,"step",8,5),r=D(),c=D(!1),a=D(""),f=null;function l(d){let E=d,h=!1,g="";d<T.LAGERBREITE_MIN?(E=T.LAGERBREITE_MIN,h=!0,g=`${X("shearDeformation.parameters.minValue")}: ${T.LAGERBREITE_MIN} mm`):d>T.LAGERBREITE_MAX&&(E=T.LAGERBREITE_MAX,h=!0,g=`${X("shearDeformation.parameters.maxValue")}: ${T.LAGERBREITE_MAX} mm`);const w=s().b+100;E>w&&(E=w,h=!0,g=X("shearDeformation.parameters.constraintAB")),h&&(A(c,!0),A(a,g),f&&clearTimeout(f),f=setTimeout(()=>{A(c,!1),A(a,"")},3e3)),P.updateField("a",E)}se(()=>s(),()=>{A(r,s().a)}),we(),ee();var u=un(),m=Ee(u);Fe(m,{children:(d,E)=>{ft();var h=dt();Pe(g=>mt(h,g),[()=>X("shearDeformation.parameters.bearingDepth")],oe),q(d,h)},$$slots:{default:!0}});var _=Xe(m,2);ke(_,{size:"sm",get step(){return o()},helperText:"mm",get min(){return T.LAGERBREITE_MIN},get max(){return T.LAGERBREITE_MAX},light:!0,get invalid(){return p(c)},get invalidText(){return p(a)},get value(){return p(r)},set value(d){A(r,d)},$$events:{change:()=>l(p(r))},$$legacy:!0}),q(t,u),j(),i()}var dn=ve("<!> <!>",1);function Zn(t,e){Q(e,!1);const[n,i]=Se(),s=()=>pe(P,"$shearDeformationParameterStore",n);let o=G(e,"disabled",8,!1),r=G(e,"step",8,5),c=D(),a=D(!1),f=D(""),l=null;function u(h){let g=h,w=!1,M="";h<T.LAGERLAENGE_MIN?(g=T.LAGERLAENGE_MIN,w=!0,M=`${X("shearDeformation.parameters.minValue")}: ${T.LAGERLAENGE_MIN} mm`):h>T.LAGERLAENGE_MAX&&(g=T.LAGERLAENGE_MAX,w=!0,M=`${X("shearDeformation.parameters.maxValue")}: ${T.LAGERLAENGE_MAX} mm`),w&&(A(a,!0),A(f,M),l&&clearTimeout(l),l=setTimeout(()=>{A(a,!1),A(f,"")},3e3)),P.updateField("b",g)}se(()=>s(),()=>{A(c,s().b)}),we(),ee();var m=dn(),_=Ee(m);Fe(_,{children:(h,g)=>{ft();var w=dt();Pe(M=>mt(w,M),[()=>X("shearDeformation.parameters.bearingLength")],oe),q(h,w)},$$slots:{default:!0}});var d=Xe(_,2);const E=oe(()=>o()||s().is_streifen===1);ke(d,{size:"sm",get step(){return r()},helperText:"mm",get disabled(){return p(E)},get min(){return T.LAGERLAENGE_MIN},get max(){return T.LAGERLAENGE_MAX},light:!0,get invalid(){return p(a)},get invalidText(){return p(f)},get value(){return p(c)},set value(h){A(c,h)},$$events:{change:()=>u(p(c))},$$legacy:!0}),q(t,m),j(),i()}var mn=ve("<!> <!>",1);function Et(t,e){Q(e,!1);const[n,i]=Se(),s=()=>pe(P,"$shearDeformationParameterStore",n);let o=G(e,"field",8),r=G(e,"label",8),c=G(e,"helperText",8,""),a=G(e,"step",8,1),f=G(e,"disabled",8,!1),l=G(e,"min",8,void 0),u=G(e,"max",8,void 0),m=D(),_=D(!1),d=D(""),E=null;function h(S){let y=S,x=!1,L="";l()!==void 0&&S<l()?(y=l(),x=!0,L=`Minimalwert: ${l()}${c()?" "+c():""}`):u()!==void 0&&S>u()&&(y=u(),x=!0,L=`Maximalwert: ${u()}${c()?" "+c():""}`),x&&(A(_,!0),A(d,L),E&&clearTimeout(E),E=setTimeout(()=>{A(_,!1),A(d,"")},3e3)),P.updateField(o(),y)}se(()=>(s(),It(o())),()=>{A(m,s()[o()])}),we(),ee();var g=mn(),w=Ee(g);Fe(w,{children:(S,y)=>{var x=Pt(),L=Ee(x);sn(L,r),q(S,x)},$$slots:{default:!0}});var M=Xe(w,2);ke(M,{size:"sm",get step(){return a()},get helperText(){return c()},get disabled(){return f()},get min(){return l()},get max(){return u()},light:!0,get invalid(){return p(_)},get invalidText(){return p(d)},get value(){return p(m)},set value(S){A(m,S)},$$events:{change:()=>h(p(m))},$$legacy:!0}),q(t,g),j(),i()}function Vn(t,e){Q(e,!1);let n=G(e,"step",8,5);ee();const i=oe(()=>X("shearDeformation.parameters.concreteCovernominal"));Et(t,{field:"c_nom",get label(){return p(i)},get step(){return n()},helperText:"mm",get min(){return T.BETONDECKUNG_MIN},get max(){return T.BETONDECKUNG_MAX}}),j()}function qn(t,e){Q(e,!1);const[n,i]=Se(),s=()=>pe(P,"$shearDeformationParameterStore",n),o=D(),r=D();let c=G(e,"step",8,1);se(()=>s(),()=>{A(o,s())}),se(()=>p(o),()=>{A(r,p(o).is_streifen?"kN/m":"kN")}),we(),ee();const a=oe(()=>X("shearDeformation.parameters.designLoad"));Et(t,{field:"ff_zd",get label(){return p(a)},get step(){return c()},get helperText(){return p(r)},get min(){return T.BEMESSUNGSLAST_MIN},get max(){return T.BEMESSUNGSLAST_MAX}}),j(),i()}const te=0,V=-.8,ne=-.8,Qe=(V+ne)/2,ue=.2,de=V,me=2,_e=.25,wt=.08,_n=[[V,1,-0],[ne,1,-0],[ne,1,te],[V,1,te],[Qe,.3,te],[V,.3,te],[ne,.6,te],[ne,.6,-0],[Qe,.3,-0],[V,.3,-0],[de,0,_e],[de,me,_e],[de,me,-.25],[de,0,-.25],[ue,me,-.25],[ue,0,-.25],[ue,me,_e],[ue,0,_e]],hn=[13,15,17,13,17,10,12,16,14,12,11,16,13,10,11,13,11,12,15,14,16,11,16,17,13,12,14,13,14,15,10,17,16,10,16,11],gn=[0,1,2,0,2,3,1,7,6,1,6,2,0,3,5,0,5,9,0,9,8,0,8,7,0,7,1,3,2,6,3,6,4,3,4,5,9,5,4,9,4,8,8,4,6,8,6,7];function Ye(t,e,n=0,i=25){const s=_n.map(a=>[a[0],a[1],a[2]]),o=i/1e3+.01,r=t/1e3;let c=e/2/1e3;return n||(c+=o),[1,2,6,7].forEach(a=>{s[a][0]-=r+wt+o}),[4,8].forEach(a=>{s[a][0]-=-.1}),[0,1,7,8,9].forEach(a=>{s[a][2]-=c}),[2,3,4,5,6].forEach(a=>{s[a][2]+=c}),n?([12,13,14,15].forEach(a=>{s[a][2]=-e/2/1e3}),[10,11,16,17].forEach(a=>{s[a][2]=e/2/1e3})):([12,13,14,15].forEach(a=>{s[a][2]-=c}),[10,11,16,17].forEach(a=>{s[a][2]+=c})),s}function En(t){const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");n.fillStyle="red",n.beginPath(),n.arc(32,32,28,0,Math.PI*2),n.fill(),n.fillStyle="white",n.font="bold 36px Arial",n.textAlign="center",n.textBaseline="middle",n.fillText(t,32,32);const i=new Xt(e),s=new Ft({map:i}),o=new _t(s);return o.scale.set(.08,.08,1),o}function je(t,e,n=!1){const i=new He,s=e.a,o=e.b,r=e.is_streifen,c=e.c_nom,a=new xe({color:$t,shininess:100,flatShading:!0,transparent:!1}),f=Ye(s,o,r,c),l=new Float32Array(f.flat()),u=new Y;u.setAttribute("position",new Je(l,3)),u.setIndex(hn),u.computeVertexNormals();const m=new I(u,a);m.castShadow=!0,m.receiveShadow=!0,i.add(m);const _=new Y;_.setAttribute("position",new Je(l,3)),_.setIndex(gn),_.computeVertexNormals();const d=new I(_,a);return d.castShadow=!0,d.receiveShadow=!0,i.add(d),n&&f.forEach((E,h)=>{const g=En(h.toString());g.position.set(E[0],E[1],E[2]),i.add(g)}),t.add(i),i}function J(){const t=ut(P),e=Ye(t.a,t.b,t.is_streifen,t.c_nom),n=[e[0],e[1],e[2],e[3]];return{centerX:-t.a/2/1e3-wt+V,centerY:n[0][1],centerZ:(n[0][2]+n[1][2]+n[2][2]+n[3][2])/4}}function et(t,e){e&&(e.traverse(n=>{n instanceof I&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(i=>i.dispose()):n.material.dispose())}),t.remove(e))}let De=!0,Te=0,ae=0,ge=null,re=null;const wn=.01,Le=[new v(-2.1247554456236646,1.8348909616249438,-.9418251993957858),new v(-2.298436211128349,2.1141465425086055,.0593750739688058),new v(-1.8215114290760264,1.8160993918937776,1.1472099754138583)];function pn(){const t=J();return new v(t.centerX,t.centerY,t.centerZ)}function Sn(t,e,n){if(!De||!e)return;ae===0&&(ae=t,ge=e.position.clone(),re=n.target.clone());const i=t-ae,s=ge||Le[Te],o=(Te+1)%Le.length,r=Le[o],a=s.distanceTo(r)/wn*1e3,f=pn();if(i<a){const l=i/a;e.position.lerpVectors(s,r,l),n&&re&&(n.target.lerpVectors(re,f,l),n.update())}else Te=o,ae=t,ge=null,re=f.clone()}function vn(t){const e=()=>{De=!1},n=()=>{De=!0,ae=0,ge=null,re=null};return t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",n),()=>{t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",n)}}function xn(){const t=new kt;return t.background=new ht(16777215),t}function yn(t){const e=new Ht({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,e.shadowMap.type=Yt,t.appendChild(e.domElement),e}function An(t){const e=new I(new Ut(200,200),new xe({color:13355979,specular:4671303}));e.rotation.x=-Math.PI/2,e.position.y=-10,e.receiveShadow=!0}function Mn(t){return t.add(new Zt(9272444,4802918,3)),bn(t,0,500,500,16777215,2)}function bn(t,e,n,i,s,o){const r=new Vt(s,o);r.position.set(e,n,i),r.castShadow=!0;const c=1e3;return r.shadow.camera.left=-1e3,r.shadow.camera.right=c,r.shadow.camera.top=c,r.shadow.camera.bottom=-1e3,r.shadow.camera.near=1,r.shadow.camera.far=2e3,r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.radius=1,r.shadow.bias=-5e-4,t.add(r),t.add(r.target),r}const Tn=400,Ln=400,Rn=10,Nn=.4,Gn=.4,In=.01;function tt(t,e){const n=new He,i=new xe({color:qt,shininess:100,specular:2236962}),s=(e.a-Tn)/1e3,o=(e.b-Ln)/1e3,r=(e.t-Rn)*2/1e3,c=Nn+s,a=Gn+o,f=In+r,l=new I(new Kt(c,f,a),i),u=J();l.position.set(u.centerX,u.centerY+f/2,u.centerZ),l.castShadow=!0,l.receiveShadow=!0,n.add(l),t.add(n),l.geometry.computeBoundingBox();const m=new Wt;m.setFromObject(l);const _=u.centerY;return{group:n,boundingBox:m,height:_,lengthDiffX:s,lengthDiffZ:o}}function nt(t,e){e&&(e.traverse(n=>{n instanceof I&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(i=>i.dispose()):n.material.dispose())}),t.remove(e))}function at(t,e){const n=new He;if(!e.is_dorn)return t.add(n),n;const i=new xe({color:Jt,flatShading:!1}),s=(50+e.b*.2)/1e3,o=e.d_b/2/1e3,r=J(),c=e.n_b;for(let a=0;a<c;a++){const f=new I(new Qt(o,o,s,16),i);let l=0;if(c===2){const u=e.b/1e3;l=a===0?u/5:-u/5}f.position.set(r.centerX,r.centerY+s/2,r.centerZ+l),f.castShadow=!0,f.receiveShadow=!0,n.add(f)}return t.add(n),n}function rt(t,e){e&&(e.traverse(n=>{n instanceof I&&(n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(i=>i.dispose()):n.material.dispose())}),t.remove(e))}let K=[],H=[],Re=null,W=null;const he=11765,Ce=.012,Be=2e-4;async function pt(){return Re||W||(W=new Promise((t,e)=>{new jt().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",i=>{Re=i,W=null,t(i)},void 0,i=>{W=null,e(i)})}),W)}async function st(t,e,n,i,s,o=0,r=0){try{const c=await pt(),a=new Ie(s,{font:c,size:Ce,depth:Be,curveSegments:12,bevelEnabled:!0,bevelThickness:3e-4,bevelSize:2e-4,bevelOffset:0,bevelSegments:3});a.computeBoundingBox();const f=a.boundingBox;if(f){const h=-(f.max.x-f.min.x)/2,g=-(f.max.y-f.min.y)/2;a.translate(h,g,0)}const l=new ze({color:16711680,metalness:.3,roughness:.4}),u=new I(a,l),m=new v(n[0]-e[0],0,n[2]-e[2]).normalize(),_=new v(-m.z,0,m.x),d=(e[0]+n[0])/2+o+_.x*i,E=(e[2]+n[2])/2+r+_.z*i;u.position.set(d,e[1]+.001,E),u.rotation.x=-Math.PI/2,u.rotation.z=Math.atan2(m.z,m.x)+Math.PI,t.add(u),K.push(u)}catch(c){console.error("Failed to load font for 3D text:",c)}}function ot(t,e,n,i,s,o=.05){const r=new v(-i.z,0,i.x).normalize(),c=new Y().setFromPoints([new v(e.x-r.x*o/2,e.y,e.z-r.z*o/2),new v(e.x+r.x*o/2,e.y,e.z+r.z*o/2)]),a=new U(c,s);t.add(a),K.push(a);const f=new Y().setFromPoints([new v(n.x-r.x*o/2,n.y,n.z-r.z*o/2),new v(n.x+r.x*o/2,n.y,n.z+r.z*o/2)]),l=new U(f,s);t.add(l),K.push(l)}function Oe(t){K.forEach(e=>{t.remove(e),e instanceof I&&(e.geometry&&e.geometry.dispose(),e.material instanceof Z&&e.material.dispose()),e instanceof U&&(e.geometry&&e.geometry.dispose(),e.material instanceof Z&&e.material.dispose()),e instanceof _t&&e.material instanceof Z&&e.material.dispose()}),K=[]}function it(t){H.forEach(e=>{t.remove(e),e instanceof I&&(e.geometry&&e.geometry.dispose(),e.material instanceof Z&&e.material.dispose()),e instanceof U&&(e.geometry&&e.geometry.dispose(),e.material instanceof Z&&e.material.dispose()),e instanceof Ge&&(e.line&&e.line.geometry&&e.line.geometry.dispose(),e.line&&e.line.material instanceof Z&&e.line.material.dispose(),e.cone&&e.cone.geometry&&e.cone.geometry.dispose(),e.cone&&e.cone.material instanceof Z&&e.cone.material.dispose())}),H=[]}async function ct(t,e=new v(0,0,0)){const s=new gt({color:new ht(he)}),o=he;e.z=e.z-.035;const r=new v(e.x-.06,e.y,e.z),c=new Y().setFromPoints([e,r]),a=new U(c,s);t.add(a),H.push(a);const f=new v(-1,0,0),l=new Ge(f,r,.03,o,.03*.5,.03*.3);t.add(l),H.push(l);const u=new v(e.x,e.y,e.z-.06),m=new Y().setFromPoints([e,u]),_=new U(m,s);t.add(_),H.push(_);const d=new v(0,0,-1),E=new Ge(d,u,.03,o,.03*.5,.03*.3);t.add(E),H.push(E);try{const h=await pt(),g=new Ie("x (Bauwerkshauptachse)",{font:h,size:Ce,depth:Be,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});g.computeBoundingBox();const w=g.boundingBox;if(w){const $=-(w.max.x-w.min.x)/2,F=-(w.max.y-w.min.y)/2;g.translate($,F,0)}const M=new ze({color:he,metalness:.3,roughness:.4}),S=new I(g,M);S.position.set(e.x-.06*1-.05,e.y+.001,e.z-.02),S.rotation.x=-Math.PI/2,S.rotation.z=0,t.add(S),H.push(S);const y=new Ie("y",{font:h,size:Ce,depth:Be,curveSegments:12,bevelEnabled:!0,bevelThickness:2e-4,bevelSize:1e-4,bevelOffset:0,bevelSegments:3});y.computeBoundingBox();const x=y.boundingBox;if(x){const $=-(x.max.x-x.min.x)/2,F=-(x.max.y-x.min.y)/2;y.translate($,F,0)}const L=new ze({color:he,metalness:.3,roughness:.4}),B=new I(y,L);B.position.set(e.x-.02,e.y+.001,e.z-.06*1.1),B.rotation.x=-Math.PI/2,B.rotation.z=0,t.add(B),H.push(B)}catch(h){console.error("Failed to create 3D text for coordinate system:",h)}}async function lt(t){Oe(t);const e=ut(P),n=Ye(e.a,e.b,e.is_streifen,e.c_nom),i=J(),s=new gt({color:16711680});let o=e.c_nom/1e3;e.is_streifen===1&&(o=0);const r=.05,c=e.b/1e3,a=e.a/1e3;if(e.is_streifen===0){const g=(n[1][0]+n[2][0])/2,w=n[1][1],M=(n[1][2]+n[2][2])/2,S=new v(g-r-o,w,M-c/2),y=new v(g-r-o,w,M+c/2),x=new Y().setFromPoints([S,y]),L=new U(x,s);t.add(L),K.push(L);const B=new v().subVectors(y,S).normalize();ot(t,S,y,B,s),await st(t,[S.x,S.y,S.z],[y.x,y.y,y.z],.02,`b = ${e.b} mm`,0,0)}const f=i.centerX,l=n[0][1],u=(n[0][2]+n[1][2])/2,m=new v(f-a/2,l,u-r-o),_=new v(f+a/2,l,u-r-o),d=new Y().setFromPoints([m,_]),E=new U(d,s);t.add(E),K.push(E);const h=new v().subVectors(_,m).normalize();ot(t,m,_,h,s),await st(t,[m.x,m.y,m.z],[_.x,_.y,_.z],-.02,`a = ${e.a} mm`,0,0)}var zn=ve('<div class="scene-container svelte-5boshl"></div>');function Kn(t,e){Q(e,!1),G(e,"autoRotate",8,!1);let n;const i=.05,s=.001,o=.04,r=new v(-3.6366326492655574,2.6403115127435544,-1.3328222766488578);let c=D(),a,f,l,u,m,_,d,E,h,g,w,M,S;zt(async()=>{a=xn(),l=yn(p(c)),An(),h=Mn(a),f=en(35),f.position.copy(r),S=P.subscribe(async R=>{if(n=R,a&&d!==void 0){_&&et(a,_),d&&nt(a,d),E&&rt(a,E),Oe(a),it(a),_=je(a,n,!1),d=tt(a,n).group,E=at(a,n),await lt(a);const N=J();let ce=Math.max(n.c_nom/1e3,.03);n.is_streifen===1&&(ce=.1);const le=new v(N.centerX+i+n.a/2e3,N.centerY+s,N.centerZ+o+n.b/2e3+ce);await ct(a,le)}});const x=J(),L=[x.centerX,x.centerY,x.centerZ];u=tn(f,l,L),g=nn(l,f,u),w=vn(p(c)),_=je(a,n,!1),d=tt(a,n).group,E=at(a,n),await lt(a);let $=n.c_nom/1e3;n.is_streifen===1&&($=.1);const F=new v(x.centerX+i+n.a/2e3,x.centerY+s+.001,x.centerZ+o+n.b/2e3+$);await ct(a,F);const C=1e3/30;let ie=0;const z=R=>{M=requestAnimationFrame(z);const O=R-ie;if(!(O<C)){if(ie=R-O%C,Sn(R,f,u),an(u),h&&f){const N=new v(0,500,500);N.applyQuaternion(f.quaternion),h.position.copy(f.position).add(N),u&&u.target&&(h.target.position.copy(u.target),h.target.updateMatrixWorld())}l.render(a,f)}};if(z(0),await Dt(),p(c)&&p(c)instanceof Element){let R=!1;m=new ResizeObserver(()=>{p(c)&&l&&f&&!R&&(R=!0,requestAnimationFrame(()=>{if(p(c)&&l&&f){const O=p(c).clientWidth,N=p(c).clientHeight;console.log(`Resizing renderer to ${O}x${N}`),f.aspect=O/N,f.updateProjectionMatrix(),l.setSize(O,N)}R=!1}))}),m.observe(p(c))}console.log("ShearDeformationScene initialized")}),Ct(()=>{M!==void 0&&cancelAnimationFrame(M),g&&g(),w&&w(),S&&S(),m&&m.disconnect(),u&&u.dispose(),l&&l.dispose(),_&&a&&et(a,_),d&&a&&nt(a,d),E&&a&&rt(a,E),a&&Oe(a),a&&it(a),console.log("ShearDeformationScene destroyed")}),ee();var y=zn();rn(y,x=>A(c,x),()=>p(c)),q(t,y),j()}export{qn as B,T as I,Un as L,Et as P,Kn as S,Zn as a,Yn as b,Vn as c,ln as d,cn as e,k as l,be as p,P as s};
